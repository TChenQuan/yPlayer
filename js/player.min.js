"use strict";Vue.config.debug=!0;var vm=new Vue({el:"#ym-player",data:{song_name:"",album_name:"",artist_name:"",showlrc:[],musicArray:"",playingMusic:"",playingIndex:"",havevoice:!0,playStatus:!0,prevIndex:"",statusText:"",prevMusic:"",followIndex:"",followMusic:"",volume:.5,curtime:"00:00",musictime:"00:00",loaded:!1},created:function(){this.loadMusic()},methods:{getJSON:function(t){var e=new Promise(function(e,s){function i(){4===this.readyState&&(200===this.status?e(this.response):s(new Error(this.statusText)))}var r=new XMLHttpRequest;r.open("GET",t),r.onreadystatechange=i,r.responseType="json",r.setRequestHeader("Accept","application/json"),r.send()});return e},changePlay:function(){0==this.playStatus?(this.playStatus=!0,this.$els.mplayer.play()):(this.playStatus=!1,this.$els.mplayer.pause())},loadMusic:function(t){var e=t?"getSong.php?id="+t:"getSong.php?id=0";this.getJSON(e).then(function(t){vm.statusText="",vm.musicArray=t.tracks,vm.musicLength=vm.musicArray.length,vm.$els.album.style.backgroundImage="url("+t.cover+")","no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"},vm.song_name=t.music_name,vm.album_name=t.album_name,vm.artist_name=t.artists,vm.playingMusic=t.id,vm.playingIndex=t.index,vm.loaded=!0,vm.$els.mplayer.setAttribute("src",t.mp3),vm.$els.mplayer.volume=.5,vm.$els.mplayer.play(),vm.$els.mplayer.onerror=function(){vm.statusText="网易API抽风了..歌曲无法获取，稍后进入下一首",window.setTimeout(function(){vm.nextMusic()},3e3)}},function(t){alert("服务器通信异常")})},changeVoice:function(t){this.$els.mplayer.volume=t.target.value/10,0==t.target.value?this.havevoice=!1:(this.havevoice=!0,this.volume=t.target.value)},changeSound:function(){1==this.havevoice?(this.havevoice=!1,this.$els.mplayer.volume=0,this.$els.soundrange.value=0):(this.havevoice=!0,this.$els.mplayer.volume=this.volume/10,this.$els.soundrange.value=this.volume)},checkStatus:function(){return 0!=this.$els.mplayer.buffered.length},nextMusic:function(){this.statusText="";var t,e;this.followMusic&&this.followIndex?(t=this.followIndex,e=this.followMusic):(t=Math.ceil(Math.random()*this.musicLength),e=this.musicArray[t].id),this.followIndex="",this.followMusic="",this.prevMusic=this.playingMusic,this.prevIndex=this.playingIndex,this.showlrc=[],this.getJSON("getLyrics.php?id="+e).then(function(t){"no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"}},function(t){vm.showlrc={0:"暂无歌词"}});var s="";for(var i in this.musicArray[t].artists)s+=this.musicArray[t].artists[i].name;this.$els.album.style.backgroundImage="url("+this.musicArray[t].album.picUrl+")",this.playingMusic=this.musicArray[t].id,this.playingIndex=t,this.song_name=this.musicArray[t].name,this.album_name=this.musicArray[t].album.name,this.artist_name=s;var r=this.musicArray[t].mp3Url;this.$els.mplayer.setAttribute("src",r),this.$els.mplayer.volume=.5,this.$els.mplayer.play(),this.$els.mplayer.onerror=function(){vm.statusText="网易API抽风了..歌曲无法获取，稍后进入下一首",window.setTimeout(function(){vm.nextMusic()},3e3)},this.playStatus=!0},backMusic:function(){if(!this.prevMusic||!this.prevIndex)return!1;this.statusText="",this.followIndex=this.playingIndex,this.followMusic=this.playingMusic,this.showlrc=[],this.getJSON("getLyrics.php?id="+this.prevMusic).then(function(t){"no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"}},function(t){vm.showlrc={0:"暂无歌词"}});var t="";for(var e in this.musicArray[this.prevIndex].artists)t+=this.musicArray[this.prevIndex].artists[e].name;this.$els.album.style.backgroundImage="url("+this.musicArray[this.prevIndex].album.picUrl+")",this.playingMusic=this.musicArray[this.prevIndex].id,this.playingIndex=this.prevIndex,this.song_name=this.musicArray[this.prevIndex].name,this.album_name=this.musicArray[this.prevIndex].album.name,this.artist_name=t;var s=this.musicArray[this.prevIndex].mp3Url;this.prevMusic="",this.prevIndex="",this.$els.mplayer.setAttribute("src",s),this.$els.mplayer.volume=.5,this.$els.mplayer.play(),this.$els.mplayer.onerror=function(){vm.statusText="网易API抽风了..歌曲无法获取，稍后进入下一首",window.setTimeout(function(){vm.nextMusic()},3e3)},this.playStatus=!0},getMusic:function(){var t=void 0,e=void 0,s=parseInt(this.$els.mplayer.duration/60);e=s.toString().length>1?""+s:"0"+s;var i=parseInt(this.$els.mplayer.duration%60);t=i.toString().length>1?""+i:"0"+i,this.musictime=e+":"+t},playEvent:function(){if(!this.checkStatus())return!1;var t=void 0,e=void 0,s=parseInt(this.$els.mplayer.currentTime/60);e=s.toString().length>1?""+s:"0"+s;var i=parseInt(this.$els.mplayer.currentTime%60);t=i.toString().length>1?""+i:"0"+i,this.curtime=e+":"+t;var r=Math.floor(this.$els.mplayer.currentTime).toString();this.display_lrc(r);var a=this.$els.mplayer.buffered.end(0)/this.$els.mplayer.duration,l=this.$els.mplayer.currentTime/this.$els.mplayer.duration;this.$els.buffer.style.transform="scaleX("+a+")",this.$els.playtime.style.transform="scaleX("+l+")"},changeProgress:function(t){if(!this.checkStatus())return!1;var e=t.clientX-this.$els.progress.getBoundingClientRect().left;this.$els.mplayer.currentTime=parseInt(e/240*this.$els.mplayer.duration)},display_lrc:function(t){if(!this.checkStatus())return!1;for(var e=document.getElementsByClassName("lrc"),s=0;s<e.length;s++)s+1<e.length&&(e[s].getAttribute("dtime")<=this.$els.mplayer.currentTime&&this.$els.mplayer.currentTime<e[s+1].getAttribute("dtime")?(e[s].classList?e[s].classList.add("lrc-current"):e[s].className+=" lrc-current",e[s].offsetTop>200&&(this.$els.lyricbox.scrollTop=e[s].offsetTop-200)):e[s].classList?e[s].classList.remove("lrc-current"):e[s].className=e[s].className.replace(new RegExp("(^|\\b)"+"lrc-current".split(" ").join("|")+"(\\b|$)","gi")," "));e[e.length-1].getAttribute("dtime")<=this.$els.mplayer.currentTime&&(e[e.length-1].classList?e[e.length-1].classList.add("lrc-current"):e[e.length-1].className+=" lrc-current")}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYXllci5qcyJdLCJuYW1lcyI6WyJWdWUiLCJjb25maWciLCJkZWJ1ZyIsInZtIiwiZWwiLCJkYXRhIiwic29uZ19uYW1lIiwiYWxidW1fbmFtZSIsImFydGlzdF9uYW1lIiwic2hvd2xyYyIsIm11c2ljQXJyYXkiLCJwbGF5aW5nTXVzaWMiLCJwbGF5aW5nSW5kZXgiLCJoYXZldm9pY2UiLCJwbGF5U3RhdHVzIiwicHJldkluZGV4Iiwic3RhdHVzVGV4dCIsInByZXZNdXNpYyIsImZvbGxvd0luZGV4IiwiZm9sbG93TXVzaWMiLCJ2b2x1bWUiLCJjdXJ0aW1lIiwibXVzaWN0aW1lIiwibG9hZGVkIiwiY3JlYXRlZCIsInRoaXMiLCJsb2FkTXVzaWMiLCJtZXRob2RzIiwiZ2V0SlNPTiIsInVybCIsInByb21pc2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImhhbmRsZXIiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2UiLCJFcnJvciIsImNsaWVudCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlc3BvbnNlVHlwZSIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwiY2hhbmdlUGxheSIsIiRlbHMiLCJtcGxheWVyIiwicGxheSIsInBhdXNlIiwiaWQiLCJ0aGVuIiwidHJhY2tzIiwibXVzaWNMZW5ndGgiLCJsZW5ndGgiLCJhbGJ1bSIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiY292ZXIiLCJscmMiLCIwIiwibXVzaWNfbmFtZSIsImFydGlzdHMiLCJpbmRleCIsInNldEF0dHJpYnV0ZSIsIm1wMyIsIm9uZXJyb3IiLCJ3aW5kb3ciLCJzZXRUaW1lb3V0IiwibmV4dE11c2ljIiwiZXJyb3IiLCJhbGVydCIsImNoYW5nZVZvaWNlIiwiZXZlbnQiLCJ0YXJnZXQiLCJ2YWx1ZSIsImNoYW5nZVNvdW5kIiwic291bmRyYW5nZSIsImNoZWNrU3RhdHVzIiwiYnVmZmVyZWQiLCJyYW5kb21faW5kZXgiLCJyYW5kb21faWQiLCJNYXRoIiwiY2VpbCIsInJhbmRvbSIsImFydGlzdHNfbmFtZSIsImkiLCJuYW1lIiwicGljVXJsIiwibXAzX2FkZHJlc3MiLCJtcDNVcmwiLCJiYWNrTXVzaWMiLCJnZXRNdXNpYyIsIm1fc2Vjb25kIiwidW5kZWZpbmVkIiwibV9taW51dGUiLCJ0ZW1wX21pbnV0ZSIsInBhcnNlSW50IiwiZHVyYXRpb24iLCJ0b1N0cmluZyIsInRlbXBfc2Vjb25kIiwicGxheUV2ZW50IiwiY19zZWNvbmQiLCJjX21pbnV0ZSIsImN1cnJlbnRUaW1lIiwicGxheV90aW1lIiwiZmxvb3IiLCJkaXNwbGF5X2xyYyIsImJ1ZmZlcl9wZXJjZW50IiwiZW5kIiwiY3VycmVudF9wZXJjZW50IiwiYnVmZmVyIiwidHJhbnNmb3JtIiwicGxheXRpbWUiLCJjaGFuZ2VQcm9ncmVzcyIsInByb2dyZXNzWCIsImNsaWVudFgiLCJwcm9ncmVzcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImxlZnQiLCJscmNzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZ2V0QXR0cmlidXRlIiwiY2xhc3NMaXN0IiwiYWRkIiwiY2xhc3NOYW1lIiwib2Zmc2V0VG9wIiwibHlyaWNib3giLCJzY3JvbGxUb3AiLCJyZW1vdmUiLCJyZXBsYWNlIiwiUmVnRXhwIiwic3BsaXQiLCJqb2luIl0sIm1hcHBpbmdzIjoiQUFJQSxZQUVBQSxLQUFJQyxPQUFPQyxPQUFRLENBQ25CLElBQUlDLElBQUssR0FBSUgsTUFDWEksR0FBSSxhQUNKQyxNQUNFQyxVQUFXLEdBQ1hDLFdBQVksR0FDWkMsWUFBYSxHQUNiQyxXQUNBQyxXQUFZLEdBQ1pDLGFBQWMsR0FDZEMsYUFBYyxHQUNkQyxXQUFXLEVBQ1hDLFlBQVksRUFDWkMsVUFBVyxHQUNYQyxXQUFZLEdBQ1pDLFVBQVcsR0FDWEMsWUFBYSxHQUNiQyxZQUFhLEdBQ2JDLE9BQVEsR0FDUkMsUUFBUyxRQUNUQyxVQUFXLFFBQ1hDLFFBQVEsR0FFVkMs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QVVDLElBQUksZUFFcENMLEVBQUtBLEVBQUtsRSxPQUFTLEdBQUd3RSxXQUFhIiwiZmlsZSI6InBsYXllci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiB5UGxheWVyXG4qIEF1dGhvciB5YW5nemoxOTkyXG4qL1xuXCJ1c2Ugc3RyaWN0XCI7XG5cblZ1ZS5jb25maWcuZGVidWcgPSB0cnVlO1xudmFyIHZtID0gbmV3IFZ1ZSh7XG4gIGVsOiAnI3ltLXBsYXllcicsXG4gIGRhdGE6IHtcbiAgICBzb25nX25hbWU6ICcnLFxuICAgIGFsYnVtX25hbWU6ICcnLFxuICAgIGFydGlzdF9uYW1lOiAnJyxcbiAgICBzaG93bHJjOiBbXSxcbiAgICBtdXNpY0FycmF5OiAnJyxcbiAgICBwbGF5aW5nTXVzaWM6ICcnLFxuICAgIHBsYXlpbmdJbmRleDogJycsXG4gICAgaGF2ZXZvaWNlOiB0cnVlLFxuICAgIHBsYXlTdGF0dXM6IHRydWUsXG4gICAgcHJldkluZGV4OiAnJyxcbiAgICBzdGF0dXNUZXh0OiAnJyxcbiAgICBwcmV2TXVzaWM6ICcnLFxuICAgIGZvbGxvd0luZGV4OiAnJyxcbiAgICBmb2xsb3dNdXNpYzogJycsXG4gICAgdm9sdW1lOiAwLjUsXG4gICAgY3VydGltZTogJzAwOjAwJyxcbiAgICBtdXNpY3RpbWU6ICcwMDowMCcsXG4gICAgbG9hZGVkOiBmYWxzZVxuICB9LFxuICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge1xuICAgIHRoaXMubG9hZE11c2ljKCk7XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICAvKipcbiAgICAgKiBbZ2V0SlNPTiBnZW5lcmF0ZSBBSkFYIHJlcXVlc3RdXG4gICAgICogQHBhcmFtICB7W3N0cmluZ119IHVybCBbcmVxdWVzdCB1cmxdXG4gICAgICogQHJldHVybiB7W3Byb21pc2VdfSBcbiAgICAgKi9cbiAgICBnZXRKU09OOiBmdW5jdGlvbiBnZXRKU09OKHVybCkge1xuICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciBjbGllbnQgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgY2xpZW50Lm9wZW4oXCJHRVRcIiwgdXJsKTtcbiAgICAgICAgY2xpZW50Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7XG4gICAgICAgIGNsaWVudC5yZXNwb25zZVR5cGUgPSBcImpzb25cIjtcbiAgICAgICAgY2xpZW50LnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgICBjbGllbnQuc2VuZCgpO1xuICAgICAgICBmdW5jdGlvbiBoYW5kbGVyKCkge1xuICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgIT09IDQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IodGhpcy5zdGF0dXNUZXh0KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogW2NoYW5nZVBsYXkgUGxheSBzdGF0dXMgPOKAlOKAlD4gIFBhdXNlIHN0YXV0cyBdXG4gICAgICovXG4gICAgY2hhbmdlUGxheTogZnVuY3Rpb24gY2hhbmdlUGxheSgpIHtcbiAgICAgIGlmICh0aGlzLnBsYXlTdGF0dXMgPT0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5wbGF5U3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIucGxheSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wbGF5U3RhdHVzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuJGVscy5tcGxheWVyLnBhdXNlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBbbG9hZE11c2ljIGxvYWQgbXVzaWMgd2l0aCBzb25nIGlkIG9yIHJhbmRvbSBzb25nXVxuICAgICAqIEBwYXJhbSAge1tpbnRdfSBpZCBbTmV0ZWFzZSBzb25nIGlkXVxuICAgICAqL1xuICAgIGxvYWRNdXNpYzogZnVuY3Rpb24gbG9hZE11c2ljKGlkKSB7XG4gICAgICB2YXIgdXJsID0gaWQgPyAnZ2V0U29uZy5waHA/aWQ9JyArIGlkIDogJ2dldFNvbmcucGhwP2lkPTAnO1xuICAgICAgdGhpcy5nZXRKU09OKHVybCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICB2bS5zdGF0dXNUZXh0ID0gJyc7XG4gICAgICAgIHZtLm11c2ljQXJyYXkgPSBkYXRhLnRyYWNrcztcbiAgICAgICAgdm0ubXVzaWNMZW5ndGggPSB2bS5tdXNpY0FycmF5Lmxlbmd0aDtcbiAgICAgICAgdm0uJGVscy5hbGJ1bS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyBkYXRhLmNvdmVyICsgJyknO1xuICAgICAgICBpZiAoZGF0YS5scmMgIT0gXCJub1wiKSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IGRhdGEubHJjO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLnNob3dscmMgPSB7IFwiMFwiOiBcIuaaguaXoOatjOivjVwiIH07XG4gICAgICAgIH1cbiAgICAgICAgdm0uc29uZ19uYW1lID0gZGF0YS5tdXNpY19uYW1lO1xuICAgICAgICB2bS5hbGJ1bV9uYW1lID0gZGF0YS5hbGJ1bV9uYW1lO1xuICAgICAgICB2bS5hcnRpc3RfbmFtZSA9IGRhdGEuYXJ0aXN0cztcbiAgICAgICAgdm0ucGxheWluZ011c2ljID0gZGF0YS5pZDtcbiAgICAgICAgdm0ucGxheWluZ0luZGV4ID0gZGF0YS5pbmRleDtcbiAgICAgICAgdm0ubG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgdm0uJGVscy5tcGxheWVyLnNldEF0dHJpYnV0ZShcInNyY1wiLCBkYXRhLm1wMyk7XG4gICAgICAgIHZtLiRlbHMubXBsYXllci52b2x1bWUgPSAwLjU7XG4gICAgICAgIHZtLiRlbHMubXBsYXllci5wbGF5KCk7XG4gICAgICAgIHZtLiRlbHMubXBsYXllci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZtLnN0YXR1c1RleHQgPSAn572R5piTQVBJ5oq96aOO5LqGLi7mrYzmm7Lml6Dms5Xojrflj5bvvIznqI3lkI7ov5vlhaXkuIvkuIDpppYnO1xuICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZtLm5leHRNdXNpYygpO1xuICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICB9O1xuICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGFsZXJ0KCfmnI3liqHlmajpgJrkv6HlvILluLgnKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogW2NoYW5nZVZvaWNlIGNoYW5nZSBwbGF5ZXIgJ3Mgdm9sdW1lIF1cbiAgICAgKi9cbiAgICBjaGFuZ2VWb2ljZTogZnVuY3Rpb24gY2hhbmdlVm9pY2UoZXZlbnQpIHtcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLnZvbHVtZSA9IGV2ZW50LnRhcmdldC52YWx1ZSAvIDEwO1xuICAgICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA9PSAwKSB7XG4gICAgICAgIHRoaXMuaGF2ZXZvaWNlID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhhdmV2b2ljZSA9IHRydWU7XG4gICAgICAgIHRoaXMudm9sdW1lID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogW2NoYW5nZVNvdW5kIG11dGUgPOKAlOKAlD4gdXNlZCB2b2x1bW5dXG4gICAgICovXG4gICAgY2hhbmdlU291bmQ6IGZ1bmN0aW9uIGNoYW5nZVNvdW5kKCkge1xuICAgICAgaWYgKHRoaXMuaGF2ZXZvaWNlID09IHRydWUpIHtcbiAgICAgICAgdGhpcy5oYXZldm9pY2UgPSBmYWxzZTtcbiAgICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIudm9sdW1lID0gMDtcbiAgICAgICAgdGhpcy4kZWxzLnNvdW5kcmFuZ2UudmFsdWUgPSAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5oYXZldm9pY2UgPSB0cnVlO1xuICAgICAgICB0aGlzLiRlbHMubXBsYXllci52b2x1bWUgPSB0aGlzLnZvbHVtZSAvIDEwO1xuICAgICAgICB0aGlzLiRlbHMuc291bmRyYW5nZS52YWx1ZSA9IHRoaXMudm9sdW1lO1xuICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogW2NoZWNrU3RhdHVzIGNoZWNrIHNvbmcncyBsb2FkaW5nIHN0YXR1c11cbiAgICAgKiBAcmV0dXJuIHtbYm9vbGVhbl19XG4gICAgICovXG4gICAgY2hlY2tTdGF0dXM6IGZ1bmN0aW9uIGNoZWNrU3RhdHVzKCkge1xuICAgICAgaWYgKHRoaXMuJGVscy5tcGxheWVyLmJ1ZmZlcmVkLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0sXG4gICAgbmV4dE11c2ljOiBmdW5jdGlvbiBuZXh0TXVzaWMoKSB7XG4gICAgICB0aGlzLnN0YXR1c1RleHQgPSAnJztcbiAgICAgIHZhciByYW5kb21faW5kZXg7XG4gICAgICB2YXIgcmFuZG9tX2lkO1xuICAgICAgaWYgKCF0aGlzLmZvbGxvd011c2ljIHx8ICF0aGlzLmZvbGxvd0luZGV4KSB7XG4gICAgICAgIHJhbmRvbV9pbmRleCA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogdGhpcy5tdXNpY0xlbmd0aCk7XG4gICAgICAgIHJhbmRvbV9pZCA9IHRoaXMubXVzaWNBcnJheVtyYW5kb21faW5kZXhdLmlkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmFuZG9tX2luZGV4ID0gdGhpcy5mb2xsb3dJbmRleDtcbiAgICAgICAgcmFuZG9tX2lkID0gdGhpcy5mb2xsb3dNdXNpYztcbiAgICAgIH1cbiAgICAgIHRoaXMuZm9sbG93SW5kZXggPSAnJztcbiAgICAgIHRoaXMuZm9sbG93TXVzaWMgPSAnJztcbiAgICAgIHRoaXMucHJldk11c2ljID0gdGhpcy5wbGF5aW5nTXVzaWM7XG4gICAgICB0aGlzLnByZXZJbmRleCA9IHRoaXMucGxheWluZ0luZGV4O1xuICAgICAgdGhpcy5zaG93bHJjID0gW107XG4gICAgICB0aGlzLmdldEpTT04oJ2dldEx5cmljcy5waHA/aWQ9JyArIHJhbmRvbV9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5scmMgIT0gXCJub1wiKSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IGRhdGEubHJjO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLnNob3dscmMgPSB7IFwiMFwiOiBcIuaaguaXoOatjOivjVwiIH07XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB2bS5zaG93bHJjID0geyBcIjBcIjogXCLmmoLml6DmrYzor41cIiB9O1xuICAgICAgfSk7XG4gICAgICB2YXIgYXJ0aXN0c19uYW1lID0gJyc7XG4gICAgICBmb3IgKHZhciBpIGluIHRoaXMubXVzaWNBcnJheVtyYW5kb21faW5kZXhdLmFydGlzdHMpIHtcbiAgICAgICAgYXJ0aXN0c19uYW1lICs9IHRoaXMubXVzaWNBcnJheVtyYW5kb21faW5kZXhdLmFydGlzdHNbaV0ubmFtZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuJGVscy5hbGJ1bS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyB0aGlzLm11c2ljQXJyYXlbcmFuZG9tX2luZGV4XS5hbGJ1bS5waWNVcmwgKyAnKSc7XG4gICAgICB0aGlzLnBsYXlpbmdNdXNpYyA9IHRoaXMubXVzaWNBcnJheVtyYW5kb21faW5kZXhdLmlkO1xuICAgICAgdGhpcy5wbGF5aW5nSW5kZXggPSByYW5kb21faW5kZXg7XG4gICAgICB0aGlzLnNvbmdfbmFtZSA9IHRoaXMubXVzaWNBcnJheVtyYW5kb21faW5kZXhdLm5hbWU7XG4gICAgICB0aGlzLmFsYnVtX25hbWUgPSB0aGlzLm11c2ljQXJyYXlbcmFuZG9tX2luZGV4XS5hbGJ1bS5uYW1lO1xuICAgICAgdGhpcy5hcnRpc3RfbmFtZSA9IGFydGlzdHNfbmFtZTtcbiAgICAgIHZhciBtcDNfYWRkcmVzcyA9IHRoaXMubXVzaWNBcnJheVtyYW5kb21faW5kZXhdLm1wM1VybDtcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLnNldEF0dHJpYnV0ZShcInNyY1wiLCBtcDNfYWRkcmVzcyk7XG4gICAgICB0aGlzLiRlbHMubXBsYXllci52b2x1bWUgPSAwLjU7XG4gICAgICB0aGlzLiRlbHMubXBsYXllci5wbGF5KCk7XG4gICAgICB0aGlzLiRlbHMubXBsYXllci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2bS5zdGF0dXNUZXh0ID0gJ+e9keaYk0FQSeaKvemjjuS6hi4u5q2M5puy5peg5rOV6I635Y+W77yM56iN5ZCO6L+b5YWl5LiL5LiA6aaWJztcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZtLm5leHRNdXNpYygpO1xuICAgICAgICB9LCAzMDAwKTtcbiAgICAgIH07XG4gICAgICB0aGlzLnBsYXlTdGF0dXMgPSB0cnVlO1xuICAgIH0sXG4gICAgYmFja011c2ljOiBmdW5jdGlvbiBiYWNrTXVzaWMoKSB7XG4gICAgICBpZiAoIXRoaXMucHJldk11c2ljIHx8ICF0aGlzLnByZXZJbmRleCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXR1c1RleHQgPSAnJztcbiAgICAgIHRoaXMuZm9sbG93SW5kZXggPSB0aGlzLnBsYXlpbmdJbmRleDtcbiAgICAgIHRoaXMuZm9sbG93TXVzaWMgPSB0aGlzLnBsYXlpbmdNdXNpYztcbiAgICAgIHRoaXMuc2hvd2xyYyA9IFtdO1xuICAgICAgdGhpcy5nZXRKU09OKCdnZXRMeXJpY3MucGhwP2lkPScgKyB0aGlzLnByZXZNdXNpYykudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5scmMgIT0gXCJub1wiKSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IGRhdGEubHJjO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLnNob3dscmMgPSB7IFwiMFwiOiBcIuaaguaXoOatjOivjVwiIH07XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB2bS5zaG93bHJjID0geyBcIjBcIjogXCLmmoLml6DmrYzor41cIiB9O1xuICAgICAgfSk7XG4gICAgICB2YXIgYXJ0aXN0c19uYW1lID0gJyc7XG4gICAgICBmb3IgKHZhciBpIGluIHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0uYXJ0aXN0cykge1xuICAgICAgICBhcnRpc3RzX25hbWUgKz0gdGhpcy5tdXNpY0FycmF5W3RoaXMucHJldkluZGV4XS5hcnRpc3RzW2ldLm5hbWU7XG4gICAgICB9XG4gICAgICB0aGlzLiRlbHMuYWxidW0uc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgdGhpcy5tdXNpY0FycmF5W3RoaXMucHJldkluZGV4XS5hbGJ1bS5waWNVcmwgKyAnKSc7XG4gICAgICB0aGlzLnBsYXlpbmdNdXNpYyA9IHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0uaWQ7XG4gICAgICB0aGlzLnBsYXlpbmdJbmRleCA9IHRoaXMucHJldkluZGV4O1xuICAgICAgdGhpcy5zb25nX25hbWUgPSB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLm5hbWU7XG4gICAgICB0aGlzLmFsYnVtX25hbWUgPSB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLmFsYnVtLm5hbWU7XG4gICAgICB0aGlzLmFydGlzdF9uYW1lID0gYXJ0aXN0c19uYW1lO1xuICAgICAgdmFyIG1wM19hZGRyZXNzID0gdGhpcy5tdXNpY0FycmF5W3RoaXMucHJldkluZGV4XS5tcDNVcmw7XG4gICAgICB0aGlzLnByZXZNdXNpYyA9ICcnO1xuICAgICAgdGhpcy5wcmV2SW5kZXggPSAnJztcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLnNldEF0dHJpYnV0ZShcInNyY1wiLCBtcDNfYWRkcmVzcyk7XG4gICAgICB0aGlzLiRlbHMubXBsYXllci52b2x1bWUgPSAwLjU7XG4gICAgICB0aGlzLiRlbHMubXBsYXllci5wbGF5KCk7XG4gICAgICB0aGlzLiRlbHMubXBsYXllci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2bS5zdGF0dXNUZXh0ID0gJ+e9keaYk0FQSeaKvemjjuS6hi4u5q2M5puy5peg5rOV6I635Y+W77yM56iN5ZCO6L+b5YWl5LiL5LiA6aaWJztcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZtLm5leHRNdXNpYygpO1xuICAgICAgICB9LCAzMDAwKTtcbiAgICAgIH07XG4gICAgICB0aGlzLnBsYXlTdGF0dXMgPSB0cnVlO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogW2dldE11c2ljIGdldCBtdXNpYyB0aW1lXVxuICAgICAqL1xuICAgIGdldE11c2ljOiBmdW5jdGlvbiBnZXRNdXNpYygpIHtcbiAgICAgIHZhciBtX3NlY29uZCA9IHVuZGVmaW5lZCxcbiAgICAgICAgICBtX21pbnV0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIHZhciB0ZW1wX21pbnV0ZSA9IHBhcnNlSW50KHRoaXMuJGVscy5tcGxheWVyLmR1cmF0aW9uIC8gNjApO1xuICAgICAgaWYgKHRlbXBfbWludXRlLnRvU3RyaW5nKCkubGVuZ3RoID4gMSkge1xuICAgICAgICBtX21pbnV0ZSA9ICcnICsgdGVtcF9taW51dGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtX21pbnV0ZSA9ICcwJyArIHRlbXBfbWludXRlO1xuICAgICAgfVxuICAgICAgdmFyIHRlbXBfc2Vjb25kID0gcGFyc2VJbnQodGhpcy4kZWxzLm1wbGF5ZXIuZHVyYXRpb24gJSA2MCk7XG4gICAgICBpZiAodGVtcF9zZWNvbmQudG9TdHJpbmcoKS5sZW5ndGggPiAxKSB7XG4gICAgICAgIG1fc2Vjb25kID0gJycgKyB0ZW1wX3NlY29uZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1fc2Vjb25kID0gJzAnICsgdGVtcF9zZWNvbmQ7XG4gICAgICB9XG4gICAgICB0aGlzLm11c2ljdGltZSA9IG1fbWludXRlICsgJzonICsgbV9zZWNvbmQ7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBbcGxheUV2ZW50IHVwZGF0ZSB0aGUgcGxheWluZyBzdGF0dXModGltaW5nIOOAgWJ1ZmZlci4uKV1cbiAgICAgKi9cbiAgICBwbGF5RXZlbnQ6IGZ1bmN0aW9uIHBsYXlFdmVudCgpIHtcbiAgICAgIGlmICghdGhpcy5jaGVja1N0YXR1cygpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciBjX3NlY29uZCA9IHVuZGVmaW5lZCxcbiAgICAgICAgICBjX21pbnV0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIHZhciB0ZW1wX21pbnV0ZSA9IHBhcnNlSW50KHRoaXMuJGVscy5tcGxheWVyLmN1cnJlbnRUaW1lIC8gNjApO1xuICAgICAgaWYgKHRlbXBfbWludXRlLnRvU3RyaW5nKCkubGVuZ3RoID4gMSkge1xuICAgICAgICBjX21pbnV0ZSA9ICcnICsgdGVtcF9taW51dGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjX21pbnV0ZSA9ICcwJyArIHRlbXBfbWludXRlO1xuICAgICAgfVxuICAgICAgdmFyIHRlbXBfc2Vjb25kID0gcGFyc2VJbnQodGhpcy4kZWxzLm1wbGF5ZXIuY3VycmVudFRpbWUgJSA2MCk7XG4gICAgICBpZiAodGVtcF9zZWNvbmQudG9TdHJpbmcoKS5sZW5ndGggPiAxKSB7XG4gICAgICAgIGNfc2Vjb25kID0gJycgKyB0ZW1wX3NlY29uZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNfc2Vjb25kID0gJzAnICsgdGVtcF9zZWNvbmQ7XG4gICAgICB9XG4gICAgICB0aGlzLmN1cnRpbWUgPSBjX21pbnV0ZSArICc6JyArIGNfc2Vjb25kO1xuICAgICAgdmFyIHBsYXlfdGltZSA9IE1hdGguZmxvb3IodGhpcy4kZWxzLm1wbGF5ZXIuY3VycmVudFRpbWUpLnRvU3RyaW5nKCk7XG4gICAgICB0aGlzLmRpc3BsYXlfbHJjKHBsYXlfdGltZSk7XG4gICAgICB2YXIgYnVmZmVyX3BlcmNlbnQgPSB0aGlzLiRlbHMubXBsYXllci5idWZmZXJlZC5lbmQoMCkgLyB0aGlzLiRlbHMubXBsYXllci5kdXJhdGlvbjtcbiAgICAgIHZhciBjdXJyZW50X3BlcmNlbnQgPSB0aGlzLiRlbHMubXBsYXllci5jdXJyZW50VGltZSAvIHRoaXMuJGVscy5tcGxheWVyLmR1cmF0aW9uO1xuICAgICAgdGhpcy4kZWxzLmJ1ZmZlci5zdHlsZS50cmFuc2Zvcm0gPSBcInNjYWxlWChcIiArIGJ1ZmZlcl9wZXJjZW50ICsgXCIpXCI7XG4gICAgICB0aGlzLiRlbHMucGxheXRpbWUuc3R5bGUudHJhbnNmb3JtID0gXCJzY2FsZVgoXCIgKyBjdXJyZW50X3BlcmNlbnQgKyBcIilcIjtcbiAgICB9LFxuICAgIGNoYW5nZVByb2dyZXNzOiBmdW5jdGlvbiBjaGFuZ2VQcm9ncmVzcyhldmVudCkge1xuICAgICAgaWYgKCF0aGlzLmNoZWNrU3RhdHVzKCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIHByb2dyZXNzWCA9IGV2ZW50LmNsaWVudFggLSB0aGlzLiRlbHMucHJvZ3Jlc3MuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLmN1cnJlbnRUaW1lID0gcGFyc2VJbnQocHJvZ3Jlc3NYIC8gMjQwICogdGhpcy4kZWxzLm1wbGF5ZXIuZHVyYXRpb24pO1xuICAgIH0sXG4gICAgZGlzcGxheV9scmM6IGZ1bmN0aW9uIGRpc3BsYXlfbHJjKHBsYXlfdGltZSkge1xuICAgICAgaWYgKCF0aGlzLmNoZWNrU3RhdHVzKCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdmFyIGxyY3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdscmMnKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbHJjcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaSArIDEgPCBscmNzLmxlbmd0aCkge1xuICAgICAgICAgIGlmIChscmNzW2ldLmdldEF0dHJpYnV0ZSgnZHRpbWUnKSA8PSB0aGlzLiRlbHMubXBsYXllci5jdXJyZW50VGltZSAmJiB0aGlzLiRlbHMubXBsYXllci5jdXJyZW50VGltZSA8IGxyY3NbaSArIDFdLmdldEF0dHJpYnV0ZSgnZHRpbWUnKSkge1xuICAgICAgICAgICAgaWYgKGxyY3NbaV0uY2xhc3NMaXN0KSB7XG4gICAgICAgICAgICAgIGxyY3NbaV0uY2xhc3NMaXN0LmFkZCgnbHJjLWN1cnJlbnQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxyY3NbaV0uY2xhc3NOYW1lICs9ICcgJyArICdscmMtY3VycmVudCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobHJjc1tpXS5vZmZzZXRUb3AgPiAyMDApIHtcbiAgICAgICAgICAgICAgdGhpcy4kZWxzLmx5cmljYm94LnNjcm9sbFRvcCA9IGxyY3NbaV0ub2Zmc2V0VG9wIC0gMjAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAobHJjc1tpXS5jbGFzc0xpc3QpIHtcbiAgICAgICAgICAgICAgbHJjc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdscmMtY3VycmVudCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbHJjc1tpXS5jbGFzc05hbWUgPSBscmNzW2ldLmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoJyhefFxcXFxiKScgKyAnbHJjLWN1cnJlbnQnLnNwbGl0KCcgJykuam9pbignfCcpICsgJyhcXFxcYnwkKScsICdnaScpLCAnICcpOyAvL2llOFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGxyY3NbbHJjcy5sZW5ndGggLSAxXS5nZXRBdHRyaWJ1dGUoJ2R0aW1lJykgPD0gdGhpcy4kZWxzLm1wbGF5ZXIuY3VycmVudFRpbWUpIHtcbiAgICAgICAgaWYgKGxyY3NbbHJjcy5sZW5ndGggLSAxXS5jbGFzc0xpc3QpIHtcbiAgICAgICAgICBscmNzW2xyY3MubGVuZ3RoIC0gMV0uY2xhc3NMaXN0LmFkZCgnbHJjLWN1cnJlbnQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBscmNzW2xyY3MubGVuZ3RoIC0gMV0uY2xhc3NOYW1lICs9ICcgJyArICdscmMtY3VycmVudCc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
