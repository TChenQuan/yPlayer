"use strict";Vue.config.debug=!0;var vm=new Vue({el:"#ym-player",data:{song_name:"",album_name:"",artist_name:"",showlrc:[],musicArray:"",playingMusic:"",playingIndex:"",havevoice:!0,playStatus:!0,prevIndex:"",prevMusic:"",followIndex:"",followMusic:"",curtime:"00:00",musictime:"00:00",playingtime:0},created:function(){this.loadMusic()},methods:{getJSON:function(t){var s=new Promise(function(s,i){function e(){4===this.readyState&&(200===this.status?s(this.response):i(new Error(this.statusText)))}var r=new XMLHttpRequest;r.open("GET",t),r.onreadystatechange=e,r.responseType="json",r.setRequestHeader("Accept","application/json"),r.send()});return s},changePlay:function(){0==this.playStatus?(this.playStatus=!0,this.$els.mplayer.play()):(this.playStatus=!1,this.$els.mplayer.pause())},loadMusic:function(t){var s=t?"getSong.php?id="+t:"getSong.php?id=0";this.getJSON(s).then(function(t){vm.musicArray=t.tracks,vm.musicLength=vm.musicArray.length,vm.$els.album.style.backgroundImage="url("+t.cover+")","no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"},vm.song_name=t.music_name,vm.album_name=t.album_name,vm.artist_name=t.artists,vm.playingMusic=t.id,vm.playingIndex=t.index,vm.$els.mplayer.setAttribute("src",t.mp3),vm.$els.mplayer.volumn=.5,vm.$els.mplayer.play()},function(t){alert("服务器通信异常")})},changeVoice:function(t){this.$els.mplayer.volume=t.target.value/10,0==t.target.value?this.havevoice=!1:this.havevoice=!0},nextMusic:function(){var t,s;this.followMusic&&this.followIndex?(t=this.followIndex,s=this.followMusic):(t=Math.ceil(Math.random()*this.musicLength),s=this.musicArray[t].id),this.followIndex="",this.followMusic="",this.prevMusic=this.playingMusic,this.prevIndex=this.playingIndex,this.showlrc=[],this.getJSON("getLyrics.php?id="+s).then(function(t){"no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"}},function(t){alert("服务器通信异常")});var i="";for(var e in this.musicArray[t].artists)i+=this.musicArray[t].artists[e].name;this.$els.album.style.backgroundImage="url("+this.musicArray[t].album.picUrl+")",this.playingMusic=this.musicArray[t].id,this.playingIndex=t,this.song_name=this.musicArray[t].name,this.album_name=this.musicArray[t].album.name,this.artist_name=i;var r=this.musicArray[t].mp3Url;this.$els.mplayer.setAttribute("src",r),this.$els.mplayer.volumn=.5,this.$els.mplayer.play(),this.playStatus=!0},backMusic:function(){if(!this.prevMusic||!this.prevIndex)return!1;this.followIndex=this.playingIndex,this.followMusic=this.playingMusic,this.showlrc=[],this.getJSON("getLyrics.php?id="+this.prevMusic).then(function(t){"no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"}},function(t){alert("服务器通信异常")});var t="";for(var s in this.musicArray[this.prevIndex].artists)t+=this.musicArray[this.prevIndex].artists[s].name;this.$els.album.style.backgroundImage="url("+this.musicArray[this.prevIndex].album.picUrl+")",this.playingMusic=this.musicArray[this.prevIndex].id,this.playingIndex=this.prevIndex,this.song_name=this.musicArray[this.prevIndex].name,this.album_name=this.musicArray[this.prevIndex].album.name,this.artist_name=t;var i=this.musicArray[this.prevIndex].mp3Url;this.prevMusic="",this.prevIndex="",this.$els.mplayer.setAttribute("src",i),this.$els.mplayer.volumn=.5,this.$els.mplayer.play(),this.playStatus=!0},getMusic:function(){var t=void 0,s=void 0,i=parseInt(this.$els.mplayer.duration/60);s=i.toString().length>1?""+i:"0"+i;var e=parseInt(this.$els.mplayer.duration%60);t=e.toString().length>1?""+e:"0"+e,this.musictime=s+":"+t},playEvent:function(){var t=void 0,s=void 0,i=parseInt(this.$els.mplayer.currentTime/60);s=i.toString().length>1?""+i:"0"+i;var e=parseInt(this.$els.mplayer.currentTime%60);t=e.toString().length>1?""+e:"0"+e,this.curtime=s+":"+t;var r=Math.floor(this.$els.mplayer.currentTime).toString();this.display_lrc(r)},display_lrc:function(t){for(var s=document.getElementsByClassName("lrc"),i=0;i<s.length;i++);}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYXllci5qcyJdLCJuYW1lcyI6WyJWdWUiLCJjb25maWciLCJkZWJ1ZyIsInZtIiwiZWwiLCJkYXRhIiwic29uZ19uYW1lIiwiYWxidW1fbmFtZSIsImFydGlzdF9uYW1lIiwic2hvd2xyYyIsIm11c2ljQXJyYXkiLCJwbGF5aW5nTXVzaWMiLCJwbGF5aW5nSW5kZXgiLCJoYXZldm9pY2UiLCJwbGF5U3RhdHVzIiwicHJldkluZGV4IiwicHJldk11c2ljIiwiZm9sbG93SW5kZXgiLCJmb2xsb3dNdXNpYyIsImN1cnRpbWUiLCJtdXNpY3RpbWUiLCJwbGF5aW5ndGltZSIsImNyZWF0ZWQiLCJ0aGlzIiwibG9hZE11c2ljIiwibWV0aG9kcyIsImdldEpTT04iLCJ1cmwiLCJwcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJoYW5kbGVyIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3BvbnNlIiwiRXJyb3IiLCJzdGF0dXNUZXh0IiwiY2xpZW50IiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVzcG9uc2VUeXBlIiwic2V0UmVxdWVzdEhlYWRlciIsInNlbmQiLCJjaGFuZ2VQbGF5IiwiJGVscyIsIm1wbGF5ZXIiLCJwbGF5IiwicGF1c2UiLCJpZCIsInRoZW4iLCJ0cmFja3MiLCJtdXNpY0xlbmd0aCIsImxlbmd0aCIsImFsYnVtIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJjb3ZlciIsImxyYyIsIjAiLCJtdXNpY19uYW1lIiwiYXJ0aXN0cyIsImluZGV4Iiwic2V0QXR0cmlidXRlIiwibXAzIiwidm9sdW1uIiwiZXJyb3IiLCJhbGVydCIsImNoYW5nZVZvaWNlIiwiZXZlbnQiLCJ2b2x1bWUiLCJ0YXJnZXQiLCJ2YWx1ZSIsIm5leHRNdXNpYyIsInJhbmRvbV9pbmRleCIsInJhbmRvbV9pZCIsIk1hdGgiLCJjZWlsIiwicmFuZG9tIiwiYXJ0aXN0c19uYW1lIiwiaSIsIm5hbWUiLCJwaWNVcmwiLCJtcDNfYWRkcmVzcyIsIm1wM1VybCIsImJhY2tNdXNpYyIsImdldE11c2ljIiwibV9zZWNvbmQiLCJ1bmRlZmluZWQiLCJtX21pbnV0ZSIsInRlbXBfbWludXRlIiwicGFyc2VJbnQiLCJkdXJhdGlvbiIsInRvU3RyaW5nIiwidGVtcF9zZWNvbmQiLCJwbGF5RXZlbnQiLCJjX3NlY29uZCIsImNfbWludXRlIiwiY3VycmVudFRpbWUiLCJwbGF5X3RpbWUiLCJmbG9vciIsImRpc3BsYXlfbHJjIiwibHJjcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSJdLCJtYXBwaW5ncyI6IkFBSUEsWUFFQUEsS0FBSUMsT0FBT0MsT0FBUSxDQUNuQixJQUFJQyxJQUFLLEdBQUlILE1BQ1hJLEdBQUksYUFDSkMsTUFDRUMsVUFBVyxHQUNYQyxXQUFZLEdBQ1pDLFlBQWEsR0FDYkMsV0FDQUMsV0FBWSxHQUNaQyxhQUFjLEdBQ2RDLGFBQWMsR0FDZEMsV0FBVyxFQUNYQyxZQUFZLEVBQ1pDLFVBQVcsR0FDWEMsVUFBVyxHQUNYQyxZQUFhLEdBQ2JDLFlBQWEsR0FDYkMsUUFBUyxRQUNUQyxVQUFXLFFBQ1hDLFlBQWEsR0FFZkMsUUFBUyxXQUNQQyxLQUFLQyxhQUVQQyxTQUNFQyxRQUFTLFNBQWlCQyxHQUN4QixHQUFJQyxHQUFVLEdBQUlDLFNBQVEsU0FBVUMsRUFBU0MsR0FNN0IsUUFBU0MsS0FDRyxJQUFwQlQsS0FBS1UsYUFFWSxNQUFoQlYsS0FBS1csT0FDUkosRUFBUVAsS0FBS1ksVUFFYkosRUFBTyxHQUFJSyxPQUFNYixLQUFLYyxjQVgxQixHQUFJQyxHQUFTLEdBQUlDLGVBQ2pCRCxHQUFPRSxLQUFLLE1BQU9iLEdBQ25CVyxFQUFPRyxtQkFBcUJULEVBQzVCTSxFQUFPSSxhQUFlLE9BQ3RCSixFQUFPSyxpQkFBaUIsU0FBVSxvQkFDbENMLEVBQU9NLFFBVVQsT0FBT2hCLElBRVRpQixXQUFZLFdBQ2EsR0FBbkJ0QixLQUFLVCxZQUNQUyxLQUFLVCxZQUFhLEVBQ2xCUyxL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S0FBS3VCLEtBQUtDLFFBQVE4QyxTQUFXLEdBRXRETCxHQURFTyxFQUFZRCxXQUFXeEMsT0FBUyxFQUN2QixHQUFLeUMsRUFFTCxJQUFNQSxFQUVuQnhFLEtBQUtILFVBQVlzRSxFQUFXLElBQU1GLEdBRXBDUSxVQUFXLFdBQ1QsR0FBSUMsR0FBV1IsT0FDWFMsRUFBV1QsT0FDWEUsRUFBY0MsU0FBU3JFLEtBQUt1QixLQUFLQyxRQUFRb0QsWUFBYyxHQUV6REQsR0FERVAsRUFBWUcsV0FBV3hDLE9BQVMsRUFDdkIsR0FBS3FDLEVBRUwsSUFBTUEsQ0FFbkIsSUFBSUksR0FBY0gsU0FBU3JFLEtBQUt1QixLQUFLQyxRQUFRb0QsWUFBYyxHQUV6REYsR0FERUYsRUFBWUQsV0FBV3hDLE9BQVMsRUFDdkIsR0FBS3lDLEVBRUwsSUFBTUEsRUFFbkJ4RSxLQUFLSixRQUFVK0UsRUFBVyxJQUFNRCxDQUNoQyxJQUFJRyxHQUFZdkIsS0FBS3dCLE1BQU05RSxLQUFLdUIsS0FBS0MsUUFBUW9ELGFBQWFMLFVBQzFEdkUsTUFBSytFLFlBQVlGLElBRW5CRSxZQUFhLFNBQXFCRixHQUVoQyxJQUFLLEdBRERHLEdBQU9DLFNBQVNDLHVCQUF1QixPQUNsQ3hCLEVBQUksRUFBR0EsRUFBSXNCLEVBQUtqRCxPQUFRMkIiLCJmaWxlIjoicGxheWVyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4qIHlQbGF5ZXJcbiogQXV0aG9yIHlhbmd6ajE5OTJcbiovXG5cInVzZSBzdHJpY3RcIjtcblxuVnVlLmNvbmZpZy5kZWJ1ZyA9IHRydWU7XG52YXIgdm0gPSBuZXcgVnVlKHtcbiAgZWw6ICcjeW0tcGxheWVyJyxcbiAgZGF0YToge1xuICAgIHNvbmdfbmFtZTogJycsXG4gICAgYWxidW1fbmFtZTogJycsXG4gICAgYXJ0aXN0X25hbWU6ICcnLFxuICAgIHNob3dscmM6IFtdLFxuICAgIG11c2ljQXJyYXk6ICcnLFxuICAgIHBsYXlpbmdNdXNpYzogJycsXG4gICAgcGxheWluZ0luZGV4OiAnJyxcbiAgICBoYXZldm9pY2U6IHRydWUsXG4gICAgcGxheVN0YXR1czogdHJ1ZSxcbiAgICBwcmV2SW5kZXg6ICcnLFxuICAgIHByZXZNdXNpYzogJycsXG4gICAgZm9sbG93SW5kZXg6ICcnLFxuICAgIGZvbGxvd011c2ljOiAnJyxcbiAgICBjdXJ0aW1lOiAnMDA6MDAnLFxuICAgIG11c2ljdGltZTogJzAwOjAwJyxcbiAgICBwbGF5aW5ndGltZTogMFxuICB9LFxuICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge1xuICAgIHRoaXMubG9hZE11c2ljKCk7XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBnZXRKU09OOiBmdW5jdGlvbiBnZXRKU09OKHVybCkge1xuICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciBjbGllbnQgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgY2xpZW50Lm9wZW4oXCJHRVRcIiwgdXJsKTtcbiAgICAgICAgY2xpZW50Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7XG4gICAgICAgIGNsaWVudC5yZXNwb25zZVR5cGUgPSBcImpzb25cIjtcbiAgICAgICAgY2xpZW50LnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgICBjbGllbnQuc2VuZCgpO2Z1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSAhPT0gNCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1pZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcih0aGlzLnN0YXR1c1RleHQpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH0sXG4gICAgY2hhbmdlUGxheTogZnVuY3Rpb24gY2hhbmdlUGxheSgpIHtcbiAgICAgIGlmICh0aGlzLnBsYXlTdGF0dXMgPT0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5wbGF5U3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIucGxheSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wbGF5U3RhdHVzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuJGVscy5tcGxheWVyLnBhdXNlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBsb2FkTXVzaWM6IGZ1bmN0aW9uIGxvYWRNdXNpYyhpZCkge1xuICAgICAgdmFyIHVybCA9IGlkID8gJ2dldFNvbmcucGhwP2lkPScgKyBpZCA6ICdnZXRTb25nLnBocD9pZD0wJztcbiAgICAgIHRoaXMuZ2V0SlNPTih1cmwpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdm0ubXVzaWNBcnJheSA9IGRhdGEudHJhY2tzO1xuICAgICAgICB2bS5tdXNpY0xlbmd0aCA9IHZtLm11c2ljQXJyYXkubGVuZ3RoO1xuICAgICAgICB2bS4kZWxzLmFsYnVtLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIGRhdGEuY292ZXIgKyAnKSc7XG4gICAgICAgIGlmIChkYXRhLmxyYyAhPSBcIm5vXCIpIHtcbiAgICAgICAgICB2bS5zaG93bHJjID0gZGF0YS5scmM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IHsgXCIwXCI6IFwi5pqC5peg5q2M6K+NXCIgfTtcbiAgICAgICAgfVxuICAgICAgICB2bS5zb25nX25hbWUgPSBkYXRhLm11c2ljX25hbWU7XG4gICAgICAgIHZtLmFsYnVtX25hbWUgPSBkYXRhLmFsYnVtX25hbWU7XG4gICAgICAgIHZtLmFydGlzdF9uYW1lID0gZGF0YS5hcnRpc3RzO1xuICAgICAgICB2bS5wbGF5aW5nTXVzaWMgPSBkYXRhLmlkO1xuICAgICAgICB2bS5wbGF5aW5nSW5kZXggPSBkYXRhLmluZGV4O1xuICAgICAgICB2bS4kZWxzLm1wbGF5ZXIuc2V0QXR0cmlidXRlKFwic3JjXCIsIGRhdGEubXAzKTtcbiAgICAgICAgdm0uJGVscy5tcGxheWVyLnZvbHVtbiA9IDAuNTtcbiAgICAgICAgdm0uJGVscy5tcGxheWVyLnBsYXkoKTtcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBhbGVydCgn5pyN5Yqh5Zmo6YCa5L+h5byC5bi4Jyk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGNoYW5nZVZvaWNlOiBmdW5jdGlvbiBjaGFuZ2VWb2ljZShldmVudCkge1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIudm9sdW1lID0gZXZlbnQudGFyZ2V0LnZhbHVlIC8gMTA7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlID09IDApIHtcbiAgICAgICAgdGhpcy5oYXZldm9pY2UgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGF2ZXZvaWNlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIG5leHRNdXNpYzogZnVuY3Rpb24gbmV4dE11c2ljKCkge1xuICAgICAgdmFyIHJhbmRvbV9pbmRleDtcbiAgICAgIHZhciByYW5kb21faWQ7XG4gICAgICBpZiAoIXRoaXMuZm9sbG93TXVzaWMgfHwgIXRoaXMuZm9sbG93SW5kZXgpIHtcbiAgICAgICAgcmFuZG9tX2luZGV4ID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiB0aGlzLm11c2ljTGVuZ3RoKTtcbiAgICAgICAgcmFuZG9tX2lkID0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uaWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByYW5kb21faW5kZXggPSB0aGlzLmZvbGxvd0luZGV4O1xuICAgICAgICByYW5kb21faWQgPSB0aGlzLmZvbGxvd011c2ljO1xuICAgICAgfVxuICAgICAgdGhpcy5mb2xsb3dJbmRleCA9ICcnO1xuICAgICAgdGhpcy5mb2xsb3dNdXNpYyA9ICcnO1xuICAgICAgdGhpcy5wcmV2TXVzaWMgPSB0aGlzLnBsYXlpbmdNdXNpYztcbiAgICAgIHRoaXMucHJldkluZGV4ID0gdGhpcy5wbGF5aW5nSW5kZXg7XG4gICAgICB0aGlzLnNob3dscmMgPSBbXTtcbiAgICAgIHRoaXMuZ2V0SlNPTignZ2V0THlyaWNzLnBocD9pZD0nICsgcmFuZG9tX2lkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGlmIChkYXRhLmxyYyAhPSBcIm5vXCIpIHtcbiAgICAgICAgICB2bS5zaG93bHJjID0gZGF0YS5scmM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IHsgXCIwXCI6IFwi5pqC5peg5q2M6K+NXCIgfTtcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGFsZXJ0KCfmnI3liqHlmajpgJrkv6HlvILluLgnKTtcbiAgICAgIH0pO1xuICAgICAgdmFyIGFydGlzdHNfbmFtZSA9ICcnO1xuICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLm11c2ljQXJyYXlbcmFuZG9tX2luZGV4XS5hcnRpc3RzKSB7XG4gICAgICAgIGFydGlzdHNfbmFtZSArPSB0aGlzLm11c2ljQXJyYXlbcmFuZG9tX2luZGV4XS5hcnRpc3RzW2ldLm5hbWU7XG4gICAgICB9XG4gICAgICB0aGlzLiRlbHMuYWxidW0uc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uYWxidW0ucGljVXJsICsgJyknO1xuICAgICAgdGhpcy5wbGF5aW5nTXVzaWMgPSB0aGlzLm11c2ljQXJyYXlbcmFuZG9tX2luZGV4XS5pZDtcbiAgICAgIHRoaXMucGxheWluZ0luZGV4ID0gcmFuZG9tX2luZGV4O1xuICAgICAgdGhpcy5zb25nX25hbWUgPSB0aGlzLm11c2ljQXJyYXlbcmFuZG9tX2luZGV4XS5uYW1lO1xuICAgICAgdGhpcy5hbGJ1bV9uYW1lID0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uYWxidW0ubmFtZTtcbiAgICAgIHRoaXMuYXJ0aXN0X25hbWUgPSBhcnRpc3RzX25hbWU7XG4gICAgICB2YXIgbXAzX2FkZHJlc3MgPSB0aGlzLm11c2ljQXJyYXlbcmFuZG9tX2luZGV4XS5tcDNVcmw7XG4gICAgICB0aGlzLiRlbHMubXBsYXllci5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbXAzX2FkZHJlc3MpO1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIudm9sdW1uID0gMC41O1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIucGxheSgpO1xuICAgICAgdGhpcy5wbGF5U3RhdHVzID0gdHJ1ZTtcbiAgICB9LFxuICAgIGJhY2tNdXNpYzogZnVuY3Rpb24gYmFja011c2ljKCkge1xuICAgICAgaWYgKCF0aGlzLnByZXZNdXNpYyB8fCAhdGhpcy5wcmV2SW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdGhpcy5mb2xsb3dJbmRleCA9IHRoaXMucGxheWluZ0luZGV4O1xuICAgICAgdGhpcy5mb2xsb3dNdXNpYyA9IHRoaXMucGxheWluZ011c2ljO1xuICAgICAgdGhpcy5zaG93bHJjID0gW107XG4gICAgICB0aGlzLmdldEpTT04oJ2dldEx5cmljcy5waHA/aWQ9JyArIHRoaXMucHJldk11c2ljKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGlmIChkYXRhLmxyYyAhPSBcIm5vXCIpIHtcbiAgICAgICAgICB2bS5zaG93bHJjID0gZGF0YS5scmM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IHsgXCIwXCI6IFwi5pqC5peg5q2M6K+NXCIgfTtcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGFsZXJ0KCfmnI3liqHlmajpgJrkv6HlvILluLgnKTtcbiAgICAgIH0pO1xuICAgICAgdmFyIGFydGlzdHNfbmFtZSA9ICcnO1xuICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLmFydGlzdHMpIHtcbiAgICAgICAgYXJ0aXN0c19uYW1lICs9IHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0uYXJ0aXN0c1tpXS5uYW1lO1xuICAgICAgfVxuICAgICAgdGhpcy4kZWxzLmFsYnVtLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0uYWxidW0ucGljVXJsICsgJyknO1xuICAgICAgdGhpcy5wbGF5aW5nTXVzaWMgPSB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLmlkO1xuICAgICAgdGhpcy5wbGF5aW5nSW5kZXggPSB0aGlzLnByZXZJbmRleDtcbiAgICAgIHRoaXMuc29uZ19uYW1lID0gdGhpcy5tdXNpY0FycmF5W3RoaXMucHJldkluZGV4XS5uYW1lO1xuICAgICAgdGhpcy5hbGJ1bV9uYW1lID0gdGhpcy5tdXNpY0FycmF5W3RoaXMucHJldkluZGV4XS5hbGJ1bS5uYW1lO1xuICAgICAgdGhpcy5hcnRpc3RfbmFtZSA9IGFydGlzdHNfbmFtZTtcbiAgICAgIHZhciBtcDNfYWRkcmVzcyA9IHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0ubXAzVXJsO1xuICAgICAgdGhpcy5wcmV2TXVzaWMgPSAnJztcbiAgICAgIHRoaXMucHJldkluZGV4ID0gJyc7XG4gICAgICB0aGlzLiRlbHMubXBsYXllci5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbXAzX2FkZHJlc3MpO1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIudm9sdW1uID0gMC41O1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIucGxheSgpO1xuICAgICAgdGhpcy5wbGF5U3RhdHVzID0gdHJ1ZTtcbiAgICB9LFxuICAgIGdldE11c2ljOiBmdW5jdGlvbiBnZXRNdXNpYygpIHtcbiAgICAgIHZhciBtX3NlY29uZCA9IHVuZGVmaW5lZCxcbiAgICAgICAgICBtX21pbnV0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIHZhciB0ZW1wX21pbnV0ZSA9IHBhcnNlSW50KHRoaXMuJGVscy5tcGxheWVyLmR1cmF0aW9uIC8gNjApO1xuICAgICAgaWYgKHRlbXBfbWludXRlLnRvU3RyaW5nKCkubGVuZ3RoID4gMSkge1xuICAgICAgICBtX21pbnV0ZSA9ICcnICsgdGVtcF9taW51dGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtX21pbnV0ZSA9ICcwJyArIHRlbXBfbWludXRlO1xuICAgICAgfVxuICAgICAgdmFyIHRlbXBfc2Vjb25kID0gcGFyc2VJbnQodGhpcy4kZWxzLm1wbGF5ZXIuZHVyYXRpb24gJSA2MCk7XG4gICAgICBpZiAodGVtcF9zZWNvbmQudG9TdHJpbmcoKS5sZW5ndGggPiAxKSB7XG4gICAgICAgIG1fc2Vjb25kID0gJycgKyB0ZW1wX3NlY29uZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1fc2Vjb25kID0gJzAnICsgdGVtcF9zZWNvbmQ7XG4gICAgICB9XG4gICAgICB0aGlzLm11c2ljdGltZSA9IG1fbWludXRlICsgJzonICsgbV9zZWNvbmQ7XG4gICAgfSxcbiAgICBwbGF5RXZlbnQ6IGZ1bmN0aW9uIHBsYXlFdmVudCgpIHtcbiAgICAgIHZhciBjX3NlY29uZCA9IHVuZGVmaW5lZCxcbiAgICAgICAgICBjX21pbnV0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIHZhciB0ZW1wX21pbnV0ZSA9IHBhcnNlSW50KHRoaXMuJGVscy5tcGxheWVyLmN1cnJlbnRUaW1lIC8gNjApO1xuICAgICAgaWYgKHRlbXBfbWludXRlLnRvU3RyaW5nKCkubGVuZ3RoID4gMSkge1xuICAgICAgICBjX21pbnV0ZSA9ICcnICsgdGVtcF9taW51dGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjX21pbnV0ZSA9ICcwJyArIHRlbXBfbWludXRlO1xuICAgICAgfVxuICAgICAgdmFyIHRlbXBfc2Vjb25kID0gcGFyc2VJbnQodGhpcy4kZWxzLm1wbGF5ZXIuY3VycmVudFRpbWUgJSA2MCk7XG4gICAgICBpZiAodGVtcF9zZWNvbmQudG9TdHJpbmcoKS5sZW5ndGggPiAxKSB7XG4gICAgICAgIGNfc2Vjb25kID0gJycgKyB0ZW1wX3NlY29uZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNfc2Vjb25kID0gJzAnICsgdGVtcF9zZWNvbmQ7XG4gICAgICB9XG4gICAgICB0aGlzLmN1cnRpbWUgPSBjX21pbnV0ZSArICc6JyArIGNfc2Vjb25kO1xuICAgICAgdmFyIHBsYXlfdGltZSA9IE1hdGguZmxvb3IodGhpcy4kZWxzLm1wbGF5ZXIuY3VycmVudFRpbWUpLnRvU3RyaW5nKCk7XG4gICAgICB0aGlzLmRpc3BsYXlfbHJjKHBsYXlfdGltZSk7XG4gICAgfSxcbiAgICBkaXNwbGF5X2xyYzogZnVuY3Rpb24gZGlzcGxheV9scmMocGxheV90aW1lKSB7XG4gICAgICB2YXIgbHJjcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2xyYycpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBscmNzLmxlbmd0aDsgaSsrKSB7fVxuICAgIH1cbiAgfVxufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
