"use strict";var vm=new Vue({el:"#ym-player",data:{song_name:"",album_name:"",artist_name:"",showlrc:[],musicArray:"",playingMusic:"",playingIndex:"",havevoice:!0,playStatus:!0,prevIndex:"",prevMusic:"",followIndex:"",followMusic:"",ontime:!1},created:function(){this.loadMusic()},methods:{getJSON:function(s){var t=new Promise(function(t,i){function e(){4===this.readyState&&(200===this.status?t(this.response):i(new Error(this.statusText)))}var a=new XMLHttpRequest;a.open("GET",s),a.onreadystatechange=e,a.responseType="json",a.setRequestHeader("Accept","application/json"),a.send()});return t},changePlay:function(){0==this.playStatus?(this.playStatus=!0,this.$els.mplayer.play()):(this.playStatus=!1,this.$els.mplayer.pause())},loadMusic:function(s){var t=s?"getSong.php?id="+s:"getSong.php?id=0";this.getJSON(t).then(function(s){vm.musicArray=s.tracks,vm.musicLength=vm.musicArray.length,vm.$els.album.style.backgroundImage="url("+s.cover+")","no"!=s.lrc?vm.showlrc=s.lrc:vm.showlrc={0:"暂无歌词"},vm.song_name=s.music_name,vm.album_name=s.album_name,vm.artist_name=s.artists,vm.playingMusic=s.id,vm.playingIndex=s.index,vm.$els.mplayer.setAttribute("src",s.mp3),vm.$els.mplayer.volumn=.5,vm.$els.mplayer.play()},function(s){alert("服务器通信异常")})},changeVoice:function(s){this.$els.mplayer.volume=s.target.value/10,0==s.target.value?this.havevoice=!1:this.havevoice=!0},nextMusic:function(){var s,t;this.followMusic&&this.followIndex?(s=this.followIndex,t=this.followMusic):(s=Math.ceil(Math.random()*this.musicLength),t=this.musicArray[s].id),this.followIndex="",this.followMusic="",this.prevMusic=this.playingMusic,this.prevIndex=this.playingIndex,this.showlrc=[],this.getJSON("getLyrics.php?id="+t).then(function(s){"no"!=s.lrc?vm.showlrc=s.lrc:vm.showlrc={0:"暂无歌词"}},function(s){alert("服务器通信异常")});var i="";for(var e in this.musicArray[s].artists)i+=this.musicArray[s].artists[e].name;this.$els.album.style.backgroundImage="url("+this.musicArray[s].album.picUrl+")",this.playingMusic=this.musicArray[s].id,this.playingIndex=s,this.song_name=this.musicArray[s].name,this.album_name=this.musicArray[s].album.name,this.artist_name=i;var a=this.musicArray[s].mp3Url;this.$els.mplayer.setAttribute("src",a),this.$els.mplayer.volumn=.5,this.$els.mplayer.play(),this.playStatus=!0},backMusic:function(){if(!this.prevMusic||!this.prevIndex)return!1;this.followIndex=this.playingIndex,this.followMusic=this.playingMusic,this.showlrc=[],this.getJSON("getLyrics.php?id="+this.prevMusic).then(function(s){"no"!=s.lrc?vm.showlrc=s.lrc:vm.showlrc={0:"暂无歌词"}},function(s){alert("服务器通信异常")});var s="";for(var t in this.musicArray[this.prevIndex].artists)s+=this.musicArray[this.prevIndex].artists[t].name;this.$els.album.style.backgroundImage="url("+this.musicArray[this.prevIndex].album.picUrl+")",this.playingMusic=this.musicArray[this.prevIndex].id,this.playingIndex=this.prevIndex,this.song_name=this.musicArray[this.prevIndex].name,this.album_name=this.musicArray[this.prevIndex].album.name,this.artist_name=s;var i=this.musicArray[this.prevIndex].mp3Url;this.prevMusic="",this.prevIndex="",this.$els.mplayer.setAttribute("src",i),this.$els.mplayer.volumn=.5,this.$els.mplayer.play(),this.playStatus=!0},display_lrc:function(){play_time=Math.floor(this.$els.mplayer.currentTime).toString(),this.ontime=!0}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYXllci5qcyJdLCJuYW1lcyI6WyJ2bSIsIlZ1ZSIsImVsIiwiZGF0YSIsInNvbmdfbmFtZSIsImFsYnVtX25hbWUiLCJhcnRpc3RfbmFtZSIsInNob3dscmMiLCJtdXNpY0FycmF5IiwicGxheWluZ011c2ljIiwicGxheWluZ0luZGV4IiwiaGF2ZXZvaWNlIiwicGxheVN0YXR1cyIsInByZXZJbmRleCIsInByZXZNdXNpYyIsImZvbGxvd0luZGV4IiwiZm9sbG93TXVzaWMiLCJvbnRpbWUiLCJjcmVhdGVkIiwidGhpcyIsImxvYWRNdXNpYyIsIm1ldGhvZHMiLCJnZXRKU09OIiwidXJsIiwicHJvbWlzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiaGFuZGxlciIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJyZXNwb25zZSIsIkVycm9yIiwic3RhdHVzVGV4dCIsImNsaWVudCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlc3BvbnNlVHlwZSIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwiY2hhbmdlUGxheSIsIiRlbHMiLCJtcGxheWVyIiwicGxheSIsInBhdXNlIiwiaWQiLCJ0aGVuIiwidHJhY2tzIiwibXVzaWNMZW5ndGgiLCJsZW5ndGgiLCJhbGJ1bSIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiY292ZXIiLCJscmMiLCIwIiwibXVzaWNfbmFtZSIsImFydGlzdHMiLCJpbmRleCIsInNldEF0dHJpYnV0ZSIsIm1wMyIsInZvbHVtbiIsImVycm9yIiwiYWxlcnQiLCJjaGFuZ2VWb2ljZSIsImV2ZW50Iiwidm9sdW1lIiwidGFyZ2V0IiwidmFsdWUiLCJuZXh0TXVzaWMiLCJyYW5kb21faW5kZXgiLCJyYW5kb21faWQiLCJNYXRoIiwiY2VpbCIsInJhbmRvbSIsImFydGlzdHNfbmFtZSIsImkiLCJuYW1lIiwicGljVXJsIiwibXAzX2FkZHJlc3MiLCJtcDNVcmwiLCJiYWNrTXVzaWMiLCJk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LE1BQUt1QixLQUFLUyxNQUFNQyxNQUFNQyxnQkFBa0IsT0FBU2xDLEtBQUtYLFdBQVdXLEtBQUtOLFdBQVdzQyxNQUFNNEIsT0FBUyxJQUNoRzVELEtBQUtWLGFBQWVVLEtBQUtYLFdBQVdXLEtBQUtOLFdBQVdpQyxHQUNwRDNCLEtBQUtULGFBQWVTLEtBQUtOLFVBQ3pCTSxLQUFLZixVQUFZZSxLQUFLWCxXQUFXVyxLQUFLTixXQUFXaUUsS0FDakQzRCxLQUFLZCxXQUFhYyxLQUFLWCxXQUFXVyxLQUFLTixXQUFXc0MsTUFBTTJCLEtBQ3hEM0QsS0FBS2IsWUFBY3NFLENBQ25CLElBQUlJLEdBQWM3RCxLQUFLWCxXQUFXVyxLQUFLTixXQUFXb0UsTUFDbEQ5RCxNQUFLTCxVQUFZLEdBQ2pCSyxLQUFLTixVQUFZLEdBQ2pCTSxLQUFLdUIsS0FBS0MsUUFBUWlCLGFBQWEsTUFBT29CLEdBQ3RDN0QsS0FBS3VCLEtBQUtDLFFBQVFtQixPQUFTLEdBQzNCM0MsS0FBS3VCLEtBQUtDLFFBQVFDLE9BQ2xCekIsS0FBS1AsWUFBYSxHQUVwQnVFLFlBQWEsV0FDWEMsVUFBWVgsS0FBS1ksTUFBTWxFLEtBQUt1QixLQUFLQyxRQUFRMkMsYUFBYUMsV0FDdERwRSxLQUFLRixRQUFTIiwiZmlsZSI6InBsYXllci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiB5UGxheWVyXG4qIEF1dGhvciB5YW5nemoxOTkyXG4qL1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciB2bSA9IG5ldyBWdWUoe1xuICBlbDogJyN5bS1wbGF5ZXInLFxuICBkYXRhOiB7XG4gICAgc29uZ19uYW1lOiAnJyxcbiAgICBhbGJ1bV9uYW1lOiAnJyxcbiAgICBhcnRpc3RfbmFtZTogJycsXG4gICAgc2hvd2xyYzogW10sXG4gICAgbXVzaWNBcnJheTogJycsXG4gICAgcGxheWluZ011c2ljOiAnJyxcbiAgICBwbGF5aW5nSW5kZXg6ICcnLFxuICAgIGhhdmV2b2ljZTogdHJ1ZSxcbiAgICBwbGF5U3RhdHVzOiB0cnVlLFxuICAgIHByZXZJbmRleDogJycsXG4gICAgcHJldk11c2ljOiAnJyxcbiAgICBmb2xsb3dJbmRleDogJycsXG4gICAgZm9sbG93TXVzaWM6ICcnLFxuICAgIG9udGltZTogZmFsc2VcbiAgfSxcbiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHtcbiAgICB0aGlzLmxvYWRNdXNpYygpO1xuICB9LFxuICBtZXRob2RzOiB7XG4gICAgZ2V0SlNPTjogZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHtcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgY2xpZW50ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIGNsaWVudC5vcGVuKFwiR0VUXCIsIHVybCk7XG4gICAgICAgIGNsaWVudC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xuICAgICAgICBjbGllbnQucmVzcG9uc2VUeXBlID0gXCJqc29uXCI7XG4gICAgICAgIGNsaWVudC5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICAgICAgY2xpZW50LnNlbmQoKTtmdW5jdGlvbiBoYW5kbGVyKCkge1xuICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgIT09IDQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9aWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IodGhpcy5zdGF0dXNUZXh0KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9LFxuICAgIGNoYW5nZVBsYXk6IGZ1bmN0aW9uIGNoYW5nZVBsYXkoKSB7XG4gICAgICBpZiAodGhpcy5wbGF5U3RhdHVzID09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMucGxheVN0YXR1cyA9IHRydWU7XG4gICAgICAgIHRoaXMuJGVscy5tcGxheWVyLnBsYXkoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGxheVN0YXR1cyA9IGZhbHNlO1xuICAgICAgICB0aGlzLiRlbHMubXBsYXllci5wYXVzZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgbG9hZE11c2ljOiBmdW5jdGlvbiBsb2FkTXVzaWMoaWQpIHtcbiAgICAgIHZhciB1cmwgPSBpZCA/ICdnZXRTb25nLnBocD9pZD0nICsgaWQgOiAnZ2V0U29uZy5waHA/aWQ9MCc7XG4gICAgICB0aGlzLmdldEpTT04odXJsKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHZtLm11c2ljQXJyYXkgPSBkYXRhLnRyYWNrcztcbiAgICAgICAgdm0ubXVzaWNMZW5ndGggPSB2bS5tdXNpY0FycmF5Lmxlbmd0aDtcbiAgICAgICAgdm0uJGVscy5hbGJ1bS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyBkYXRhLmNvdmVyICsgJyknO1xuICAgICAgICBpZiAoZGF0YS5scmMgIT0gXCJub1wiKSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IGRhdGEubHJjO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLnNob3dscmMgPSB7IFwiMFwiOiBcIuaaguaXoOatjOivjVwiIH07XG4gICAgICAgIH1cbiAgICAgICAgdm0uc29uZ19uYW1lID0gZGF0YS5tdXNpY19uYW1lO1xuICAgICAgICB2bS5hbGJ1bV9uYW1lID0gZGF0YS5hbGJ1bV9uYW1lO1xuICAgICAgICB2bS5hcnRpc3RfbmFtZSA9IGRhdGEuYXJ0aXN0cztcbiAgICAgICAgdm0ucGxheWluZ011c2ljID0gZGF0YS5pZDtcbiAgICAgICAgdm0ucGxheWluZ0luZGV4ID0gZGF0YS5pbmRleDtcbiAgICAgICAgdm0uJGVscy5tcGxheWVyLnNldEF0dHJpYnV0ZShcInNyY1wiLCBkYXRhLm1wMyk7XG4gICAgICAgIHZtLiRlbHMubXBsYXllci52b2x1bW4gPSAwLjU7XG4gICAgICAgIHZtLiRlbHMubXBsYXllci5wbGF5KCk7XG4gICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgYWxlcnQoJ+acjeWKoeWZqOmAmuS/oeW8guW4uCcpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBjaGFuZ2VWb2ljZTogZnVuY3Rpb24gY2hhbmdlVm9pY2UoZXZlbnQpIHtcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLnZvbHVtZSA9IGV2ZW50LnRhcmdldC52YWx1ZSAvIDEwO1xuICAgICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA9PSAwKSB7XG4gICAgICAgIHRoaXMuaGF2ZXZvaWNlID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhhdmV2b2ljZSA9IHRydWU7XG4gICAgICB9XG4gICAgfSxcbiAgICBuZXh0TXVzaWM6IGZ1bmN0aW9uIG5leHRNdXNpYygpIHtcbiAgICAgIHZhciByYW5kb21faW5kZXg7XG4gICAgICB2YXIgcmFuZG9tX2lkO1xuICAgICAgaWYgKCF0aGlzLmZvbGxvd011c2ljIHx8ICF0aGlzLmZvbGxvd0luZGV4KSB7XG4gICAgICAgIHJhbmRvbV9pbmRleCA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogdGhpcy5tdXNpY0xlbmd0aCk7XG4gICAgICAgIHJhbmRvbV9pZCA9IHRoaXMubXVzaWNBcnJheVtyYW5kb21faW5kZXhdLmlkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmFuZG9tX2luZGV4ID0gdGhpcy5mb2xsb3dJbmRleDtcbiAgICAgICAgcmFuZG9tX2lkID0gdGhpcy5mb2xsb3dNdXNpYztcbiAgICAgIH1cbiAgICAgIHRoaXMuZm9sbG93SW5kZXggPSAnJztcbiAgICAgIHRoaXMuZm9sbG93TXVzaWMgPSAnJztcbiAgICAgIHRoaXMucHJldk11c2ljID0gdGhpcy5wbGF5aW5nTXVzaWM7XG4gICAgICB0aGlzLnByZXZJbmRleCA9IHRoaXMucGxheWluZ0luZGV4O1xuICAgICAgdGhpcy5zaG93bHJjID0gW107XG4gICAgICB0aGlzLmdldEpTT04oJ2dldEx5cmljcy5waHA/aWQ9JyArIHJhbmRvbV9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5scmMgIT0gXCJub1wiKSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IGRhdGEubHJjO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLnNob3dscmMgPSB7IFwiMFwiOiBcIuaaguaXoOatjOivjVwiIH07XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBhbGVydCgn5pyN5Yqh5Zmo6YCa5L+h5byC5bi4Jyk7XG4gICAgICB9KTtcbiAgICAgIHZhciBhcnRpc3RzX25hbWUgPSAnJztcbiAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uYXJ0aXN0cykge1xuICAgICAgICBhcnRpc3RzX25hbWUgKz0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uYXJ0aXN0c1tpXS5uYW1lO1xuICAgICAgfVxuICAgICAgdGhpcy4kZWxzLmFsYnVtLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIHRoaXMubXVzaWNBcnJheVtyYW5kb21faW5kZXhdLmFsYnVtLnBpY1VybCArICcpJztcbiAgICAgIHRoaXMucGxheWluZ011c2ljID0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uaWQ7XG4gICAgICB0aGlzLnBsYXlpbmdJbmRleCA9IHJhbmRvbV9pbmRleDtcbiAgICAgIHRoaXMuc29uZ19uYW1lID0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0ubmFtZTtcbiAgICAgIHRoaXMuYWxidW1fbmFtZSA9IHRoaXMubXVzaWNBcnJheVtyYW5kb21faW5kZXhdLmFsYnVtLm5hbWU7XG4gICAgICB0aGlzLmFydGlzdF9uYW1lID0gYXJ0aXN0c19uYW1lO1xuICAgICAgdmFyIG1wM19hZGRyZXNzID0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0ubXAzVXJsO1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIuc2V0QXR0cmlidXRlKFwic3JjXCIsIG1wM19hZGRyZXNzKTtcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLnZvbHVtbiA9IDAuNTtcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLnBsYXkoKTtcbiAgICAgIHRoaXMucGxheVN0YXR1cyA9IHRydWU7XG4gICAgfSxcbiAgICBiYWNrTXVzaWM6IGZ1bmN0aW9uIGJhY2tNdXNpYygpIHtcbiAgICAgIGlmICghdGhpcy5wcmV2TXVzaWMgfHwgIXRoaXMucHJldkluZGV4KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZm9sbG93SW5kZXggPSB0aGlzLnBsYXlpbmdJbmRleDtcbiAgICAgIHRoaXMuZm9sbG93TXVzaWMgPSB0aGlzLnBsYXlpbmdNdXNpYztcbiAgICAgIHRoaXMuc2hvd2xyYyA9IFtdO1xuICAgICAgdGhpcy5nZXRKU09OKCdnZXRMeXJpY3MucGhwP2lkPScgKyB0aGlzLnByZXZNdXNpYykudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5scmMgIT0gXCJub1wiKSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IGRhdGEubHJjO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLnNob3dscmMgPSB7IFwiMFwiOiBcIuaaguaXoOatjOivjVwiIH07XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBhbGVydCgn5pyN5Yqh5Zmo6YCa5L+h5byC5bi4Jyk7XG4gICAgICB9KTtcbiAgICAgIHZhciBhcnRpc3RzX25hbWUgPSAnJztcbiAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5tdXNpY0FycmF5W3RoaXMucHJldkluZGV4XS5hcnRpc3RzKSB7XG4gICAgICAgIGFydGlzdHNfbmFtZSArPSB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLmFydGlzdHNbaV0ubmFtZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuJGVscy5hbGJ1bS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLmFsYnVtLnBpY1VybCArICcpJztcbiAgICAgIHRoaXMucGxheWluZ011c2ljID0gdGhpcy5tdXNpY0FycmF5W3RoaXMucHJldkluZGV4XS5pZDtcbiAgICAgIHRoaXMucGxheWluZ0luZGV4ID0gdGhpcy5wcmV2SW5kZXg7XG4gICAgICB0aGlzLnNvbmdfbmFtZSA9IHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0ubmFtZTtcbiAgICAgIHRoaXMuYWxidW1fbmFtZSA9IHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0uYWxidW0ubmFtZTtcbiAgICAgIHRoaXMuYXJ0aXN0X25hbWUgPSBhcnRpc3RzX25hbWU7XG4gICAgICB2YXIgbXAzX2FkZHJlc3MgPSB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLm1wM1VybDtcbiAgICAgIHRoaXMucHJldk11c2ljID0gJyc7XG4gICAgICB0aGlzLnByZXZJbmRleCA9ICcnO1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIuc2V0QXR0cmlidXRlKFwic3JjXCIsIG1wM19hZGRyZXNzKTtcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLnZvbHVtbiA9IDAuNTtcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLnBsYXkoKTtcbiAgICAgIHRoaXMucGxheVN0YXR1cyA9IHRydWU7XG4gICAgfSxcbiAgICBkaXNwbGF5X2xyYzogZnVuY3Rpb24gZGlzcGxheV9scmMoKSB7XG4gICAgICBwbGF5X3RpbWUgPSBNYXRoLmZsb29yKHRoaXMuJGVscy5tcGxheWVyLmN1cnJlbnRUaW1lKS50b1N0cmluZygpO1xuICAgICAgdGhpcy5vbnRpbWUgPSB0cnVlO1xuICAgIH1cbiAgfVxufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
