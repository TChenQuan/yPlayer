"use strict";var vm=new Vue({el:"#ym-player",data:{song_name:"",album_name:"",artist_name:"",showlrc:[],musicArray:"",playingMusic:"",playingIndex:"",havevoice:!0,playStatus:!0,prevIndex:"",prevMusic:"",followIndex:"",followMusic:"",ontime:!1},created:function(){this.loadMusic()},methods:{getJSON:function(t){var e=new Promise(function(e,s){function i(){4===this.readyState&&(200===this.status?e(this.response):s(new Error(this.statusText)))}var a=new XMLHttpRequest;a.open("GET",t),a.onreadystatechange=i,a.responseType="json",a.setRequestHeader("Accept","application/json"),a.send()});return e},changePlay:function(){var t=document.getElementById("player");0==this.playStatus?(this.playStatus=!0,t.play()):(this.playStatus=!1,t.pause())},loadMusic:function(t){var e=t?"getSong.php?id="+t:"getSong.php?id=0";this.getJSON(e).then(function(t){var e=document.getElementById("player");vm.musicArray=t.tracks,vm.musicLength=vm.musicArray.length;var s=document.getElementsByClassName("ym-album")[0];s.style.backgroundImage="url("+t.cover+")","no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"},vm.song_name=t.music_name,vm.album_name=t.album_name,vm.artist_name=t.artists,vm.playingMusic=t.id,vm.playingIndex=t.index,e.setAttribute("src",t.mp3),e.volumn=.5,e.play()},function(t){alert("服务器通信异常")})},changeVoice:function(t){var e=document.getElementById("player");e.volume=t.target.value/10,0==t.target.value?this.havevoice=!1:this.havevoice=!0},nextMusic:function(){var t,e,s=document.getElementById("player"),i=document.getElementsByClassName("ym-album")[0];this.followMusic&&this.followIndex?(t=this.followIndex,e=this.followMusic):(t=Math.ceil(Math.random()*this.musicLength),e=this.musicArray[t].id),this.followIndex="",this.followMusic="",this.prevMusic=this.playingMusic,this.prevIndex=this.playingIndex,this.showlrc=[],this.getJSON("getLyrics.php?id="+e).then(function(t){"no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"}},function(t){alert("服务器通信异常")});var a="";for(var n in this.musicArray[t].artists)a+=this.musicArray[t].artists[n].name;i.style.backgroundImage="url("+this.musicArray[t].album.picUrl+")",this.playingMusic=this.musicArray[t].id,this.playingIndex=t,this.song_name=this.musicArray[t].name,this.album_name=this.musicArray[t].album.name,this.artist_name=a;var r=this.musicArray[t].mp3Url;s.setAttribute("src",r),s.volumn=.5,s.play(),this.playStatus=!0},backMusic:function(){var t=document.getElementById("player"),e=document.getElementsByClassName("ym-album")[0];if(!this.prevMusic||!this.prevIndex)return!1;this.followIndex=this.playingIndex,this.followMusic=this.playingMusic,this.showlrc=[],this.getJSON("getLyrics.php?id="+this.prevMusic).then(function(t){"no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"}},function(t){alert("服务器通信异常")});var s="";for(var i in this.musicArray[this.prevIndex].artists)s+=this.musicArray[this.prevIndex].artists[i].name;e.style.backgroundImage="url("+this.musicArray[this.prevIndex].album.picUrl+")",this.playingMusic=this.musicArray[this.prevIndex].id,this.playingIndex=this.prevIndex,this.song_name=this.musicArray[this.prevIndex].name,this.album_name=this.musicArray[this.prevIndex].album.name,this.artist_name=s;var a=this.musicArray[this.prevIndex].mp3Url;this.prevMusic="",this.prevIndex="",t.setAttribute("src",a),t.volumn=.5,t.play(),this.playStatus=!0},display_lrc:function(){var t=document.getElementById("player");play_time=Math.floor(t.currentTime).toString(),this.ontime=!0}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYXllci5qcyJdLCJuYW1lcyI6WyJ2bSIsIlZ1ZSIsImVsIiwiZGF0YSIsInNvbmdfbmFtZSIsImFsYnVtX25hbWUiLCJhcnRpc3RfbmFtZSIsInNob3dscmMiLCJtdXNpY0FycmF5IiwicGxheWluZ011c2ljIiwicGxheWluZ0luZGV4IiwiaGF2ZXZvaWNlIiwicGxheVN0YXR1cyIsInByZXZJbmRleCIsInByZXZNdXNpYyIsImZvbGxvd0luZGV4IiwiZm9sbG93TXVzaWMiLCJvbnRpbWUiLCJjcmVhdGVkIiwidGhpcyIsImxvYWRNdXNpYyIsIm1ldGhvZHMiLCJnZXRKU09OIiwidXJsIiwicHJvbWlzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiaGFuZGxlciIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJyZXNwb25zZSIsIkVycm9yIiwic3RhdHVzVGV4dCIsImNsaWVudCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlc3BvbnNlVHlwZSIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwiY2hhbmdlUGxheSIsInlBdWRpbyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJwbGF5IiwicGF1c2UiLCJpZCIsInRoZW4iLCJ0cmFja3MiLCJtdXNpY0xlbmd0aCIsImxlbmd0aCIsImFsYnVtX3BpYyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImNvdmVyIiwibHJjIiwiMCIsIm11c2ljX25hbWUiLCJhcnRpc3RzIiwiaW5kZXgiLCJzZXRBdHRyaWJ1dGUiLCJtcDMiLCJ2b2x1bW4iLCJlcnJvciIsImFsZXJ0IiwiY2hhbmdlVm9pY2UiLCJldmVudCIsInZvbHVtZSIsInRhcmdldCIsInZhbHVlIiwibmV4dE11c2ljIiwicmFuZG9tX2luZGV4IiwicmFuZG9tX2lkIiwiTWF0aCIsImNlaWwiLCJyYW5kb20iLCJhcnRpc3RzX25hbWUiLCJpIiwibmFtZSIsImFsYnVtIiwicGljVXJsIiwibXAzX2FkZHJlc3MiLCJtcDNVcmwiLCJiYWNrTXVzaWMiLCJkaXNwbGF5X2xyYyIsInBsYXlfdGltZSIsImZsb29yIiwiY3VycmVudFRpbWUiLCJ0b1N0cmluZyJdLCJtYXBwaW5ncyI6IkFBSUEsWUFFQSxJQUFJQSxJQUFLLEdBQUlDLE1BQ1hDLEdBQUksYUFDSkMsTUFDRUMsVUFBVyxHQUNYQyxXQUFZLEdBQ1pDLFlBQWEsR0FDYkMsV0FDQUMsV0FBWSxHQUNaQyxhQUFjLEdBQ2RDLGFBQWMsR0FDZEMsV0FBVyxFQUNYQyxZQUFZLEVBQ1pDLFVBQVcsR0FDWEMsVUFBVyxHQUNYQyxZQUFhLEdBQ2JDLFlBQWEsR0FDYkMsUUFBUSxHQUVWQyxRQUFTLFdBQ1BDLEtBQUtDLGFBRVBDLFNBQ0VDLFFBQVMsU0FBaUJDLEdBQ3hCLEdBQUlDLEdBQVUsR0FBSUMsU0FBUSxTQUFVQyxFQUFTQyxHQU03QixRQUFTQyxLQUNHLElBQXBCVCxLQUFLVSxhQUVZLE1BQWhCVixLQUFLVyxPQUNSSixFQUFRUCxLQUFLWSxVQUViSixFQUFPLEdBQUlLLE9BQU1iLEtBQUtjLGNBWDFCLEdBQUlDLEdBQVMsR0FBSUMsZUFDakJELEdBQU9FLEtBQUssTUFBT2IsR0FDbkJXLEVBQU9HLG1CQUFxQlQsRUFDNUJNLEVBQU9JLGFBQWUsT0FDdEJKLEVBQU9LLGlCQUFpQixTQUFVLG9CQUNsQ0wsRUFBT00sUUFVVCxPQUFPaEIsSUFFVGlCLFdBQVksV0FDVixHQUFJQyxHQUFTQyxTQUFTQyxlQUFlLFNBQ2QsSUFBbkJ6QixLQUFLUCxZQUNQTyxLQUFLUCxZQUFhLEVBQ2xCOEIsRUFBT0csU0FFUDFCLEtBQUtQLFlBQWEsRUFDbEI4QixFQUFPSSxVQUdYMUIsVUFBVyxTQUFtQjJCLEdBQzVCLEdBQUl4QixHQUFNd0IsRUFBSyxrQkFBb0JBLEVBQUssa0JBQ3hDNUIsTUFBS0csUUFBUUMsR0FBS3lCLEtBQUssU0FBVTdDLEdBQy9CLEdBQUl1QyxHQUFTQyxTQUFTQyxlQUFlLFNBQ3JDNUMsSUFB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QUVyQixTQUFVTyxHQUNYQyxNQUFNLFlBRVIsSUFBSVksR0FBZSxFQUNuQixLQUFLLEdBQUlDLEtBQUs1RCxNQUFLWCxXQUFXVyxLQUFLTixXQUFXK0MsUUFDNUNrQixHQUFnQjNELEtBQUtYLFdBQVdXLEtBQUtOLFdBQVcrQyxRQUFRbUIsR0FBR0MsSUFFN0Q1QixHQUFVRSxNQUFNQyxnQkFBa0IsT0FBU3BDLEtBQUtYLFdBQVdXLEtBQUtOLFdBQVdvRSxNQUFNQyxPQUFTLElBQzFGL0QsS0FBS1YsYUFBZVUsS0FBS1gsV0FBV1csS0FBS04sV0FBV2tDLEdBQ3BENUIsS0FBS1QsYUFBZVMsS0FBS04sVUFDekJNLEtBQUtmLFVBQVllLEtBQUtYLFdBQVdXLEtBQUtOLFdBQVdtRSxLQUNqRDdELEtBQUtkLFdBQWFjLEtBQUtYLFdBQVdXLEtBQUtOLFdBQVdvRSxNQUFNRCxLQUN4RDdELEtBQUtiLFlBQWN3RSxDQUNuQixJQUFJSyxHQUFjaEUsS0FBS1gsV0FBV1csS0FBS04sV0FBV3VFLE1BQ2xEakUsTUFBS0wsVUFBWSxHQUNqQkssS0FBS04sVUFBWSxHQUNqQjZCLEVBQU9vQixhQUFhLE1BQU9xQixHQUMzQnpDLEVBQU9zQixPQUFTLEdBQ2hCdEIsRUFBT0csT0FDUDFCLEtBQUtQLFlBQWEsR0FFcEIwRSxZQUFhLFdBQ1gsR0FBSTVDLEdBQVNDLFNBQVNDLGVBQWUsU0FDckMyQyxXQUFZWixLQUFLYSxNQUFNOUMsRUFBTytDLGFBQWFDLFdBQzNDdkUsS0FBS0YsUUFBUyIsImZpbGUiOiJwbGF5ZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiogeVBsYXllclxuKiBBdXRob3IgeWFuZ3pqMTk5MlxuKi9cblwidXNlIHN0cmljdFwiO1xuXG52YXIgdm0gPSBuZXcgVnVlKHtcbiAgZWw6ICcjeW0tcGxheWVyJyxcbiAgZGF0YToge1xuICAgIHNvbmdfbmFtZTogJycsXG4gICAgYWxidW1fbmFtZTogJycsXG4gICAgYXJ0aXN0X25hbWU6ICcnLFxuICAgIHNob3dscmM6IFtdLFxuICAgIG11c2ljQXJyYXk6ICcnLFxuICAgIHBsYXlpbmdNdXNpYzogJycsXG4gICAgcGxheWluZ0luZGV4OiAnJyxcbiAgICBoYXZldm9pY2U6IHRydWUsXG4gICAgcGxheVN0YXR1czogdHJ1ZSxcbiAgICBwcmV2SW5kZXg6ICcnLFxuICAgIHByZXZNdXNpYzogJycsXG4gICAgZm9sbG93SW5kZXg6ICcnLFxuICAgIGZvbGxvd011c2ljOiAnJyxcbiAgICBvbnRpbWU6IGZhbHNlXG4gIH0sXG4gIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7XG4gICAgdGhpcy5sb2FkTXVzaWMoKTtcbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIGdldEpTT046IGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG4gICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIGNsaWVudCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICBjbGllbnQub3BlbihcIkdFVFwiLCB1cmwpO1xuICAgICAgICBjbGllbnQub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcbiAgICAgICAgY2xpZW50LnJlc3BvbnNlVHlwZSA9IFwianNvblwiO1xuICAgICAgICBjbGllbnQuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICAgIGNsaWVudC5zZW5kKCk7ZnVuY3Rpb24gaGFuZGxlcigpIHtcbiAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlICE9PSA0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfWlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKHRoaXMuc3RhdHVzVGV4dCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfSxcbiAgICBjaGFuZ2VQbGF5OiBmdW5jdGlvbiBjaGFuZ2VQbGF5KCkge1xuICAgICAgdmFyIHlBdWRpbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF5ZXInKTtcbiAgICAgIGlmICh0aGlzLnBsYXlTdGF0dXMgPT0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5wbGF5U3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgeUF1ZGlvLnBsYXkoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGxheVN0YXR1cyA9IGZhbHNlO1xuICAgICAgICB5QXVkaW8ucGF1c2UoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGxvYWRNdXNpYzogZnVuY3Rpb24gbG9hZE11c2ljKGlkKSB7XG4gICAgICB2YXIgdXJsID0gaWQgPyAnZ2V0U29uZy5waHA/aWQ9JyArIGlkIDogJ2dldFNvbmcucGhwP2lkPTAnO1xuICAgICAgdGhpcy5nZXRKU09OKHVybCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICB2YXIgeUF1ZGlvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllcicpO1xuICAgICAgICB2bS5tdXNpY0FycmF5ID0gZGF0YS50cmFja3M7XG4gICAgICAgIHZtLm11c2ljTGVuZ3RoID0gdm0ubXVzaWNBcnJheS5sZW5ndGg7XG4gICAgICAgIHZhciBhbGJ1bV9waWMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd5bS1hbGJ1bScpWzBdO1xuICAgICAgICBhbGJ1bV9waWMuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgZGF0YS5jb3ZlciArICcpJztcbiAgICAgICAgaWYgKGRhdGEubHJjICE9IFwibm9cIikge1xuICAgICAgICAgIHZtLnNob3dscmMgPSBkYXRhLmxyYztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2bS5zaG93bHJjID0geyBcIjBcIjogXCLmmoLml6DmrYzor41cIiB9O1xuICAgICAgICB9XG4gICAgICAgIHZtLnNvbmdfbmFtZSA9IGRhdGEubXVzaWNfbmFtZTtcbiAgICAgICAgdm0uYWxidW1fbmFtZSA9IGRhdGEuYWxidW1fbmFtZTtcbiAgICAgICAgdm0uYXJ0aXN0X25hbWUgPSBkYXRhLmFydGlzdHM7XG4gICAgICAgIHZtLnBsYXlpbmdNdXNpYyA9IGRhdGEuaWQ7XG4gICAgICAgIHZtLnBsYXlpbmdJbmRleCA9IGRhdGEuaW5kZXg7XG4gICAgICAgIHlBdWRpby5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgZGF0YS5tcDMpO1xuICAgICAgICB5QXVkaW8udm9sdW1uID0gMC41O1xuICAgICAgICB5QXVkaW8ucGxheSgpO1xuICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGFsZXJ0KCfmnI3liqHlmajpgJrkv6HlvILluLgnKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgY2hhbmdlVm9pY2U6IGZ1bmN0aW9uIGNoYW5nZVZvaWNlKGV2ZW50KSB7XG4gICAgICB2YXIgeUF1ZGlvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllcicpO1xuICAgICAgeUF1ZGlvLnZvbHVtZSA9IGV2ZW50LnRhcmdldC52YWx1ZSAvIDEwO1xuICAgICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA9PSAwKSB7XG4gICAgICAgIHRoaXMuaGF2ZXZvaWNlID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhhdmV2b2ljZSA9IHRydWU7XG4gICAgICB9XG4gICAgfSxcbiAgICBuZXh0TXVzaWM6IGZ1bmN0aW9uIG5leHRNdXNpYygpIHtcbiAgICAgIHZhciB5QXVkaW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyJyk7XG4gICAgICB2YXIgYWxidW1fcGljID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgneW0tYWxidW0nKVswXTtcbiAgICAgIHZhciByYW5kb21faW5kZXg7XG4gICAgICB2YXIgcmFuZG9tX2lkO1xuICAgICAgaWYgKCF0aGlzLmZvbGxvd011c2ljIHx8ICF0aGlzLmZvbGxvd0luZGV4KSB7XG4gICAgICAgIHJhbmRvbV9pbmRleCA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogdGhpcy5tdXNpY0xlbmd0aCk7XG4gICAgICAgIHJhbmRvbV9pZCA9IHRoaXMubXVzaWNBcnJheVtyYW5kb21faW5kZXhdLmlkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmFuZG9tX2luZGV4ID0gdGhpcy5mb2xsb3dJbmRleDtcbiAgICAgICAgcmFuZG9tX2lkID0gdGhpcy5mb2xsb3dNdXNpYztcbiAgICAgIH1cbiAgICAgIHRoaXMuZm9sbG93SW5kZXggPSAnJztcbiAgICAgIHRoaXMuZm9sbG93TXVzaWMgPSAnJztcbiAgICAgIHRoaXMucHJldk11c2ljID0gdGhpcy5wbGF5aW5nTXVzaWM7XG4gICAgICB0aGlzLnByZXZJbmRleCA9IHRoaXMucGxheWluZ0luZGV4O1xuICAgICAgdGhpcy5zaG93bHJjID0gW107XG4gICAgICB0aGlzLmdldEpTT04oJ2dldEx5cmljcy5waHA/aWQ9JyArIHJhbmRvbV9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5scmMgIT0gXCJub1wiKSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IGRhdGEubHJjO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLnNob3dscmMgPSB7IFwiMFwiOiBcIuaaguaXoOatjOivjVwiIH07XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBhbGVydCgn5pyN5Yqh5Zmo6YCa5L+h5byC5bi4Jyk7XG4gICAgICB9KTtcbiAgICAgIHZhciBhcnRpc3RzX25hbWUgPSAnJztcbiAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uYXJ0aXN0cykge1xuICAgICAgICBhcnRpc3RzX25hbWUgKz0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uYXJ0aXN0c1tpXS5uYW1lO1xuICAgICAgfVxuICAgICAgYWxidW1fcGljLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIHRoaXMubXVzaWNBcnJheVtyYW5kb21faW5kZXhdLmFsYnVtLnBpY1VybCArICcpJztcbiAgICAgIHRoaXMucGxheWluZ011c2ljID0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uaWQ7XG4gICAgICB0aGlzLnBsYXlpbmdJbmRleCA9IHJhbmRvbV9pbmRleDtcbiAgICAgIHRoaXMuc29uZ19uYW1lID0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0ubmFtZTtcbiAgICAgIHRoaXMuYWxidW1fbmFtZSA9IHRoaXMubXVzaWNBcnJheVtyYW5kb21faW5kZXhdLmFsYnVtLm5hbWU7XG4gICAgICB0aGlzLmFydGlzdF9uYW1lID0gYXJ0aXN0c19uYW1lO1xuICAgICAgdmFyIG1wM19hZGRyZXNzID0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0ubXAzVXJsO1xuICAgICAgeUF1ZGlvLnNldEF0dHJpYnV0ZShcInNyY1wiLCBtcDNfYWRkcmVzcyk7XG4gICAgICB5QXVkaW8udm9sdW1uID0gMC41O1xuICAgICAgeUF1ZGlvLnBsYXkoKTtcbiAgICAgIHRoaXMucGxheVN0YXR1cyA9IHRydWU7XG4gICAgfSxcbiAgICBiYWNrTXVzaWM6IGZ1bmN0aW9uIGJhY2tNdXNpYygpIHtcbiAgICAgIHZhciB5QXVkaW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyJyk7XG4gICAgICB2YXIgYWxidW1fcGljID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgneW0tYWxidW0nKVswXTtcbiAgICAgIGlmICghdGhpcy5wcmV2TXVzaWMgfHwgIXRoaXMucHJldkluZGV4KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZm9sbG93SW5kZXggPSB0aGlzLnBsYXlpbmdJbmRleDtcbiAgICAgIHRoaXMuZm9sbG93TXVzaWMgPSB0aGlzLnBsYXlpbmdNdXNpYztcbiAgICAgIHRoaXMuc2hvd2xyYyA9IFtdO1xuICAgICAgdGhpcy5nZXRKU09OKCdnZXRMeXJpY3MucGhwP2lkPScgKyB0aGlzLnByZXZNdXNpYykudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5scmMgIT0gXCJub1wiKSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IGRhdGEubHJjO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLnNob3dscmMgPSB7IFwiMFwiOiBcIuaaguaXoOatjOivjVwiIH07XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBhbGVydCgn5pyN5Yqh5Zmo6YCa5L+h5byC5bi4Jyk7XG4gICAgICB9KTtcbiAgICAgIHZhciBhcnRpc3RzX25hbWUgPSAnJztcbiAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5tdXNpY0FycmF5W3RoaXMucHJldkluZGV4XS5hcnRpc3RzKSB7XG4gICAgICAgIGFydGlzdHNfbmFtZSArPSB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLmFydGlzdHNbaV0ubmFtZTtcbiAgICAgIH1cbiAgICAgIGFsYnVtX3BpYy5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLmFsYnVtLnBpY1VybCArICcpJztcbiAgICAgIHRoaXMucGxheWluZ011c2ljID0gdGhpcy5tdXNpY0FycmF5W3RoaXMucHJldkluZGV4XS5pZDtcbiAgICAgIHRoaXMucGxheWluZ0luZGV4ID0gdGhpcy5wcmV2SW5kZXg7XG4gICAgICB0aGlzLnNvbmdfbmFtZSA9IHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0ubmFtZTtcbiAgICAgIHRoaXMuYWxidW1fbmFtZSA9IHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0uYWxidW0ubmFtZTtcbiAgICAgIHRoaXMuYXJ0aXN0X25hbWUgPSBhcnRpc3RzX25hbWU7XG4gICAgICB2YXIgbXAzX2FkZHJlc3MgPSB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLm1wM1VybDtcbiAgICAgIHRoaXMucHJldk11c2ljID0gJyc7XG4gICAgICB0aGlzLnByZXZJbmRleCA9ICcnO1xuICAgICAgeUF1ZGlvLnNldEF0dHJpYnV0ZShcInNyY1wiLCBtcDNfYWRkcmVzcyk7XG4gICAgICB5QXVkaW8udm9sdW1uID0gMC41O1xuICAgICAgeUF1ZGlvLnBsYXkoKTtcbiAgICAgIHRoaXMucGxheVN0YXR1cyA9IHRydWU7XG4gICAgfSxcbiAgICBkaXNwbGF5X2xyYzogZnVuY3Rpb24gZGlzcGxheV9scmMoKSB7XG4gICAgICB2YXIgeUF1ZGlvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllcicpO1xuICAgICAgcGxheV90aW1lID0gTWF0aC5mbG9vcih5QXVkaW8uY3VycmVudFRpbWUpLnRvU3RyaW5nKCk7XG4gICAgICB0aGlzLm9udGltZSA9IHRydWU7XG4gICAgfVxuICB9XG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
