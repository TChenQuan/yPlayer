"use strict";Vue.config.debug=!0;var vm=new Vue({el:"#ym-player",data:{song_name:"",album_name:"",artist_name:"",showlrc:[],musicArray:"",playingMusic:"",playingIndex:"",havevoice:!0,playStatus:!0,prevIndex:"",prevMusic:"",followIndex:"",followMusic:"",curtime:"00:00",musictime:"00:00",playingtime:0,loaded:!1},created:function(){this.loadMusic()},methods:{getJSON:function(t){var s=new Promise(function(s,e){function i(){4===this.readyState&&(200===this.status?s(this.response):e(new Error(this.statusText)))}var r=new XMLHttpRequest;r.open("GET",t),r.onreadystatechange=i,r.responseType="json",r.setRequestHeader("Accept","application/json"),r.send()});return s},changePlay:function(){0==this.playStatus?(this.playStatus=!0,this.$els.mplayer.play()):(this.playStatus=!1,this.$els.mplayer.pause())},loadMusic:function(t){var s=t?"getSong.php?id="+t:"getSong.php?id=0";this.getJSON(s).then(function(t){vm.musicArray=t.tracks,vm.musicLength=vm.musicArray.length,vm.$els.album.style.backgroundImage="url("+t.cover+")","no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"},vm.song_name=t.music_name,vm.album_name=t.album_name,vm.artist_name=t.artists,vm.playingMusic=t.id,vm.playingIndex=t.index,vm.loaded=!0,vm.$els.mplayer.setAttribute("src",t.mp3),vm.$els.mplayer.volumn=.5,vm.$els.mplayer.play()},function(t){alert("服务器通信异常")})},changeVoice:function(t){this.$els.mplayer.volume=t.target.value/10,0==t.target.value?this.havevoice=!1:this.havevoice=!0},nextMusic:function(){var t,s;this.followMusic&&this.followIndex?(t=this.followIndex,s=this.followMusic):(t=Math.ceil(Math.random()*this.musicLength),s=this.musicArray[t].id),this.followIndex="",this.followMusic="",this.prevMusic=this.playingMusic,this.prevIndex=this.playingIndex,this.showlrc=[],this.getJSON("getLyrics.php?id="+s).then(function(t){"no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"}},function(t){alert("服务器通信异常")});var e="";for(var i in this.musicArray[t].artists)e+=this.musicArray[t].artists[i].name;this.$els.album.style.backgroundImage="url("+this.musicArray[t].album.picUrl+")",this.playingMusic=this.musicArray[t].id,this.playingIndex=t,this.song_name=this.musicArray[t].name,this.album_name=this.musicArray[t].album.name,this.artist_name=e;var r=this.musicArray[t].mp3Url;this.$els.mplayer.setAttribute("src",r),this.$els.mplayer.volumn=.5,this.$els.mplayer.play(),this.playStatus=!0},backMusic:function(){if(!this.prevMusic||!this.prevIndex)return!1;this.followIndex=this.playingIndex,this.followMusic=this.playingMusic,this.showlrc=[],this.getJSON("getLyrics.php?id="+this.prevMusic).then(function(t){"no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"}},function(t){alert("服务器通信异常")});var t="";for(var s in this.musicArray[this.prevIndex].artists)t+=this.musicArray[this.prevIndex].artists[s].name;this.$els.album.style.backgroundImage="url("+this.musicArray[this.prevIndex].album.picUrl+")",this.playingMusic=this.musicArray[this.prevIndex].id,this.playingIndex=this.prevIndex,this.song_name=this.musicArray[this.prevIndex].name,this.album_name=this.musicArray[this.prevIndex].album.name,this.artist_name=t;var e=this.musicArray[this.prevIndex].mp3Url;this.prevMusic="",this.prevIndex="",this.$els.mplayer.setAttribute("src",e),this.$els.mplayer.volumn=.5,this.$els.mplayer.play(),this.playStatus=!0},getMusic:function(){var t=void 0,s=void 0,e=parseInt(this.$els.mplayer.duration/60);s=e.toString().length>1?""+e:"0"+e;var i=parseInt(this.$els.mplayer.duration%60);t=i.toString().length>1?""+i:"0"+i,this.musictime=s+":"+t},playEvent:function(){var t=void 0,s=void 0,e=parseInt(this.$els.mplayer.currentTime/60);s=e.toString().length>1?""+e:"0"+e;var i=parseInt(this.$els.mplayer.currentTime%60);t=i.toString().length>1?""+i:"0"+i,this.curtime=s+":"+t;var r=Math.floor(this.$els.mplayer.currentTime).toString();this.display_lrc(r);var a=this.$els.mplayer.buffered.end(0)/this.$els.mplayer.duration,l=this.$els.mplayer.currentTime/this.$els.mplayer.duration;this.$els.buffer.style.transform="scaleX("+a+")",this.$els.playtime.style.transform="scaleX("+l+")"},display_lrc:function(t){for(var s=document.getElementsByClassName("lrc"),e=0;e<s.length;e++)e+1<s.length&&(s[e].getAttribute("dtime")<=this.$els.mplayer.currentTime&&this.$els.mplayer.currentTime<s[e+1].getAttribute("dtime")?(s[e].classList?s[e].classList.add("lrc-current"):s[e].className+=" lrc-current",s[e].offsetTop>200&&(this.$els.lyricbox.scrollTop=s[e].offsetTop-200)):s[e].classList?s[e].classList.remove("lrc-current"):s[e].className=s[e].className.replace(new RegExp("(^|\\b)"+"lrc-current".split(" ").join("|")+"(\\b|$)","gi")," "));s[s.length-1].getAttribute("dtime")<=this.$els.mplayer.currentTime&&(s[s.length-1].classList?s[s.length-1].classList.add("lrc-current"):s[s.length-1].className+=" lrc-current")}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYXllci5qcyJdLCJuYW1lcyI6WyJWdWUiLCJjb25maWciLCJkZWJ1ZyIsInZtIiwiZWwiLCJkYXRhIiwic29uZ19uYW1lIiwiYWxidW1fbmFtZSIsImFydGlzdF9uYW1lIiwic2hvd2xyYyIsIm11c2ljQXJyYXkiLCJwbGF5aW5nTXVzaWMiLCJwbGF5aW5nSW5kZXgiLCJoYXZldm9pY2UiLCJwbGF5U3RhdHVzIiwicHJldkluZGV4IiwicHJldk11c2ljIiwiZm9sbG93SW5kZXgiLCJmb2xsb3dNdXNpYyIsImN1cnRpbWUiLCJtdXNpY3RpbWUiLCJwbGF5aW5ndGltZSIsImxvYWRlZCIsImNyZWF0ZWQiLCJ0aGlzIiwibG9hZE11c2ljIiwibWV0aG9kcyIsImdldEpTT04iLCJ1cmwiLCJwcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJoYW5kbGVyIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3BvbnNlIiwiRXJyb3IiLCJzdGF0dXNUZXh0IiwiY2xpZW50IiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVzcG9uc2VUeXBlIiwic2V0UmVxdWVzdEhlYWRlciIsInNlbmQiLCJjaGFuZ2VQbGF5IiwiJGVscyIsIm1wbGF5ZXIiLCJwbGF5IiwicGF1c2UiLCJpZCIsInRoZW4iLCJ0cmFja3MiLCJtdXNpY0xlbmd0aCIsImxlbmd0aCIsImFsYnVtIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJjb3ZlciIsImxyYyIsIjAiLCJtdXNpY19uYW1lIiwiYXJ0aXN0cyIsImluZGV4Iiwic2V0QXR0cmlidXRlIiwibXAzIiwidm9sdW1uIiwiZXJyb3IiLCJhbGVydCIsImNoYW5nZVZvaWNlIiwiZXZlbnQiLCJ2b2x1bWUiLCJ0YXJnZXQiLCJ2YWx1ZSIsIm5leHRNdXNpYyIsInJhbmRvbV9pbmRleCIsInJhbmRvbV9pZCIsIk1hdGgiLCJjZWlsIiwicmFuZG9tIiwiYXJ0aXN0c19uYW1lIiwiaSIsIm5hbWUiLCJwaWNVcmwiLCJtcDNfYWRkcmVzcyIsIm1wM1VybCIsImJhY2tNdXNpYyIsImdldE11c2ljIiwibV9zZWNvbmQiLCJ1bmRlZmluZWQiLCJtX21pbnV0ZSIsInRlbXBfbWludXRlIiwicGFyc2VJbnQiLCJkdXJhdGlvbiIsInRvU3RyaW5nIiwidGVtcF9zZWNvbmQiLCJwbGF5RXZlbnQiLCJjX3NlY29uZCIsImNfbWludXRlIiwiY3VycmVudFRpbWUiLCJwbGF5X3RpbWUiLCJmbG9vciIsImRpc3BsYXlfbHJjIiwiYnVmZmVyX3BlcmNlbnQiLCJidWZmZXJlZCIsImVuZCIsImN1cnJlbnRfcGVyY2VudCIsImJ1ZmZlciIsInRyYW5zZm9ybSIsInBsYXl0aW1lIiwibHJjcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImdldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsImFkZCIsImNsYXNzTmFtZSIsIm9mZnNldFRvcCIsImx5cmljYm94Iiwic2Nyb2xsVG9wIiwicmVtb3ZlIiwicmVwbGFjZSIsIlJlZ0V4cCIsInNwbGl0Iiwiam9pbiJdLCJtYXBwaW5ncyI6IkFBSUEsWUFFQUEsS0FBSUMsT0FBT0MsT0FBUSxDQUNuQixJQUFJQyxJQUFLLEdBQUlILE1BQ1hJLEdBQUksYUFDSkMsTUFDRUMsVUFBVyxHQUNYQyxXQUFZLEdBQ1pDLFlBQWEsR0FDYkMsV0FDQUMsV0FBWSxHQUNaQyxhQUFjLEdBQ2RDLGFBQWMsR0FDZEMsV0FBVyxFQUNYQyxZQUFZLEVBQ1pDLFVBQVcsR0FDWEMsVUFBVyxHQUNYQyxZQUFhLEdBQ2JDLFlBQWEsR0FDYkMsUUFBUyxRQUNUQyxVQUFXLFFBQ1hDLFlBQWEsRUFDYkMsUUFBUSxHQUVWQyxRQUFTLFdBQ1BDLEtBQUtDLGFBRVBDLFNBQ0VDLFFBQVMsU0FBaUJDLEdBQ3hCLEdBQUlDLEdBQVUsR0FBSUMsU0FBUSxTQUFVQyxFQUFTQyxHQU03QixRQUFTQyxLQUNHLElBQXBCVCxLQUFLVSxhQUVZLE1BQWhCVixLQUFLVyxPQUNSSixFQUFRUCxL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QVlMLEVBQWlCLElBQ2hFaEYsS0FBS3VCLEtBQUsrRCxTQUFTckQsTUFBTW9ELFVBQVksVUFBWUYsRUFBa0IsS0FFckVKLFlBQWEsU0FBcUJGLEdBRWhDLElBQUssR0FERFUsR0FBT0MsU0FBU0MsdUJBQXVCLE9BQ2xDL0IsRUFBSSxFQUFHQSxFQUFJNkIsRUFBS3hELE9BQVEyQixJQUMzQkEsRUFBSSxFQUFJNkIsRUFBS3hELFNBQ1h3RCxFQUFLN0IsR0FBR2dDLGFBQWEsVUFBWTFGLEtBQUt1QixLQUFLQyxRQUFRb0QsYUFBZTVFLEtBQUt1QixLQUFLQyxRQUFRb0QsWUFBY1csRUFBSzdCLEVBQUksR0FBR2dDLGFBQWEsVUFDekhILEVBQUs3QixHQUFHaUMsVUFDVkosRUFBSzdCLEdBQUdpQyxVQUFVQyxJQUFJLGVBRXRCTCxFQUFLN0IsR0FBR21DLFdBQWEsZUFFbkJOLEVBQUs3QixHQUFHb0MsVUFBWSxNQUN0QjlGLEtBQUt1QixLQUFLd0UsU0FBU0MsVUFBWVQsRUFBSzdCLEdBQUdvQyxVQUFZLE1BR2pEUCxFQUFLN0IsR0FBR2lDLFVBQ1ZKLEVBQUs3QixHQUFHaUMsVUFBVU0sT0FBTyxlQUV6QlYsRUFBSzdCLEdBQUdtQyxVQUFZTixFQUFLN0IsR0FBR21DLFVBQVVLLFFBQVEsR0FBSUMsUUFBTyxVQUFZLGNBQWNDLE1BQU0sS0FBS0MsS0FBSyxLQUFPLFVBQVcsTUFBTyxLQUtoSWQsR0FBS0EsRUFBS3hELE9BQVMsR0FBRzJELGFBQWEsVUFBWTFGLEtBQUt1QixLQUFLQyxRQUFRb0QsY0FDL0RXLEVBQUtBLEVBQUt4RCxPQUFTLEdBQUc0RCxVQUN4QkosRUFBS0EsRUFBS3hELE9BQVMsR0FBRzRELFVBQVVDLElBQUksZUFFcENMLEVBQUtBLEVBQUt4RCxPQUFTLEdBQUc4RCxXQUFhIiwiZmlsZSI6InBsYXllci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiB5UGxheWVyXG4qIEF1dGhvciB5YW5nemoxOTkyXG4qL1xuXCJ1c2Ugc3RyaWN0XCI7XG5cblZ1ZS5jb25maWcuZGVidWcgPSB0cnVlO1xudmFyIHZtID0gbmV3IFZ1ZSh7XG4gIGVsOiAnI3ltLXBsYXllcicsXG4gIGRhdGE6IHtcbiAgICBzb25nX25hbWU6ICcnLFxuICAgIGFsYnVtX25hbWU6ICcnLFxuICAgIGFydGlzdF9uYW1lOiAnJyxcbiAgICBzaG93bHJjOiBbXSxcbiAgICBtdXNpY0FycmF5OiAnJyxcbiAgICBwbGF5aW5nTXVzaWM6ICcnLFxuICAgIHBsYXlpbmdJbmRleDogJycsXG4gICAgaGF2ZXZvaWNlOiB0cnVlLFxuICAgIHBsYXlTdGF0dXM6IHRydWUsXG4gICAgcHJldkluZGV4OiAnJyxcbiAgICBwcmV2TXVzaWM6ICcnLFxuICAgIGZvbGxvd0luZGV4OiAnJyxcbiAgICBmb2xsb3dNdXNpYzogJycsXG4gICAgY3VydGltZTogJzAwOjAwJyxcbiAgICBtdXNpY3RpbWU6ICcwMDowMCcsXG4gICAgcGxheWluZ3RpbWU6IDAsXG4gICAgbG9hZGVkOiBmYWxzZVxuICB9LFxuICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge1xuICAgIHRoaXMubG9hZE11c2ljKCk7XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBnZXRKU09OOiBmdW5jdGlvbiBnZXRKU09OKHVybCkge1xuICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciBjbGllbnQgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgY2xpZW50Lm9wZW4oXCJHRVRcIiwgdXJsKTtcbiAgICAgICAgY2xpZW50Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7XG4gICAgICAgIGNsaWVudC5yZXNwb25zZVR5cGUgPSBcImpzb25cIjtcbiAgICAgICAgY2xpZW50LnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgICBjbGllbnQuc2VuZCgpO2Z1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSAhPT0gNCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1pZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcih0aGlzLnN0YXR1c1RleHQpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH0sXG4gICAgY2hhbmdlUGxheTogZnVuY3Rpb24gY2hhbmdlUGxheSgpIHtcbiAgICAgIGlmICh0aGlzLnBsYXlTdGF0dXMgPT0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5wbGF5U3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIucGxheSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wbGF5U3RhdHVzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuJGVscy5tcGxheWVyLnBhdXNlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBsb2FkTXVzaWM6IGZ1bmN0aW9uIGxvYWRNdXNpYyhpZCkge1xuICAgICAgdmFyIHVybCA9IGlkID8gJ2dldFNvbmcucGhwP2lkPScgKyBpZCA6ICdnZXRTb25nLnBocD9pZD0wJztcbiAgICAgIHRoaXMuZ2V0SlNPTih1cmwpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdm0ubXVzaWNBcnJheSA9IGRhdGEudHJhY2tzO1xuICAgICAgICB2bS5tdXNpY0xlbmd0aCA9IHZtLm11c2ljQXJyYXkubGVuZ3RoO1xuICAgICAgICB2bS4kZWxzLmFsYnVtLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIGRhdGEuY292ZXIgKyAnKSc7XG4gICAgICAgIGlmIChkYXRhLmxyYyAhPSBcIm5vXCIpIHtcbiAgICAgICAgICB2bS5zaG93bHJjID0gZGF0YS5scmM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IHsgXCIwXCI6IFwi5pqC5peg5q2M6K+NXCIgfTtcbiAgICAgICAgfVxuICAgICAgICB2bS5zb25nX25hbWUgPSBkYXRhLm11c2ljX25hbWU7XG4gICAgICAgIHZtLmFsYnVtX25hbWUgPSBkYXRhLmFsYnVtX25hbWU7XG4gICAgICAgIHZtLmFydGlzdF9uYW1lID0gZGF0YS5hcnRpc3RzO1xuICAgICAgICB2bS5wbGF5aW5nTXVzaWMgPSBkYXRhLmlkO1xuICAgICAgICB2bS5wbGF5aW5nSW5kZXggPSBkYXRhLmluZGV4O1xuICAgICAgICB2bS5sb2FkZWQgPSB0cnVlO1xuICAgICAgICB2bS4kZWxzLm1wbGF5ZXIuc2V0QXR0cmlidXRlKFwic3JjXCIsIGRhdGEubXAzKTtcbiAgICAgICAgdm0uJGVscy5tcGxheWVyLnZvbHVtbiA9IDAuNTtcbiAgICAgICAgdm0uJGVscy5tcGxheWVyLnBsYXkoKTtcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBhbGVydCgn5pyN5Yqh5Zmo6YCa5L+h5byC5bi4Jyk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGNoYW5nZVZvaWNlOiBmdW5jdGlvbiBjaGFuZ2VWb2ljZShldmVudCkge1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIudm9sdW1lID0gZXZlbnQudGFyZ2V0LnZhbHVlIC8gMTA7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlID09IDApIHtcbiAgICAgICAgdGhpcy5oYXZldm9pY2UgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGF2ZXZvaWNlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIG5leHRNdXNpYzogZnVuY3Rpb24gbmV4dE11c2ljKCkge1xuICAgICAgdmFyIHJhbmRvbV9pbmRleDtcbiAgICAgIHZhciByYW5kb21faWQ7XG4gICAgICBpZiAoIXRoaXMuZm9sbG93TXVzaWMgfHwgIXRoaXMuZm9sbG93SW5kZXgpIHtcbiAgICAgICAgcmFuZG9tX2luZGV4ID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiB0aGlzLm11c2ljTGVuZ3RoKTtcbiAgICAgICAgcmFuZG9tX2lkID0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uaWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByYW5kb21faW5kZXggPSB0aGlzLmZvbGxvd0luZGV4O1xuICAgICAgICByYW5kb21faWQgPSB0aGlzLmZvbGxvd011c2ljO1xuICAgICAgfVxuICAgICAgdGhpcy5mb2xsb3dJbmRleCA9ICcnO1xuICAgICAgdGhpcy5mb2xsb3dNdXNpYyA9ICcnO1xuICAgICAgdGhpcy5wcmV2TXVzaWMgPSB0aGlzLnBsYXlpbmdNdXNpYztcbiAgICAgIHRoaXMucHJldkluZGV4ID0gdGhpcy5wbGF5aW5nSW5kZXg7XG4gICAgICB0aGlzLnNob3dscmMgPSBbXTtcbiAgICAgIHRoaXMuZ2V0SlNPTignZ2V0THlyaWNzLnBocD9pZD0nICsgcmFuZG9tX2lkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGlmIChkYXRhLmxyYyAhPSBcIm5vXCIpIHtcbiAgICAgICAgICB2bS5zaG93bHJjID0gZGF0YS5scmM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IHsgXCIwXCI6IFwi5pqC5peg5q2M6K+NXCIgfTtcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGFsZXJ0KCfmnI3liqHlmajpgJrkv6HlvILluLgnKTtcbiAgICAgIH0pO1xuICAgICAgdmFyIGFydGlzdHNfbmFtZSA9ICcnO1xuICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLm11c2ljQXJyYXlbcmFuZG9tX2luZGV4XS5hcnRpc3RzKSB7XG4gICAgICAgIGFydGlzdHNfbmFtZSArPSB0aGlzLm11c2ljQXJyYXlbcmFuZG9tX2luZGV4XS5hcnRpc3RzW2ldLm5hbWU7XG4gICAgICB9XG4gICAgICB0aGlzLiRlbHMuYWxidW0uc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uYWxidW0ucGljVXJsICsgJyknO1xuICAgICAgdGhpcy5wbGF5aW5nTXVzaWMgPSB0aGlzLm11c2ljQXJyYXlbcmFuZG9tX2luZGV4XS5pZDtcbiAgICAgIHRoaXMucGxheWluZ0luZGV4ID0gcmFuZG9tX2luZGV4O1xuICAgICAgdGhpcy5zb25nX25hbWUgPSB0aGlzLm11c2ljQXJyYXlbcmFuZG9tX2luZGV4XS5uYW1lO1xuICAgICAgdGhpcy5hbGJ1bV9uYW1lID0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uYWxidW0ubmFtZTtcbiAgICAgIHRoaXMuYXJ0aXN0X25hbWUgPSBhcnRpc3RzX25hbWU7XG4gICAgICB2YXIgbXAzX2FkZHJlc3MgPSB0aGlzLm11c2ljQXJyYXlbcmFuZG9tX2luZGV4XS5tcDNVcmw7XG4gICAgICB0aGlzLiRlbHMubXBsYXllci5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbXAzX2FkZHJlc3MpO1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIudm9sdW1uID0gMC41O1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIucGxheSgpO1xuICAgICAgdGhpcy5wbGF5U3RhdHVzID0gdHJ1ZTtcbiAgICB9LFxuICAgIGJhY2tNdXNpYzogZnVuY3Rpb24gYmFja011c2ljKCkge1xuICAgICAgaWYgKCF0aGlzLnByZXZNdXNpYyB8fCAhdGhpcy5wcmV2SW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdGhpcy5mb2xsb3dJbmRleCA9IHRoaXMucGxheWluZ0luZGV4O1xuICAgICAgdGhpcy5mb2xsb3dNdXNpYyA9IHRoaXMucGxheWluZ011c2ljO1xuICAgICAgdGhpcy5zaG93bHJjID0gW107XG4gICAgICB0aGlzLmdldEpTT04oJ2dldEx5cmljcy5waHA/aWQ9JyArIHRoaXMucHJldk11c2ljKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGlmIChkYXRhLmxyYyAhPSBcIm5vXCIpIHtcbiAgICAgICAgICB2bS5zaG93bHJjID0gZGF0YS5scmM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IHsgXCIwXCI6IFwi5pqC5peg5q2M6K+NXCIgfTtcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGFsZXJ0KCfmnI3liqHlmajpgJrkv6HlvILluLgnKTtcbiAgICAgIH0pO1xuICAgICAgdmFyIGFydGlzdHNfbmFtZSA9ICcnO1xuICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLmFydGlzdHMpIHtcbiAgICAgICAgYXJ0aXN0c19uYW1lICs9IHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0uYXJ0aXN0c1tpXS5uYW1lO1xuICAgICAgfVxuICAgICAgdGhpcy4kZWxzLmFsYnVtLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0uYWxidW0ucGljVXJsICsgJyknO1xuICAgICAgdGhpcy5wbGF5aW5nTXVzaWMgPSB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLmlkO1xuICAgICAgdGhpcy5wbGF5aW5nSW5kZXggPSB0aGlzLnByZXZJbmRleDtcbiAgICAgIHRoaXMuc29uZ19uYW1lID0gdGhpcy5tdXNpY0FycmF5W3RoaXMucHJldkluZGV4XS5uYW1lO1xuICAgICAgdGhpcy5hbGJ1bV9uYW1lID0gdGhpcy5tdXNpY0FycmF5W3RoaXMucHJldkluZGV4XS5hbGJ1bS5uYW1lO1xuICAgICAgdGhpcy5hcnRpc3RfbmFtZSA9IGFydGlzdHNfbmFtZTtcbiAgICAgIHZhciBtcDNfYWRkcmVzcyA9IHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0ubXAzVXJsO1xuICAgICAgdGhpcy5wcmV2TXVzaWMgPSAnJztcbiAgICAgIHRoaXMucHJldkluZGV4ID0gJyc7XG4gICAgICB0aGlzLiRlbHMubXBsYXllci5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbXAzX2FkZHJlc3MpO1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIudm9sdW1uID0gMC41O1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIucGxheSgpO1xuICAgICAgdGhpcy5wbGF5U3RhdHVzID0gdHJ1ZTtcbiAgICB9LFxuICAgIGdldE11c2ljOiBmdW5jdGlvbiBnZXRNdXNpYygpIHtcbiAgICAgIHZhciBtX3NlY29uZCA9IHVuZGVmaW5lZCxcbiAgICAgICAgICBtX21pbnV0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIHZhciB0ZW1wX21pbnV0ZSA9IHBhcnNlSW50KHRoaXMuJGVscy5tcGxheWVyLmR1cmF0aW9uIC8gNjApO1xuICAgICAgaWYgKHRlbXBfbWludXRlLnRvU3RyaW5nKCkubGVuZ3RoID4gMSkge1xuICAgICAgICBtX21pbnV0ZSA9ICcnICsgdGVtcF9taW51dGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtX21pbnV0ZSA9ICcwJyArIHRlbXBfbWludXRlO1xuICAgICAgfVxuICAgICAgdmFyIHRlbXBfc2Vjb25kID0gcGFyc2VJbnQodGhpcy4kZWxzLm1wbGF5ZXIuZHVyYXRpb24gJSA2MCk7XG4gICAgICBpZiAodGVtcF9zZWNvbmQudG9TdHJpbmcoKS5sZW5ndGggPiAxKSB7XG4gICAgICAgIG1fc2Vjb25kID0gJycgKyB0ZW1wX3NlY29uZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1fc2Vjb25kID0gJzAnICsgdGVtcF9zZWNvbmQ7XG4gICAgICB9XG4gICAgICB0aGlzLm11c2ljdGltZSA9IG1fbWludXRlICsgJzonICsgbV9zZWNvbmQ7XG4gICAgfSxcbiAgICBwbGF5RXZlbnQ6IGZ1bmN0aW9uIHBsYXlFdmVudCgpIHtcbiAgICAgIHZhciBjX3NlY29uZCA9IHVuZGVmaW5lZCxcbiAgICAgICAgICBjX21pbnV0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIHZhciB0ZW1wX21pbnV0ZSA9IHBhcnNlSW50KHRoaXMuJGVscy5tcGxheWVyLmN1cnJlbnRUaW1lIC8gNjApO1xuICAgICAgaWYgKHRlbXBfbWludXRlLnRvU3RyaW5nKCkubGVuZ3RoID4gMSkge1xuICAgICAgICBjX21pbnV0ZSA9ICcnICsgdGVtcF9taW51dGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjX21pbnV0ZSA9ICcwJyArIHRlbXBfbWludXRlO1xuICAgICAgfVxuICAgICAgdmFyIHRlbXBfc2Vjb25kID0gcGFyc2VJbnQodGhpcy4kZWxzLm1wbGF5ZXIuY3VycmVudFRpbWUgJSA2MCk7XG4gICAgICBpZiAodGVtcF9zZWNvbmQudG9TdHJpbmcoKS5sZW5ndGggPiAxKSB7XG4gICAgICAgIGNfc2Vjb25kID0gJycgKyB0ZW1wX3NlY29uZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNfc2Vjb25kID0gJzAnICsgdGVtcF9zZWNvbmQ7XG4gICAgICB9XG4gICAgICB0aGlzLmN1cnRpbWUgPSBjX21pbnV0ZSArICc6JyArIGNfc2Vjb25kO1xuICAgICAgdmFyIHBsYXlfdGltZSA9IE1hdGguZmxvb3IodGhpcy4kZWxzLm1wbGF5ZXIuY3VycmVudFRpbWUpLnRvU3RyaW5nKCk7XG4gICAgICB0aGlzLmRpc3BsYXlfbHJjKHBsYXlfdGltZSk7XG4gICAgICB2YXIgYnVmZmVyX3BlcmNlbnQgPSB0aGlzLiRlbHMubXBsYXllci5idWZmZXJlZC5lbmQoMCkgLyB0aGlzLiRlbHMubXBsYXllci5kdXJhdGlvbjtcbiAgICAgIHZhciBjdXJyZW50X3BlcmNlbnQgPSB0aGlzLiRlbHMubXBsYXllci5jdXJyZW50VGltZSAvIHRoaXMuJGVscy5tcGxheWVyLmR1cmF0aW9uO1xuICAgICAgdGhpcy4kZWxzLmJ1ZmZlci5zdHlsZS50cmFuc2Zvcm0gPSBcInNjYWxlWChcIiArIGJ1ZmZlcl9wZXJjZW50ICsgXCIpXCI7XG4gICAgICB0aGlzLiRlbHMucGxheXRpbWUuc3R5bGUudHJhbnNmb3JtID0gXCJzY2FsZVgoXCIgKyBjdXJyZW50X3BlcmNlbnQgKyBcIilcIjtcbiAgICB9LFxuICAgIGRpc3BsYXlfbHJjOiBmdW5jdGlvbiBkaXNwbGF5X2xyYyhwbGF5X3RpbWUpIHtcbiAgICAgIHZhciBscmNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbHJjJyk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxyY3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGkgKyAxIDwgbHJjcy5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAobHJjc1tpXS5nZXRBdHRyaWJ1dGUoJ2R0aW1lJykgPD0gdGhpcy4kZWxzLm1wbGF5ZXIuY3VycmVudFRpbWUgJiYgdGhpcy4kZWxzLm1wbGF5ZXIuY3VycmVudFRpbWUgPCBscmNzW2kgKyAxXS5nZXRBdHRyaWJ1dGUoJ2R0aW1lJykpIHtcbiAgICAgICAgICAgIGlmIChscmNzW2ldLmNsYXNzTGlzdCkge1xuICAgICAgICAgICAgICBscmNzW2ldLmNsYXNzTGlzdC5hZGQoJ2xyYy1jdXJyZW50Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBscmNzW2ldLmNsYXNzTmFtZSArPSAnICcgKyAnbHJjLWN1cnJlbnQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxyY3NbaV0ub2Zmc2V0VG9wID4gMjAwKSB7XG4gICAgICAgICAgICAgIHRoaXMuJGVscy5seXJpY2JveC5zY3JvbGxUb3AgPSBscmNzW2ldLm9mZnNldFRvcCAtIDIwMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGxyY3NbaV0uY2xhc3NMaXN0KSB7XG4gICAgICAgICAgICAgIGxyY3NbaV0uY2xhc3NMaXN0LnJlbW92ZSgnbHJjLWN1cnJlbnQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxyY3NbaV0uY2xhc3NOYW1lID0gbHJjc1tpXS5jbGFzc05hbWUucmVwbGFjZShuZXcgUmVnRXhwKCcoXnxcXFxcYiknICsgJ2xyYy1jdXJyZW50Jy5zcGxpdCgnICcpLmpvaW4oJ3wnKSArICcoXFxcXGJ8JCknLCAnZ2knKSwgJyAnKTsgLy9pZThcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChscmNzW2xyY3MubGVuZ3RoIC0gMV0uZ2V0QXR0cmlidXRlKCdkdGltZScpIDw9IHRoaXMuJGVscy5tcGxheWVyLmN1cnJlbnRUaW1lKSB7XG4gICAgICAgIGlmIChscmNzW2xyY3MubGVuZ3RoIC0gMV0uY2xhc3NMaXN0KSB7XG4gICAgICAgICAgbHJjc1tscmNzLmxlbmd0aCAtIDFdLmNsYXNzTGlzdC5hZGQoJ2xyYy1jdXJyZW50Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbHJjc1tscmNzLmxlbmd0aCAtIDFdLmNsYXNzTmFtZSArPSAnICcgKyAnbHJjLWN1cnJlbnQnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
