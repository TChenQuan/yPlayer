"use strict";Vue.config.debug=!0;var vm=new Vue({el:"#ym-player",data:{song_name:"",album_name:"",artist_name:"",showlrc:[],musicArray:"",playingMusic:"",playingIndex:"",havevoice:!0,playStatus:!0,prevIndex:"",prevMusic:"",followIndex:"",followMusic:"",curtime:"00:00",musictime:"00:00",playingtime:0,loaded:!1},created:function(){this.loadMusic()},methods:{getJSON:function(t){var s=new Promise(function(s,e){function i(){4===this.readyState&&(200===this.status?s(this.response):e(new Error(this.statusText)))}var r=new XMLHttpRequest;r.open("GET",t),r.onreadystatechange=i,r.responseType="json",r.setRequestHeader("Accept","application/json"),r.send()});return s},changePlay:function(){0==this.playStatus?(this.playStatus=!0,this.$els.mplayer.play()):(this.playStatus=!1,this.$els.mplayer.pause())},loadMusic:function(t){var s=t?"getSong.php?id="+t:"getSong.php?id=0";this.getJSON(s).then(function(t){vm.musicArray=t.tracks,vm.musicLength=vm.musicArray.length,vm.$els.album.style.backgroundImage="url("+t.cover+")","no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"},vm.song_name=t.music_name,vm.album_name=t.album_name,vm.artist_name=t.artists,vm.playingMusic=t.id,vm.playingIndex=t.index,vm.loaded=!0,vm.$els.mplayer.setAttribute("src",t.mp3),vm.$els.mplayer.volumn=.5,vm.$els.mplayer.play()},function(t){alert("服务器通信异常")})},changeVoice:function(t){this.$els.mplayer.volume=t.target.value/10,0==t.target.value?this.havevoice=!1:this.havevoice=!0},nextMusic:function(){var t,s;this.followMusic&&this.followIndex?(t=this.followIndex,s=this.followMusic):(t=Math.ceil(Math.random()*this.musicLength),s=this.musicArray[t].id),this.followIndex="",this.followMusic="",this.prevMusic=this.playingMusic,this.prevIndex=this.playingIndex,this.showlrc=[],this.getJSON("getLyrics.php?id="+s).then(function(t){"no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"}},function(t){alert("服务器通信异常")});var e="";for(var i in this.musicArray[t].artists)e+=this.musicArray[t].artists[i].name;this.$els.album.style.backgroundImage="url("+this.musicArray[t].album.picUrl+")",this.playingMusic=this.musicArray[t].id,this.playingIndex=t,this.song_name=this.musicArray[t].name,this.album_name=this.musicArray[t].album.name,this.artist_name=e;var r=this.musicArray[t].mp3Url;this.$els.mplayer.setAttribute("src",r),this.$els.mplayer.volumn=.5,this.$els.mplayer.play(),this.playStatus=!0},backMusic:function(){if(!this.prevMusic||!this.prevIndex)return!1;this.followIndex=this.playingIndex,this.followMusic=this.playingMusic,this.showlrc=[],this.getJSON("getLyrics.php?id="+this.prevMusic).then(function(t){"no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"}},function(t){alert("服务器通信异常")});var t="";for(var s in this.musicArray[this.prevIndex].artists)t+=this.musicArray[this.prevIndex].artists[s].name;this.$els.album.style.backgroundImage="url("+this.musicArray[this.prevIndex].album.picUrl+")",this.playingMusic=this.musicArray[this.prevIndex].id,this.playingIndex=this.prevIndex,this.song_name=this.musicArray[this.prevIndex].name,this.album_name=this.musicArray[this.prevIndex].album.name,this.artist_name=t;var e=this.musicArray[this.prevIndex].mp3Url;this.prevMusic="",this.prevIndex="",this.$els.mplayer.setAttribute("src",e),this.$els.mplayer.volumn=.5,this.$els.mplayer.play(),this.playStatus=!0},getMusic:function(){var t=void 0,s=void 0,e=parseInt(this.$els.mplayer.duration/60);s=e.toString().length>1?""+e:"0"+e;var i=parseInt(this.$els.mplayer.duration%60);t=i.toString().length>1?""+i:"0"+i,this.musictime=s+":"+t},playEvent:function(){var t=void 0,s=void 0,e=parseInt(this.$els.mplayer.currentTime/60);s=e.toString().length>1?""+e:"0"+e;var i=parseInt(this.$els.mplayer.currentTime%60);t=i.toString().length>1?""+i:"0"+i,this.curtime=s+":"+t;var r=Math.floor(this.$els.mplayer.currentTime).toString();this.display_lrc(r);var a=this.$els.mplayer.buffered.end(0)/this.$els.mplayer.duration,l=this.$els.mplayer.currentTime/this.$els.mplayer.duration;vm.$els.buffer.style.transform="scaleX("+a+")",vm.$els.playtime.style.transform="scaleX("+l+")"},display_lrc:function(t){for(var s=document.getElementsByClassName("lrc"),e=0;e<s.length;e++);}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYXllci5qcyJdLCJuYW1lcyI6WyJWdWUiLCJjb25maWciLCJkZWJ1ZyIsInZtIiwiZWwiLCJkYXRhIiwic29uZ19uYW1lIiwiYWxidW1fbmFtZSIsImFydGlzdF9uYW1lIiwic2hvd2xyYyIsIm11c2ljQXJyYXkiLCJwbGF5aW5nTXVzaWMiLCJwbGF5aW5nSW5kZXgiLCJoYXZldm9pY2UiLCJwbGF5U3RhdHVzIiwicHJldkluZGV4IiwicHJldk11c2ljIiwiZm9sbG93SW5kZXgiLCJmb2xsb3dNdXNpYyIsImN1cnRpbWUiLCJtdXNpY3RpbWUiLCJwbGF5aW5ndGltZSIsImxvYWRlZCIsImNyZWF0ZWQiLCJ0aGlzIiwibG9hZE11c2ljIiwibWV0aG9kcyIsImdldEpTT04iLCJ1cmwiLCJwcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJoYW5kbGVyIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3BvbnNlIiwiRXJyb3IiLCJzdGF0dXNUZXh0IiwiY2xpZW50IiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVzcG9uc2VUeXBlIiwic2V0UmVxdWVzdEhlYWRlciIsInNlbmQiLCJjaGFuZ2VQbGF5IiwiJGVscyIsIm1wbGF5ZXIiLCJwbGF5IiwicGF1c2UiLCJpZCIsInRoZW4iLCJ0cmFja3MiLCJtdXNpY0xlbmd0aCIsImxlbmd0aCIsImFsYnVtIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJjb3ZlciIsImxyYyIsIjAiLCJtdXNpY19uYW1lIiwiYXJ0aXN0cyIsImluZGV4Iiwic2V0QXR0cmlidXRlIiwibXAzIiwidm9sdW1uIiwiZXJyb3IiLCJhbGVydCIsImNoYW5nZVZvaWNlIiwiZXZlbnQiLCJ2b2x1bWUiLCJ0YXJnZXQiLCJ2YWx1ZSIsIm5leHRNdXNpYyIsInJhbmRvbV9pbmRleCIsInJhbmRvbV9pZCIsIk1hdGgiLCJjZWlsIiwicmFuZG9tIiwiYXJ0aXN0c19uYW1lIiwiaSIsIm5hbWUiLCJwaWNVcmwiLCJtcDNfYWRkcmVzcyIsIm1wM1VybCIsImJhY2tNdXNpYyIsImdldE11c2ljIiwibV9zZWNvbmQiLCJ1bmRlZmluZWQiLCJtX21pbnV0ZSIsInRlbXBfbWludXRlIiwicGFyc2VJbnQiLCJkdXJhdGlvbiIsInRvU3RyaW5nIiwidGVtcF9zZWNvbmQiLCJwbGF5RXZlbnQiLCJjX3NlY29uZCIsImNfbWludXRlIiwiY3VycmVudFRpbWUiLCJwbGF5X3RpbWUiLCJmbG9vciIsImRpc3BsYXlfbHJjIiwiYnVmZmVyX3BlcmNlbnQiLCJidWZmZXJlZCIsImVuZCIsImN1cnJlbnRfcGVyY2VudCIsImJ1ZmZlciIsInRyYW5zZm9ybSIsInBsYXl0aW1lIiwibHJjcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSJdLCJtYXBwaW5ncyI6IkFBSUEsWUFFQUEsS0FBSUMsT0FBT0MsT0FBUSxDQUNuQixJQUFJQyxJQUFLLEdBQUlILE1BQ1hJLEdBQUksYUFDSkMsTUFDRUMsVUFBVyxHQUNYQyxXQUFZLEdBQ1pDLFlBQWEsR0FDYkMsV0FDQUMsV0FBWSxHQUNaQyxhQUFjLEdBQ2RDLGFBQWMsR0FDZEMsV0FBVyxFQUNYQyxZQUFZLEVBQ1pDLFVBQVcsR0FDWEMsVUFBVyxHQUNYQyxZQUFhLEdBQ2JDLFlBQWEsR0FDYkMsUUFBUyxRQUNUQyxVQUFXLFFBQ1hDLFlBQWEsRUFDYkMsUUFBUSxHQUVWQyxRQUFTLFdBQ1BDLEtBQUtDLGFBRVBDLFNBQ0VDLFFBQVMsU0FBaUJDLEdBQ3hCLEdBQUlDLEdBQVUsR0FBSUMsU0FBUSxTQUFVQyxFQUFTQyxHQU03QixRQUFTQyxLQUNHLElBQXBCVCxLQUFLVSxhQUVZLE1BQWhCVixLQUFLVyxPQUNSSixFQUFRUCxLQUFLWSxVQUViSixFQUFPLEdBQUlLLE9BQU1iLEtBQUtjLGNBWDFCLEdBQUlDLEdBQVMsR0FBSUMsZUFDakJELEdBQU9FLEtBQUssTUFBT2IsR0FDbkJXLEVBQU9HLG1CQUFxQlQsRUFDNUJNLEVBQU9JLGFBQWUsT0FDdEJKLEVBQU9LLGlCQUFpQixTQUFVLG9CQUNsQ0wsRUFBT00sUUFVVCxPQUFPaEIsSUFFVGlCLFdBQVksV0FDYSxHQUFuQnRCLEtBQUtWLFlBQ1BVLEtBQUtWLFlBQWEsRUFDbEJVLEtBQUt1QixLQUFLQyxRQUFRQyxTQUVsQnpCLEtBQUtWLFlBQWEsRUFDbEJVLEtBQUt1QixLQUFLQyxRQUFRRSxVQUd0QnpCLFVBQVcsU0FBbUIwQixHQUM1QixHQUFJdkIsR0FBTXVCLEVBQUssa0JBQW9CQSxFQUFLLGtCQUN4QzNCLE1BQUtHLFFBQVFDLEdBQUt3QixLQUFLLFNBQVUvQyxHQUMvQkYsR0FBR08sV0FBYUwsRUFBS2dELE9BQ3JCbEQsR0FBR21ELFlBQWNuRCxHQUFHTyxXQUFXNkMsT0FDL0JwRCxHQUFHNEMsS0FBS1MsTUFBTUMsTUFBTUMsZ0JBQWtCLE9BQVNyRCxFQUFLc0QsTUFBUSxJQUM1QyxNQUFadEQsRUFBS3VELElBQ1B6RCxHQUFHTSxRQUFVSixFQUFLdUQsSUFFbEJ6RCxHQUFHTSxTQUFZb0QsRUFBSyxRQUV0QjFELEdBQUdHLFVBQVlELEVBQUt5RCxXQUNwQjNELEdBQUdJLFdBQWFGLEVBQUtFLFdBQ3JCSixHQUFHSyxZQUFjSCxFQUFLMEQsUUFDdEI1RCxHQUFHUSxhQUFlTixFQUFLOEMsR0FDdkJoRCxHQUFHUyxhQUFlUCxFQUFLMkQsTUFDdkI3RCxHQUFHbUIsUUFBUyxFQUNabkIsR0FBRzRDLEtBQUtDLFFBQVFpQixhQUFhLE1BQU81RCxFQUFLNkQsS0FDekMvRCxHQUFHNEMsS0FBS0MsUUFBUW1CLE9BQVMsR0FDekJoRSxHQUFHNEMsS0FBS0MsUUFBUUMsUUFDZixTQUFVbUIsR0FDWEMsTUFBTSxjQUdWQyxZQUFhLFNBQXFCQyxHQUNoQy9DLEtBQUt1QixLQUFLQyxRQUFRd0IsT0FBU0QsRUFBTUUsT0FBT0MsTUFBUSxHQUN0QixHQUF0QkgsRUFBTUUsT0FBT0MsTUFDZmxELEtBQUtYLFdBQVksRUFFakJXLEtBQUtYLFdBQVksR0FHckI4RCxVQUFXLFdBQ1QsR0FBSUMsR0FDQUMsQ0FDQ3JELE1BQUtOLGFBQWdCTSxLQUFLUCxhQUk3QjJELEVBQWVwRCxLQUFLUCxZQUNwQjRELEVBQVlyRCxLQUFLTixjQUpqQjBELEVBQWVFLEtBQUtDLEtBQUtELEtBQUtFLFNBQVd4RCxLQUFLOEIsYUFDOUN1QixFQUFZckQsS0FBS2QsV0FBV2tFLEdBQWN6QixJQUs1QzNCLEtBQUtQLFlBQWMsR0FDbkJPLEtBQUtOLFlBQWMsR0FDbkJNLEtBQUtSLFVBQVlRLEtBQUtiLGFBQ3RCYSxLQUFLVCxVQUFZUyxLQUFLWixhQUN0QlksS0FBS2YsV0FDTGUsS0FBS0csUUFBUSxvQkFBc0JrRCxHQUFXekIsS0FBSyxTQUFVL0MsR0FDM0MsTUFBWkEsRUFBS3VELElBQ1B6RCxHQUFHTSxRQUFVSixFQUFLdUQsSUFFbEJ6RCxHQUFHTSxTQUFZb0QsRUFBSyxTQUVyQixTQUFVTyxHQUNYQyxNQUFNLFlBRVIsSUFBSVksR0FBZSxFQUNuQixLQUFLLEdBQUlDLEtBQUsxRCxNQUFLZCxXQUFXa0UsR0FBY2IsUUFDMUNrQixHQUFnQnpELEtBQUtkLFdBQVdrRSxHQUFjYixRQUFRbUIsR0FBR0MsSUFFM0QzRCxNQUFLdUIsS0FBS1MsTUFBTUMsTUFBTUMsZ0JBQWtCLE9BQVNsQyxLQUFLZCxXQUFXa0UsR0FBY3BCLE1BQU00QixPQUFTLElBQzlGNUQsS0FBS2IsYUFBZWEsS0FBS2QsV0FBV2tFLEdBQWN6QixHQUNsRDNCLEtBQUtaLGFBQWVnRSxFQUNwQnBELEtBQUtsQixVQUFZa0IsS0FBS2QsV0FBV2tFLEdBQWNPLEtBQy9DM0QsS0FBS2pCLFdBQWFpQixLQUFLZCxXQUFXa0UsR0FBY3BCLE1BQU0yQixLQUN0RDNELEtBQUtoQixZQUFjeUUsQ0FDbkIsSUFBSUksR0FBYzdELEtBQUtkLFdBQVdrRSxHQUFjVSxNQUNoRDlELE1BQUt1QixLQUFLQyxRQUFRaUIsYUFBYSxNQUFPb0IsR0FDdEM3RCxLQUFLdUIsS0FBS0MsUUFBUW1CLE9BQVMsR0FDM0IzQyxLQUFLdUIsS0FBS0MsUUFBUUMsT0FDbEJ6QixLQUFLVixZQUFhLEdBRXBCeUUsVUFBVyxXQUNULElBQUsvRCxLQUFLUixZQUFjUSxLQUFLVCxVQUMzQixPQUFPLENBRVRTLE1BQUtQLFlBQWNPLEtBQUtaLGFBQ3hCWSxLQUFLTixZQUFjTSxLQUFLYixhQUN4QmEsS0FBS2YsV0FDTGUsS0FBS0csUUFBUSxvQkFBc0JILEtBQUtSLFdBQVdvQyxLQUFLLFNBQVUvQyxHQUNoRCxNQUFaQSxFQUFLdUQsSUFDUHpELEdBQUdNLFFBQVVKLEVBQUt1RCxJQUVsQnpELEdBQUdNLFNBQVlvRCxFQUFLLFNBRXJCLFNBQVVPLEdBQ1hDLE1BQU0sWUFFUixJQUFJWSxHQUFlLEVBQ25CLEtBQUssR0FBSUMsS0FBSzFELE1BQUtkLFdBQVdjLEtBQUtULFdBQVdnRCxRQUM1Q2tCLEdBQWdCekQsS0FBS2QsV0FBV2MsS0FBS1QsV0FBV2dELFFBQVFtQixHQUFHQyxJQUU3RDNELE1BQUt1QixLQUFLUyxNQUFNQyxNQUFNQyxnQkFBa0IsT0FBU2xDLEtBQUtkLFdBQVdjLEtBQUtULFdBQVd5QyxNQUFNNEIsT0FBUyxJQUNoRzVELEtBQUtiLGFBQWVhLEtBQUtkLFdBQVdjLEtBQUtULFdBQVdvQyxHQUNwRDNCLEtBQUtaLGFBQWVZLEtBQUtULFVBQ3pCUyxLQUFLbEIsVUFBWWtCLEtBQUtkLFdBQVdjLEtBQUtULFdBQVdvRSxLQUNqRDNELEtBQUtqQixXQUFhaUIsS0FBS2QsV0FBV2MsS0FBS1QsV0FBV3lDLE1BQU0yQixLQUN4RDNELEtBQUtoQixZQUFjeUUsQ0FDbkIsSUFBSUksR0FBYzdELEtBQUtkLFdBQVdjLEtBQUtULFdBQVd1RSxNQUNsRDlELE1BQUtSLFVBQVksR0FDakJRLEtBQUtULFVBQVksR0FDakJTLEtBQUt1QixLQUFLQyxRQUFRaUIsYUFBYSxNQUFPb0IsR0FDdEM3RCxLQUFLdUIsS0FBS0MsUUFBUW1CLE9BQVMsR0FDM0IzQyxLQUFLdUIsS0FBS0MsUUFBUUMsT0FDbEJ6QixLQUFLVixZQUFhLEdBRXBCMEUsU0FBVSxXQUNSLEdBQUlDLEdBQVdDLE9BQ1hDLEVBQVdELE9BQ1hFLEVBQWNDLFNBQVNyRSxLQUFLdUIsS0FBS0MsUUFBUThDLFNBQVcsR0FFdERILEdBREVDLEVBQVlHLFdBQVd4QyxPQUFTLEVBQ3ZCLEdBQUtxQyxFQUVMLElBQU1BLENBRW5CLElBQUlJLEdBQWNILFNBQVNyRSxLQUFLdUIsS0FBS0MsUUFBUThDLFNBQVcsR0FFdERMLEdBREVPLEVBQVlELFdBQVd4QyxPQUFTLEVBQ3ZCLEdBQUt5QyxFQUVMLElBQU1BLEVBRW5CeEUsS0FBS0osVUFBWXVFLEVBQVcsSUFBTUYsR0FFcENRLFVBQVcsV0FDVCxHQUFJQyxHQUFXUixPQUNYUyxFQUFXVCxPQUNYRSxFQUFjQyxTQUFTckUsS0FBS3VCLEtBQUtDLFFBQVFvRCxZQUFjLEdBRXpERCxHQURFUCxFQUFZRyxXQUFXeEMsT0FBUyxFQUN2QixHQUFLcUMsRUFFTCxJQUFNQSxDQUVuQixJQUFJSSxHQUFjSCxTQUFTckUsS0FBS3VCLEtBQUtDLFFBQVFvRCxZQUFjLEdBRXpERixHQURFRixFQUFZRCxXQUFXeEMsT0FBUyxFQUN2QixHQUFLeUMsRUFFTCxJQUFNQSxFQUVuQnhFLEtBQUtMLFFBQVVnRixFQUFXLElBQU1ELENBQ2hDLElBQUlHLEdBQVl2QixLQUFLd0IsTUFBTTlFLEtBQUt1QixLQUFLQyxRQUFRb0QsYUFBYUwsVUFDMUR2RSxNQUFLK0UsWUFBWUYsRUFDakIsSUFBSUcsR0FBaUJoRixLQUFLdUIsS0FBS0MsUUFBUXlELFNBQVNDLElBQUksR0FBS2xGLEtBQUt1QixLQUFLQyxRQUFROEMsU0FDdkVhLEVBQWtCbkYsS0FBS3VCLEtBQUtDLFFBQVFvRCxZQUFjNUUsS0FBS3VCLEtBQUtDLFFBQVE4QyxRQUN4RTNGLElBQUc0QyxLQUFLNkQsT0FBT25ELE1BQU1vRCxVQUFZLFVBQVlMLEVBQWlCLElBQzlEckcsR0FBRzRDLEtBQUsrRCxTQUFTckQsTUFBTW9ELFVBQVksVUFBWUYsRUFBa0IsS0FFbkVKLFlBQWEsU0FBcUJGLEdBRWhDLElBQUssR0FERFUsR0FBT0MsU0FBU0MsdUJBQXVCLE9BQ2xDL0IsRUFBSSxFQUFHQSxFQUFJNkIsRUFBS3hELE9BQVEyQiIsImZpbGUiOiJwbGF5ZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiogeVBsYXllclxuKiBBdXRob3IgeWFuZ3pqMTk5MlxuKi9cblwidXNlIHN0cmljdFwiO1xuXG5WdWUuY29uZmlnLmRlYnVnID0gdHJ1ZTtcbnZhciB2bSA9IG5ldyBWdWUoe1xuICBlbDogJyN5bS1wbGF5ZXInLFxuICBkYXRhOiB7XG4gICAgc29uZ19uYW1lOiAnJyxcbiAgICBhbGJ1bV9uYW1lOiAnJyxcbiAgICBhcnRpc3RfbmFtZTogJycsXG4gICAgc2hvd2xyYzogW10sXG4gICAgbXVzaWNBcnJheTogJycsXG4gICAgcGxheWluZ011c2ljOiAnJyxcbiAgICBwbGF5aW5nSW5kZXg6ICcnLFxuICAgIGhhdmV2b2ljZTogdHJ1ZSxcbiAgICBwbGF5U3RhdHVzOiB0cnVlLFxuICAgIHByZXZJbmRleDogJycsXG4gICAgcHJldk11c2ljOiAnJyxcbiAgICBmb2xsb3dJbmRleDogJycsXG4gICAgZm9sbG93TXVzaWM6ICcnLFxuICAgIGN1cnRpbWU6ICcwMDowMCcsXG4gICAgbXVzaWN0aW1lOiAnMDA6MDAnLFxuICAgIHBsYXlpbmd0aW1lOiAwLFxuICAgIGxvYWRlZDogZmFsc2VcbiAgfSxcbiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHtcbiAgICB0aGlzLmxvYWRNdXNpYygpO1xuICB9LFxuICBtZXRob2RzOiB7XG4gICAgZ2V0SlNPTjogZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHtcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgY2xpZW50ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIGNsaWVudC5vcGVuKFwiR0VUXCIsIHVybCk7XG4gICAgICAgIGNsaWVudC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xuICAgICAgICBjbGllbnQucmVzcG9uc2VUeXBlID0gXCJqc29uXCI7XG4gICAgICAgIGNsaWVudC5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICAgICAgY2xpZW50LnNlbmQoKTtmdW5jdGlvbiBoYW5kbGVyKCkge1xuICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgIT09IDQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9aWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IodGhpcy5zdGF0dXNUZXh0KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9LFxuICAgIGNoYW5nZVBsYXk6IGZ1bmN0aW9uIGNoYW5nZVBsYXkoKSB7XG4gICAgICBpZiAodGhpcy5wbGF5U3RhdHVzID09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMucGxheVN0YXR1cyA9IHRydWU7XG4gICAgICAgIHRoaXMuJGVscy5tcGxheWVyLnBsYXkoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGxheVN0YXR1cyA9IGZhbHNlO1xuICAgICAgICB0aGlzLiRlbHMubXBsYXllci5wYXVzZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgbG9hZE11c2ljOiBmdW5jdGlvbiBsb2FkTXVzaWMoaWQpIHtcbiAgICAgIHZhciB1cmwgPSBpZCA/ICdnZXRTb25nLnBocD9pZD0nICsgaWQgOiAnZ2V0U29uZy5waHA/aWQ9MCc7XG4gICAgICB0aGlzLmdldEpTT04odXJsKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHZtLm11c2ljQXJyYXkgPSBkYXRhLnRyYWNrcztcbiAgICAgICAgdm0ubXVzaWNMZW5ndGggPSB2bS5tdXNpY0FycmF5Lmxlbmd0aDtcbiAgICAgICAgdm0uJGVscy5hbGJ1bS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyBkYXRhLmNvdmVyICsgJyknO1xuICAgICAgICBpZiAoZGF0YS5scmMgIT0gXCJub1wiKSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IGRhdGEubHJjO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLnNob3dscmMgPSB7IFwiMFwiOiBcIuaaguaXoOatjOivjVwiIH07XG4gICAgICAgIH1cbiAgICAgICAgdm0uc29uZ19uYW1lID0gZGF0YS5tdXNpY19uYW1lO1xuICAgICAgICB2bS5hbGJ1bV9uYW1lID0gZGF0YS5hbGJ1bV9uYW1lO1xuICAgICAgICB2bS5hcnRpc3RfbmFtZSA9IGRhdGEuYXJ0aXN0cztcbiAgICAgICAgdm0ucGxheWluZ011c2ljID0gZGF0YS5pZDtcbiAgICAgICAgdm0ucGxheWluZ0luZGV4ID0gZGF0YS5pbmRleDtcbiAgICAgICAgdm0ubG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgdm0uJGVscy5tcGxheWVyLnNldEF0dHJpYnV0ZShcInNyY1wiLCBkYXRhLm1wMyk7XG4gICAgICAgIHZtLiRlbHMubXBsYXllci52b2x1bW4gPSAwLjU7XG4gICAgICAgIHZtLiRlbHMubXBsYXllci5wbGF5KCk7XG4gICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgYWxlcnQoJ+acjeWKoeWZqOmAmuS/oeW8guW4uCcpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBjaGFuZ2VWb2ljZTogZnVuY3Rpb24gY2hhbmdlVm9pY2UoZXZlbnQpIHtcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLnZvbHVtZSA9IGV2ZW50LnRhcmdldC52YWx1ZSAvIDEwO1xuICAgICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA9PSAwKSB7XG4gICAgICAgIHRoaXMuaGF2ZXZvaWNlID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhhdmV2b2ljZSA9IHRydWU7XG4gICAgICB9XG4gICAgfSxcbiAgICBuZXh0TXVzaWM6IGZ1bmN0aW9uIG5leHRNdXNpYygpIHtcbiAgICAgIHZhciByYW5kb21faW5kZXg7XG4gICAgICB2YXIgcmFuZG9tX2lkO1xuICAgICAgaWYgKCF0aGlzLmZvbGxvd011c2ljIHx8ICF0aGlzLmZvbGxvd0luZGV4KSB7XG4gICAgICAgIHJhbmRvbV9pbmRleCA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogdGhpcy5tdXNpY0xlbmd0aCk7XG4gICAgICAgIHJhbmRvbV9pZCA9IHRoaXMubXVzaWNBcnJheVtyYW5kb21faW5kZXhdLmlkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmFuZG9tX2luZGV4ID0gdGhpcy5mb2xsb3dJbmRleDtcbiAgICAgICAgcmFuZG9tX2lkID0gdGhpcy5mb2xsb3dNdXNpYztcbiAgICAgIH1cbiAgICAgIHRoaXMuZm9sbG93SW5kZXggPSAnJztcbiAgICAgIHRoaXMuZm9sbG93TXVzaWMgPSAnJztcbiAgICAgIHRoaXMucHJldk11c2ljID0gdGhpcy5wbGF5aW5nTXVzaWM7XG4gICAgICB0aGlzLnByZXZJbmRleCA9IHRoaXMucGxheWluZ0luZGV4O1xuICAgICAgdGhpcy5zaG93bHJjID0gW107XG4gICAgICB0aGlzLmdldEpTT04oJ2dldEx5cmljcy5waHA/aWQ9JyArIHJhbmRvbV9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5scmMgIT0gXCJub1wiKSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IGRhdGEubHJjO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLnNob3dscmMgPSB7IFwiMFwiOiBcIuaaguaXoOatjOivjVwiIH07XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBhbGVydCgn5pyN5Yqh5Zmo6YCa5L+h5byC5bi4Jyk7XG4gICAgICB9KTtcbiAgICAgIHZhciBhcnRpc3RzX25hbWUgPSAnJztcbiAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uYXJ0aXN0cykge1xuICAgICAgICBhcnRpc3RzX25hbWUgKz0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uYXJ0aXN0c1tpXS5uYW1lO1xuICAgICAgfVxuICAgICAgdGhpcy4kZWxzLmFsYnVtLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIHRoaXMubXVzaWNBcnJheVtyYW5kb21faW5kZXhdLmFsYnVtLnBpY1VybCArICcpJztcbiAgICAgIHRoaXMucGxheWluZ011c2ljID0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uaWQ7XG4gICAgICB0aGlzLnBsYXlpbmdJbmRleCA9IHJhbmRvbV9pbmRleDtcbiAgICAgIHRoaXMuc29uZ19uYW1lID0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0ubmFtZTtcbiAgICAgIHRoaXMuYWxidW1fbmFtZSA9IHRoaXMubXVzaWNBcnJheVtyYW5kb21faW5kZXhdLmFsYnVtLm5hbWU7XG4gICAgICB0aGlzLmFydGlzdF9uYW1lID0gYXJ0aXN0c19uYW1lO1xuICAgICAgdmFyIG1wM19hZGRyZXNzID0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0ubXAzVXJsO1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIuc2V0QXR0cmlidXRlKFwic3JjXCIsIG1wM19hZGRyZXNzKTtcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLnZvbHVtbiA9IDAuNTtcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLnBsYXkoKTtcbiAgICAgIHRoaXMucGxheVN0YXR1cyA9IHRydWU7XG4gICAgfSxcbiAgICBiYWNrTXVzaWM6IGZ1bmN0aW9uIGJhY2tNdXNpYygpIHtcbiAgICAgIGlmICghdGhpcy5wcmV2TXVzaWMgfHwgIXRoaXMucHJldkluZGV4KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZm9sbG93SW5kZXggPSB0aGlzLnBsYXlpbmdJbmRleDtcbiAgICAgIHRoaXMuZm9sbG93TXVzaWMgPSB0aGlzLnBsYXlpbmdNdXNpYztcbiAgICAgIHRoaXMuc2hvd2xyYyA9IFtdO1xuICAgICAgdGhpcy5nZXRKU09OKCdnZXRMeXJpY3MucGhwP2lkPScgKyB0aGlzLnByZXZNdXNpYykudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5scmMgIT0gXCJub1wiKSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IGRhdGEubHJjO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLnNob3dscmMgPSB7IFwiMFwiOiBcIuaaguaXoOatjOivjVwiIH07XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBhbGVydCgn5pyN5Yqh5Zmo6YCa5L+h5byC5bi4Jyk7XG4gICAgICB9KTtcbiAgICAgIHZhciBhcnRpc3RzX25hbWUgPSAnJztcbiAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5tdXNpY0FycmF5W3RoaXMucHJldkluZGV4XS5hcnRpc3RzKSB7XG4gICAgICAgIGFydGlzdHNfbmFtZSArPSB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLmFydGlzdHNbaV0ubmFtZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuJGVscy5hbGJ1bS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLmFsYnVtLnBpY1VybCArICcpJztcbiAgICAgIHRoaXMucGxheWluZ011c2ljID0gdGhpcy5tdXNpY0FycmF5W3RoaXMucHJldkluZGV4XS5pZDtcbiAgICAgIHRoaXMucGxheWluZ0luZGV4ID0gdGhpcy5wcmV2SW5kZXg7XG4gICAgICB0aGlzLnNvbmdfbmFtZSA9IHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0ubmFtZTtcbiAgICAgIHRoaXMuYWxidW1fbmFtZSA9IHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0uYWxidW0ubmFtZTtcbiAgICAgIHRoaXMuYXJ0aXN0X25hbWUgPSBhcnRpc3RzX25hbWU7XG4gICAgICB2YXIgbXAzX2FkZHJlc3MgPSB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLm1wM1VybDtcbiAgICAgIHRoaXMucHJldk11c2ljID0gJyc7XG4gICAgICB0aGlzLnByZXZJbmRleCA9ICcnO1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIuc2V0QXR0cmlidXRlKFwic3JjXCIsIG1wM19hZGRyZXNzKTtcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLnZvbHVtbiA9IDAuNTtcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLnBsYXkoKTtcbiAgICAgIHRoaXMucGxheVN0YXR1cyA9IHRydWU7XG4gICAgfSxcbiAgICBnZXRNdXNpYzogZnVuY3Rpb24gZ2V0TXVzaWMoKSB7XG4gICAgICB2YXIgbV9zZWNvbmQgPSB1bmRlZmluZWQsXG4gICAgICAgICAgbV9taW51dGUgPSB1bmRlZmluZWQ7XG4gICAgICB2YXIgdGVtcF9taW51dGUgPSBwYXJzZUludCh0aGlzLiRlbHMubXBsYXllci5kdXJhdGlvbiAvIDYwKTtcbiAgICAgIGlmICh0ZW1wX21pbnV0ZS50b1N0cmluZygpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgbV9taW51dGUgPSAnJyArIHRlbXBfbWludXRlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbV9taW51dGUgPSAnMCcgKyB0ZW1wX21pbnV0ZTtcbiAgICAgIH1cbiAgICAgIHZhciB0ZW1wX3NlY29uZCA9IHBhcnNlSW50KHRoaXMuJGVscy5tcGxheWVyLmR1cmF0aW9uICUgNjApO1xuICAgICAgaWYgKHRlbXBfc2Vjb25kLnRvU3RyaW5nKCkubGVuZ3RoID4gMSkge1xuICAgICAgICBtX3NlY29uZCA9ICcnICsgdGVtcF9zZWNvbmQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtX3NlY29uZCA9ICcwJyArIHRlbXBfc2Vjb25kO1xuICAgICAgfVxuICAgICAgdGhpcy5tdXNpY3RpbWUgPSBtX21pbnV0ZSArICc6JyArIG1fc2Vjb25kO1xuICAgIH0sXG4gICAgcGxheUV2ZW50OiBmdW5jdGlvbiBwbGF5RXZlbnQoKSB7XG4gICAgICB2YXIgY19zZWNvbmQgPSB1bmRlZmluZWQsXG4gICAgICAgICAgY19taW51dGUgPSB1bmRlZmluZWQ7XG4gICAgICB2YXIgdGVtcF9taW51dGUgPSBwYXJzZUludCh0aGlzLiRlbHMubXBsYXllci5jdXJyZW50VGltZSAvIDYwKTtcbiAgICAgIGlmICh0ZW1wX21pbnV0ZS50b1N0cmluZygpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgY19taW51dGUgPSAnJyArIHRlbXBfbWludXRlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY19taW51dGUgPSAnMCcgKyB0ZW1wX21pbnV0ZTtcbiAgICAgIH1cbiAgICAgIHZhciB0ZW1wX3NlY29uZCA9IHBhcnNlSW50KHRoaXMuJGVscy5tcGxheWVyLmN1cnJlbnRUaW1lICUgNjApO1xuICAgICAgaWYgKHRlbXBfc2Vjb25kLnRvU3RyaW5nKCkubGVuZ3RoID4gMSkge1xuICAgICAgICBjX3NlY29uZCA9ICcnICsgdGVtcF9zZWNvbmQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjX3NlY29uZCA9ICcwJyArIHRlbXBfc2Vjb25kO1xuICAgICAgfVxuICAgICAgdGhpcy5jdXJ0aW1lID0gY19taW51dGUgKyAnOicgKyBjX3NlY29uZDtcbiAgICAgIHZhciBwbGF5X3RpbWUgPSBNYXRoLmZsb29yKHRoaXMuJGVscy5tcGxheWVyLmN1cnJlbnRUaW1lKS50b1N0cmluZygpO1xuICAgICAgdGhpcy5kaXNwbGF5X2xyYyhwbGF5X3RpbWUpO1xuICAgICAgdmFyIGJ1ZmZlcl9wZXJjZW50ID0gdGhpcy4kZWxzLm1wbGF5ZXIuYnVmZmVyZWQuZW5kKDApIC8gdGhpcy4kZWxzLm1wbGF5ZXIuZHVyYXRpb247XG4gICAgICB2YXIgY3VycmVudF9wZXJjZW50ID0gdGhpcy4kZWxzLm1wbGF5ZXIuY3VycmVudFRpbWUgLyB0aGlzLiRlbHMubXBsYXllci5kdXJhdGlvbjtcbiAgICAgIHZtLiRlbHMuYnVmZmVyLnN0eWxlLnRyYW5zZm9ybSA9IFwic2NhbGVYKFwiICsgYnVmZmVyX3BlcmNlbnQgKyBcIilcIjtcbiAgICAgIHZtLiRlbHMucGxheXRpbWUuc3R5bGUudHJhbnNmb3JtID0gXCJzY2FsZVgoXCIgKyBjdXJyZW50X3BlcmNlbnQgKyBcIilcIjtcbiAgICB9LFxuICAgIGRpc3BsYXlfbHJjOiBmdW5jdGlvbiBkaXNwbGF5X2xyYyhwbGF5X3RpbWUpIHtcbiAgICAgIHZhciBscmNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbHJjJyk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxyY3MubGVuZ3RoOyBpKyspIHt9XG4gICAgfVxuICB9XG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
