"use strict";Vue.config.debug=!0;var vm=new Vue({el:"#ym-player",data:{song_name:"",album_name:"",artist_name:"",showlrc:[],musicArray:"",playingMusic:"",playingIndex:"",havevoice:!0,playStatus:!0,prevIndex:"",prevMusic:"",followIndex:"",followMusic:"",curtime:"00:00",musictime:"00:00",playingtime:0},created:function(){this.loadMusic()},methods:{getJSON:function(t){var i=new Promise(function(i,s){function e(){4===this.readyState&&(200===this.status?i(this.response):s(new Error(this.statusText)))}var r=new XMLHttpRequest;r.open("GET",t),r.onreadystatechange=e,r.responseType="json",r.setRequestHeader("Accept","application/json"),r.send()});return i},changePlay:function(){0==this.playStatus?(this.playStatus=!0,this.$els.mplayer.play()):(this.playStatus=!1,this.$els.mplayer.pause())},loadMusic:function(t){var i=t?"getSong.php?id="+t:"getSong.php?id=0";this.getJSON(i).then(function(t){vm.musicArray=t.tracks,vm.musicLength=vm.musicArray.length,vm.$els.album.style.backgroundImage="url("+t.cover+")","no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"},vm.song_name=t.music_name,vm.album_name=t.album_name,vm.artist_name=t.artists,vm.playingMusic=t.id,vm.playingIndex=t.index,vm.$els.mplayer.setAttribute("src",t.mp3),vm.$els.mplayer.volumn=.5,vm.$els.mplayer.play()},function(t){alert("服务器通信异常")})},changeVoice:function(t){this.$els.mplayer.volume=t.target.value/10,0==t.target.value?this.havevoice=!1:this.havevoice=!0},nextMusic:function(){var t,i;this.followMusic&&this.followIndex?(t=this.followIndex,i=this.followMusic):(t=Math.ceil(Math.random()*this.musicLength),i=this.musicArray[t].id),this.followIndex="",this.followMusic="",this.prevMusic=this.playingMusic,this.prevIndex=this.playingIndex,this.showlrc=[],this.getJSON("getLyrics.php?id="+i).then(function(t){"no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"}},function(t){alert("服务器通信异常")});var s="";for(var e in this.musicArray[t].artists)s+=this.musicArray[t].artists[e].name;this.$els.album.style.backgroundImage="url("+this.musicArray[t].album.picUrl+")",this.playingMusic=this.musicArray[t].id,this.playingIndex=t,this.song_name=this.musicArray[t].name,this.album_name=this.musicArray[t].album.name,this.artist_name=s;var r=this.musicArray[t].mp3Url;this.$els.mplayer.setAttribute("src",r),this.$els.mplayer.volumn=.5,this.$els.mplayer.play(),this.playStatus=!0},backMusic:function(){if(!this.prevMusic||!this.prevIndex)return!1;this.followIndex=this.playingIndex,this.followMusic=this.playingMusic,this.showlrc=[],this.getJSON("getLyrics.php?id="+this.prevMusic).then(function(t){"no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"}},function(t){alert("服务器通信异常")});var t="";for(var i in this.musicArray[this.prevIndex].artists)t+=this.musicArray[this.prevIndex].artists[i].name;this.$els.album.style.backgroundImage="url("+this.musicArray[this.prevIndex].album.picUrl+")",this.playingMusic=this.musicArray[this.prevIndex].id,this.playingIndex=this.prevIndex,this.song_name=this.musicArray[this.prevIndex].name,this.album_name=this.musicArray[this.prevIndex].album.name,this.artist_name=t;var s=this.musicArray[this.prevIndex].mp3Url;this.prevMusic="",this.prevIndex="",this.$els.mplayer.setAttribute("src",s),this.$els.mplayer.volumn=.5,this.$els.mplayer.play(),this.playStatus=!0},getMusic:function(){var t=void 0,i=void 0,s=parseInt(this.$els.mplayer.duration/60);i=s.toString().length>1?""+s:"0"+s;var e=parseInt(this.$els.mplayer.duration%60);t=e.toString().length>1?""+e:"0"+e,this.musictime=i+":"+t},playEvent:function(){var t=void 0,i=void 0,s=parseInt(this.$els.mplayer.currentTime/60);i=s.toString().length>1?""+s:"0"+s;var e=parseInt(this.$els.mplayer.currentTime%60);t=e.toString().length>1?""+e:"0"+e,this.curtime=i+":"+t;var r=Math.floor(this.$els.mplayer.currentTime).toString();this.display_lrc(r)},display_lrc:function(t){this.playingtime=t}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYXllci5qcyJdLCJuYW1lcyI6WyJWdWUiLCJjb25maWciLCJkZWJ1ZyIsInZtIiwiZWwiLCJkYXRhIiwic29uZ19uYW1lIiwiYWxidW1fbmFtZSIsImFydGlzdF9uYW1lIiwic2hvd2xyYyIsIm11c2ljQXJyYXkiLCJwbGF5aW5nTXVzaWMiLCJwbGF5aW5nSW5kZXgiLCJoYXZldm9pY2UiLCJwbGF5U3RhdHVzIiwicHJldkluZGV4IiwicHJldk11c2ljIiwiZm9sbG93SW5kZXgiLCJmb2xsb3dNdXNpYyIsImN1cnRpbWUiLCJtdXNpY3RpbWUiLCJwbGF5aW5ndGltZSIsImNyZWF0ZWQiLCJ0aGlzIiwibG9hZE11c2ljIiwibWV0aG9kcyIsImdldEpTT04iLCJ1cmwiLCJwcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJoYW5kbGVyIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3BvbnNlIiwiRXJyb3IiLCJzdGF0dXNUZXh0IiwiY2xpZW50IiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVzcG9uc2VUeXBlIiwic2V0UmVxdWVzdEhlYWRlciIsInNlbmQiLCJjaGFuZ2VQbGF5IiwiJGVscyIsIm1wbGF5ZXIiLCJwbGF5IiwicGF1c2UiLCJpZCIsInRoZW4iLCJ0cmFja3MiLCJtdXNpY0xlbmd0aCIsImxlbmd0aCIsImFsYnVtIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJjb3ZlciIsImxyYyIsIjAiLCJtdXNpY19uYW1lIiwiYXJ0aXN0cyIsImluZGV4Iiwic2V0QXR0cmlidXRlIiwibXAzIiwidm9sdW1uIiwiZXJyb3IiLCJhbGVydCIsImNoYW5nZVZvaWNlIiwiZXZlbnQiLCJ2b2x1bWUiLCJ0YXJnZXQiLCJ2YWx1ZSIsIm5leHRNdXNpYyIsInJhbmRvbV9pbmRleCIsInJhbmRvbV9pZCIsIk1hdGgiLCJjZWlsIiwicmFuZG9tIiwiYXJ0aXN0c19uYW1lIiwiaSIsIm5hbWUiLCJwaWNVcmwiLCJtcDNfYWRkcmVzcyIsIm1wM1VybCIsImJhY2tNdXNpYyIsImdldE11c2ljIiwibV9zZWNvbmQiLCJ1bmRlZmluZWQiLCJtX21pbnV0ZSIsInRlbXBfbWludXRlIiwicGFyc2VJbnQiLCJkdXJhdGlvbiIsInRvU3RyaW5nIiwidGVtcF9zZWNvbmQiLCJwbGF5RXZlbnQiLCJjX3NlY29uZCIsImNfbWludXRlIiwiY3VycmVudFRpbWUiLCJwbGF5X3RpbWUiLCJmbG9vciIsImRpc3BsYXlfbHJjIl0sIm1hcHBpbmdzIjoiQUFJQSxZQUVBQSxLQUFJQyxPQUFPQyxPQUFRLENBQ25CLElBQUlDLElBQUssR0FBSUgsTUFDWEksR0FBSSxhQUNKQyxNQUNFQyxVQUFXLEdBQ1hDLFdBQVksR0FDWkMsWUFBYSxHQUNiQyxXQUNBQyxXQUFZLEdBQ1pDLGFBQWMsR0FDZEMsYUFBYyxHQUNkQyxXQUFXLEVBQ1hDLFlBQVksRUFDWkMsVUFBVyxHQUNYQyxVQUFXLEdBQ1hDLFlBQWEsR0FDYkMsWUFBYSxHQUNiQyxRQUFTLFFBQ1RDLFVBQVcsUUFDWEMsWUFBYSxHQUVmQyxRQUFTLFdBQ1BDLEtBQUtDLGFBRVBDLFNBQ0VDLFFBQVMsU0FBaUJDLEdBQ3hCLEdBQUlDLEdBQVUsR0FBSUMsU0FBUSxTQUFVQyxFQUFTQyxHQU03QixRQUFTQyxLQUNHLElBQXBCVCxLQUFLVSxhQUVZLE1BQWhCVixLQUFLVyxPQUNSSixFQUFRUCxLQUFLWSxVQUViSixFQUFPLEdBQUlLLE9BQU1iLEtBQUtjLGNBWDFCLEdBQUlDLEdBQVMsR0FBSUMsZUFDakJELEdBQU9FLEtBQUssTUFBT2IsR0FDbkJXLEVBQU9HLG1CQUFxQlQsRUFDNUJNLEVBQU9JLGFBQWUsT0FDdEJKLEVBQU9LLGlCQUFpQixTQUFVLG9CQUNsQ0wsRUFBT00sUUFVVCxPQUFPaEIsSUFFVGlCLFdBQVksV0FDYSxHQUFuQnRCLEtBQUtULFlBQ1BTLEtBQUtULFlBQWEsRUFDbEJTLEtBQUt1QixLQUFLQyxRQUFRQyxTQUVsQnpCLEtBQUtULFlBQWEsRUFDbEJT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LFdBQVd4QyxPQUFTLEVBQ3ZCLEdBQUt5QyxFQUVMLElBQU1BLEVBRW5CeEUsS0FBS0gsVUFBWXNFLEVBQVcsSUFBTUYsR0FFcENRLFVBQVcsV0FDVCxHQUFJQyxHQUFXUixPQUNYUyxFQUFXVCxPQUNYRSxFQUFjQyxTQUFTckUsS0FBS3VCLEtBQUtDLFFBQVFvRCxZQUFjLEdBRXpERCxHQURFUCxFQUFZRyxXQUFXeEMsT0FBUyxFQUN2QixHQUFLcUMsRUFFTCxJQUFNQSxDQUVuQixJQUFJSSxHQUFjSCxTQUFTckUsS0FBS3VCLEtBQUtDLFFBQVFvRCxZQUFjLEdBRXpERixHQURFRixFQUFZRCxXQUFXeEMsT0FBUyxFQUN2QixHQUFLeUMsRUFFTCxJQUFNQSxFQUVuQnhFLEtBQUtKLFFBQVUrRSxFQUFXLElBQU1ELENBQ2hDLElBQUlHLEdBQVl2QixLQUFLd0IsTUFBTTlFLEtBQUt1QixLQUFLQyxRQUFRb0QsYUFBYUwsVUFDMUR2RSxNQUFLK0UsWUFBWUYsSUFFbkJFLFlBQWEsU0FBcUJGLEdBS2hDN0UsS0FBS0YsWUFBYytFIiwiZmlsZSI6InBsYXllci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiB5UGxheWVyXG4qIEF1dGhvciB5YW5nemoxOTkyXG4qL1xuXCJ1c2Ugc3RyaWN0XCI7XG5cblZ1ZS5jb25maWcuZGVidWcgPSB0cnVlO1xudmFyIHZtID0gbmV3IFZ1ZSh7XG4gIGVsOiAnI3ltLXBsYXllcicsXG4gIGRhdGE6IHtcbiAgICBzb25nX25hbWU6ICcnLFxuICAgIGFsYnVtX25hbWU6ICcnLFxuICAgIGFydGlzdF9uYW1lOiAnJyxcbiAgICBzaG93bHJjOiBbXSxcbiAgICBtdXNpY0FycmF5OiAnJyxcbiAgICBwbGF5aW5nTXVzaWM6ICcnLFxuICAgIHBsYXlpbmdJbmRleDogJycsXG4gICAgaGF2ZXZvaWNlOiB0cnVlLFxuICAgIHBsYXlTdGF0dXM6IHRydWUsXG4gICAgcHJldkluZGV4OiAnJyxcbiAgICBwcmV2TXVzaWM6ICcnLFxuICAgIGZvbGxvd0luZGV4OiAnJyxcbiAgICBmb2xsb3dNdXNpYzogJycsXG4gICAgY3VydGltZTogJzAwOjAwJyxcbiAgICBtdXNpY3RpbWU6ICcwMDowMCcsXG4gICAgcGxheWluZ3RpbWU6IDBcbiAgfSxcbiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHtcbiAgICB0aGlzLmxvYWRNdXNpYygpO1xuICB9LFxuICBtZXRob2RzOiB7XG4gICAgZ2V0SlNPTjogZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHtcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgY2xpZW50ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIGNsaWVudC5vcGVuKFwiR0VUXCIsIHVybCk7XG4gICAgICAgIGNsaWVudC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xuICAgICAgICBjbGllbnQucmVzcG9uc2VUeXBlID0gXCJqc29uXCI7XG4gICAgICAgIGNsaWVudC5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICAgICAgY2xpZW50LnNlbmQoKTtmdW5jdGlvbiBoYW5kbGVyKCkge1xuICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgIT09IDQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9aWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IodGhpcy5zdGF0dXNUZXh0KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9LFxuICAgIGNoYW5nZVBsYXk6IGZ1bmN0aW9uIGNoYW5nZVBsYXkoKSB7XG4gICAgICBpZiAodGhpcy5wbGF5U3RhdHVzID09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMucGxheVN0YXR1cyA9IHRydWU7XG4gICAgICAgIHRoaXMuJGVscy5tcGxheWVyLnBsYXkoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGxheVN0YXR1cyA9IGZhbHNlO1xuICAgICAgICB0aGlzLiRlbHMubXBsYXllci5wYXVzZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgbG9hZE11c2ljOiBmdW5jdGlvbiBsb2FkTXVzaWMoaWQpIHtcbiAgICAgIHZhciB1cmwgPSBpZCA/ICdnZXRTb25nLnBocD9pZD0nICsgaWQgOiAnZ2V0U29uZy5waHA/aWQ9MCc7XG4gICAgICB0aGlzLmdldEpTT04odXJsKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHZtLm11c2ljQXJyYXkgPSBkYXRhLnRyYWNrcztcbiAgICAgICAgdm0ubXVzaWNMZW5ndGggPSB2bS5tdXNpY0FycmF5Lmxlbmd0aDtcbiAgICAgICAgdm0uJGVscy5hbGJ1bS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyBkYXRhLmNvdmVyICsgJyknO1xuICAgICAgICBpZiAoZGF0YS5scmMgIT0gXCJub1wiKSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IGRhdGEubHJjO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLnNob3dscmMgPSB7IFwiMFwiOiBcIuaaguaXoOatjOivjVwiIH07XG4gICAgICAgIH1cbiAgICAgICAgdm0uc29uZ19uYW1lID0gZGF0YS5tdXNpY19uYW1lO1xuICAgICAgICB2bS5hbGJ1bV9uYW1lID0gZGF0YS5hbGJ1bV9uYW1lO1xuICAgICAgICB2bS5hcnRpc3RfbmFtZSA9IGRhdGEuYXJ0aXN0cztcbiAgICAgICAgdm0ucGxheWluZ011c2ljID0gZGF0YS5pZDtcbiAgICAgICAgdm0ucGxheWluZ0luZGV4ID0gZGF0YS5pbmRleDtcbiAgICAgICAgdm0uJGVscy5tcGxheWVyLnNldEF0dHJpYnV0ZShcInNyY1wiLCBkYXRhLm1wMyk7XG4gICAgICAgIHZtLiRlbHMubXBsYXllci52b2x1bW4gPSAwLjU7XG4gICAgICAgIHZtLiRlbHMubXBsYXllci5wbGF5KCk7XG4gICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgYWxlcnQoJ+acjeWKoeWZqOmAmuS/oeW8guW4uCcpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBjaGFuZ2VWb2ljZTogZnVuY3Rpb24gY2hhbmdlVm9pY2UoZXZlbnQpIHtcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLnZvbHVtZSA9IGV2ZW50LnRhcmdldC52YWx1ZSAvIDEwO1xuICAgICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA9PSAwKSB7XG4gICAgICAgIHRoaXMuaGF2ZXZvaWNlID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhhdmV2b2ljZSA9IHRydWU7XG4gICAgICB9XG4gICAgfSxcbiAgICBuZXh0TXVzaWM6IGZ1bmN0aW9uIG5leHRNdXNpYygpIHtcbiAgICAgIHZhciByYW5kb21faW5kZXg7XG4gICAgICB2YXIgcmFuZG9tX2lkO1xuICAgICAgaWYgKCF0aGlzLmZvbGxvd011c2ljIHx8ICF0aGlzLmZvbGxvd0luZGV4KSB7XG4gICAgICAgIHJhbmRvbV9pbmRleCA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogdGhpcy5tdXNpY0xlbmd0aCk7XG4gICAgICAgIHJhbmRvbV9pZCA9IHRoaXMubXVzaWNBcnJheVtyYW5kb21faW5kZXhdLmlkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmFuZG9tX2luZGV4ID0gdGhpcy5mb2xsb3dJbmRleDtcbiAgICAgICAgcmFuZG9tX2lkID0gdGhpcy5mb2xsb3dNdXNpYztcbiAgICAgIH1cbiAgICAgIHRoaXMuZm9sbG93SW5kZXggPSAnJztcbiAgICAgIHRoaXMuZm9sbG93TXVzaWMgPSAnJztcbiAgICAgIHRoaXMucHJldk11c2ljID0gdGhpcy5wbGF5aW5nTXVzaWM7XG4gICAgICB0aGlzLnByZXZJbmRleCA9IHRoaXMucGxheWluZ0luZGV4O1xuICAgICAgdGhpcy5zaG93bHJjID0gW107XG4gICAgICB0aGlzLmdldEpTT04oJ2dldEx5cmljcy5waHA/aWQ9JyArIHJhbmRvbV9pZCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5scmMgIT0gXCJub1wiKSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IGRhdGEubHJjO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLnNob3dscmMgPSB7IFwiMFwiOiBcIuaaguaXoOatjOivjVwiIH07XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBhbGVydCgn5pyN5Yqh5Zmo6YCa5L+h5byC5bi4Jyk7XG4gICAgICB9KTtcbiAgICAgIHZhciBhcnRpc3RzX25hbWUgPSAnJztcbiAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uYXJ0aXN0cykge1xuICAgICAgICBhcnRpc3RzX25hbWUgKz0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uYXJ0aXN0c1tpXS5uYW1lO1xuICAgICAgfVxuICAgICAgdGhpcy4kZWxzLmFsYnVtLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIHRoaXMubXVzaWNBcnJheVtyYW5kb21faW5kZXhdLmFsYnVtLnBpY1VybCArICcpJztcbiAgICAgIHRoaXMucGxheWluZ011c2ljID0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uaWQ7XG4gICAgICB0aGlzLnBsYXlpbmdJbmRleCA9IHJhbmRvbV9pbmRleDtcbiAgICAgIHRoaXMuc29uZ19uYW1lID0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0ubmFtZTtcbiAgICAgIHRoaXMuYWxidW1fbmFtZSA9IHRoaXMubXVzaWNBcnJheVtyYW5kb21faW5kZXhdLmFsYnVtLm5hbWU7XG4gICAgICB0aGlzLmFydGlzdF9uYW1lID0gYXJ0aXN0c19uYW1lO1xuICAgICAgdmFyIG1wM19hZGRyZXNzID0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0ubXAzVXJsO1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIuc2V0QXR0cmlidXRlKFwic3JjXCIsIG1wM19hZGRyZXNzKTtcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLnZvbHVtbiA9IDAuNTtcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLnBsYXkoKTtcbiAgICAgIHRoaXMucGxheVN0YXR1cyA9IHRydWU7XG4gICAgfSxcbiAgICBiYWNrTXVzaWM6IGZ1bmN0aW9uIGJhY2tNdXNpYygpIHtcbiAgICAgIGlmICghdGhpcy5wcmV2TXVzaWMgfHwgIXRoaXMucHJldkluZGV4KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZm9sbG93SW5kZXggPSB0aGlzLnBsYXlpbmdJbmRleDtcbiAgICAgIHRoaXMuZm9sbG93TXVzaWMgPSB0aGlzLnBsYXlpbmdNdXNpYztcbiAgICAgIHRoaXMuc2hvd2xyYyA9IFtdO1xuICAgICAgdGhpcy5nZXRKU09OKCdnZXRMeXJpY3MucGhwP2lkPScgKyB0aGlzLnByZXZNdXNpYykudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5scmMgIT0gXCJub1wiKSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IGRhdGEubHJjO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLnNob3dscmMgPSB7IFwiMFwiOiBcIuaaguaXoOatjOivjVwiIH07XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBhbGVydCgn5pyN5Yqh5Zmo6YCa5L+h5byC5bi4Jyk7XG4gICAgICB9KTtcbiAgICAgIHZhciBhcnRpc3RzX25hbWUgPSAnJztcbiAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5tdXNpY0FycmF5W3RoaXMucHJldkluZGV4XS5hcnRpc3RzKSB7XG4gICAgICAgIGFydGlzdHNfbmFtZSArPSB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLmFydGlzdHNbaV0ubmFtZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuJGVscy5hbGJ1bS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLmFsYnVtLnBpY1VybCArICcpJztcbiAgICAgIHRoaXMucGxheWluZ011c2ljID0gdGhpcy5tdXNpY0FycmF5W3RoaXMucHJldkluZGV4XS5pZDtcbiAgICAgIHRoaXMucGxheWluZ0luZGV4ID0gdGhpcy5wcmV2SW5kZXg7XG4gICAgICB0aGlzLnNvbmdfbmFtZSA9IHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0ubmFtZTtcbiAgICAgIHRoaXMuYWxidW1fbmFtZSA9IHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0uYWxidW0ubmFtZTtcbiAgICAgIHRoaXMuYXJ0aXN0X25hbWUgPSBhcnRpc3RzX25hbWU7XG4gICAgICB2YXIgbXAzX2FkZHJlc3MgPSB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLm1wM1VybDtcbiAgICAgIHRoaXMucHJldk11c2ljID0gJyc7XG4gICAgICB0aGlzLnByZXZJbmRleCA9ICcnO1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIuc2V0QXR0cmlidXRlKFwic3JjXCIsIG1wM19hZGRyZXNzKTtcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLnZvbHVtbiA9IDAuNTtcbiAgICAgIHRoaXMuJGVscy5tcGxheWVyLnBsYXkoKTtcbiAgICAgIHRoaXMucGxheVN0YXR1cyA9IHRydWU7XG4gICAgfSxcbiAgICBnZXRNdXNpYzogZnVuY3Rpb24gZ2V0TXVzaWMoKSB7XG4gICAgICB2YXIgbV9zZWNvbmQgPSB1bmRlZmluZWQsXG4gICAgICAgICAgbV9taW51dGUgPSB1bmRlZmluZWQ7XG4gICAgICB2YXIgdGVtcF9taW51dGUgPSBwYXJzZUludCh0aGlzLiRlbHMubXBsYXllci5kdXJhdGlvbiAvIDYwKTtcbiAgICAgIGlmICh0ZW1wX21pbnV0ZS50b1N0cmluZygpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgbV9taW51dGUgPSAnJyArIHRlbXBfbWludXRlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbV9taW51dGUgPSAnMCcgKyB0ZW1wX21pbnV0ZTtcbiAgICAgIH1cbiAgICAgIHZhciB0ZW1wX3NlY29uZCA9IHBhcnNlSW50KHRoaXMuJGVscy5tcGxheWVyLmR1cmF0aW9uICUgNjApO1xuICAgICAgaWYgKHRlbXBfc2Vjb25kLnRvU3RyaW5nKCkubGVuZ3RoID4gMSkge1xuICAgICAgICBtX3NlY29uZCA9ICcnICsgdGVtcF9zZWNvbmQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtX3NlY29uZCA9ICcwJyArIHRlbXBfc2Vjb25kO1xuICAgICAgfVxuICAgICAgdGhpcy5tdXNpY3RpbWUgPSBtX21pbnV0ZSArICc6JyArIG1fc2Vjb25kO1xuICAgIH0sXG4gICAgcGxheUV2ZW50OiBmdW5jdGlvbiBwbGF5RXZlbnQoKSB7XG4gICAgICB2YXIgY19zZWNvbmQgPSB1bmRlZmluZWQsXG4gICAgICAgICAgY19taW51dGUgPSB1bmRlZmluZWQ7XG4gICAgICB2YXIgdGVtcF9taW51dGUgPSBwYXJzZUludCh0aGlzLiRlbHMubXBsYXllci5jdXJyZW50VGltZSAvIDYwKTtcbiAgICAgIGlmICh0ZW1wX21pbnV0ZS50b1N0cmluZygpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgY19taW51dGUgPSAnJyArIHRlbXBfbWludXRlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY19taW51dGUgPSAnMCcgKyB0ZW1wX21pbnV0ZTtcbiAgICAgIH1cbiAgICAgIHZhciB0ZW1wX3NlY29uZCA9IHBhcnNlSW50KHRoaXMuJGVscy5tcGxheWVyLmN1cnJlbnRUaW1lICUgNjApO1xuICAgICAgaWYgKHRlbXBfc2Vjb25kLnRvU3RyaW5nKCkubGVuZ3RoID4gMSkge1xuICAgICAgICBjX3NlY29uZCA9ICcnICsgdGVtcF9zZWNvbmQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjX3NlY29uZCA9ICcwJyArIHRlbXBfc2Vjb25kO1xuICAgICAgfVxuICAgICAgdGhpcy5jdXJ0aW1lID0gY19taW51dGUgKyAnOicgKyBjX3NlY29uZDtcbiAgICAgIHZhciBwbGF5X3RpbWUgPSBNYXRoLmZsb29yKHRoaXMuJGVscy5tcGxheWVyLmN1cnJlbnRUaW1lKS50b1N0cmluZygpO1xuICAgICAgdGhpcy5kaXNwbGF5X2xyYyhwbGF5X3RpbWUpO1xuICAgIH0sXG4gICAgZGlzcGxheV9scmM6IGZ1bmN0aW9uIGRpc3BsYXlfbHJjKHBsYXlfdGltZSkge1xuICAgICAgLy8gbGV0IGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLnNob3dscmMpO1xuICAgICAgLy8gZm9yKGxldCBpID0gMDtpPGtleXMubGVuZ3RoO2krKyl7XG4gICAgICAvLyAgIGlmKHBsYXlfdGltZSA8IGtleXNbaV0pXG4gICAgICAvLyB9XG4gICAgICB0aGlzLnBsYXlpbmd0aW1lID0gcGxheV90aW1lO1xuICAgIH1cbiAgfVxufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
