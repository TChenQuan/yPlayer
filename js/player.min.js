"use strict";Vue.config.debug=!0;var vm=new Vue({el:"#ym-player",data:{song_name:"",album_name:"",artist_name:"",showlrc:[],musicArray:"",playingMusic:"",playingIndex:"",havevoice:!0,playStatus:!0,prevIndex:"",prevMusic:"",followIndex:"",followMusic:"",curtime:"00:00",musictime:"00:00",playingtime:0,loaded:!1},created:function(){this.loadMusic()},methods:{getJSON:function(t){var s=new Promise(function(s,e){function i(){4===this.readyState&&(200===this.status?s(this.response):e(new Error(this.statusText)))}var r=new XMLHttpRequest;r.open("GET",t),r.onreadystatechange=i,r.responseType="json",r.setRequestHeader("Accept","application/json"),r.send()});return s},changePlay:function(){0==this.playStatus?(this.playStatus=!0,this.$els.mplayer.play()):(this.playStatus=!1,this.$els.mplayer.pause())},loadMusic:function(t){var s=t?"getSong.php?id="+t:"getSong.php?id=0";this.getJSON(s).then(function(t){vm.musicArray=t.tracks,vm.musicLength=vm.musicArray.length,vm.$els.album.style.backgroundImage="url("+t.cover+")","no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"},vm.song_name=t.music_name,vm.album_name=t.album_name,vm.artist_name=t.artists,vm.playingMusic=t.id,vm.playingIndex=t.index,vm.loaded=!0,vm.$els.mplayer.setAttribute("src",t.mp3),vm.$els.mplayer.volumn=.5,vm.$els.mplayer.play()},function(t){alert("服务器通信异常")})},changeVoice:function(t){this.$els.mplayer.volume=t.target.value/10,0==t.target.value?this.havevoice=!1:this.havevoice=!0},nextMusic:function(){var t,s;this.followMusic&&this.followIndex?(t=this.followIndex,s=this.followMusic):(t=Math.ceil(Math.random()*this.musicLength),s=this.musicArray[t].id),this.followIndex="",this.followMusic="",this.prevMusic=this.playingMusic,this.prevIndex=this.playingIndex,this.showlrc=[],this.getJSON("getLyrics.php?id="+s).then(function(t){"no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"}},function(t){alert("服务器通信异常")});var e="";for(var i in this.musicArray[t].artists)e+=this.musicArray[t].artists[i].name;this.$els.album.style.backgroundImage="url("+this.musicArray[t].album.picUrl+")",this.playingMusic=this.musicArray[t].id,this.playingIndex=t,this.song_name=this.musicArray[t].name,this.album_name=this.musicArray[t].album.name,this.artist_name=e;var r=this.musicArray[t].mp3Url;this.$els.mplayer.setAttribute("src",r),this.$els.mplayer.volumn=.5,this.$els.mplayer.play(),this.playStatus=!0},backMusic:function(){if(!this.prevMusic||!this.prevIndex)return!1;this.followIndex=this.playingIndex,this.followMusic=this.playingMusic,this.showlrc=[],this.getJSON("getLyrics.php?id="+this.prevMusic).then(function(t){"no"!=t.lrc?vm.showlrc=t.lrc:vm.showlrc={0:"暂无歌词"}},function(t){alert("服务器通信异常")});var t="";for(var s in this.musicArray[this.prevIndex].artists)t+=this.musicArray[this.prevIndex].artists[s].name;this.$els.album.style.backgroundImage="url("+this.musicArray[this.prevIndex].album.picUrl+")",this.playingMusic=this.musicArray[this.prevIndex].id,this.playingIndex=this.prevIndex,this.song_name=this.musicArray[this.prevIndex].name,this.album_name=this.musicArray[this.prevIndex].album.name,this.artist_name=t;var e=this.musicArray[this.prevIndex].mp3Url;this.prevMusic="",this.prevIndex="",this.$els.mplayer.setAttribute("src",e),this.$els.mplayer.volumn=.5,this.$els.mplayer.play(),this.playStatus=!0},getMusic:function(){var t=void 0,s=void 0,e=parseInt(this.$els.mplayer.duration/60);s=e.toString().length>1?""+e:"0"+e;var i=parseInt(this.$els.mplayer.duration%60);t=i.toString().length>1?""+i:"0"+i,this.musictime=s+":"+t},playEvent:function(){var t=void 0,s=void 0,e=parseInt(this.$els.mplayer.currentTime/60);s=e.toString().length>1?""+e:"0"+e;var i=parseInt(this.$els.mplayer.currentTime%60);t=i.toString().length>1?""+i:"0"+i,this.curtime=s+":"+t;var r=Math.floor(this.$els.mplayer.currentTime).toString();this.display_lrc(r);var a=this.$els.mplayer.buffered.end(0)/this.$els.mplayer.duration,l=this.$els.mplayer.currentTime/this.$els.mplayer.duration;vm.$els.buffer.style.transform="scaleX("+a+")",vm.$els.playtime.style.transform="scaleX("+l+")"},display_lrc:function(t){for(var s=document.getElementsByClassName("lrc"),e=0;e<s.length;e++)s[e].getAttribute("dtime")<=this.$els.mplayer.currentTime&&this.$els.mplayer.currentTime<s[e+1].getAttribute("dtime")?s[e].classList?s[e].classList.add("lrc-current"):s[e].className+=" lrc-current":s[e].classList?s[e].classList.remove("lrc-current"):s[e].className=s[e].className.replace(new RegExp("(^|\\b)"+"lrc-current".split(" ").join("|")+"(\\b|$)","gi")," ")}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYXllci5qcyJdLCJuYW1lcyI6WyJWdWUiLCJjb25maWciLCJkZWJ1ZyIsInZtIiwiZWwiLCJkYXRhIiwic29uZ19uYW1lIiwiYWxidW1fbmFtZSIsImFydGlzdF9uYW1lIiwic2hvd2xyYyIsIm11c2ljQXJyYXkiLCJwbGF5aW5nTXVzaWMiLCJwbGF5aW5nSW5kZXgiLCJoYXZldm9pY2UiLCJwbGF5U3RhdHVzIiwicHJldkluZGV4IiwicHJldk11c2ljIiwiZm9sbG93SW5kZXgiLCJmb2xsb3dNdXNpYyIsImN1cnRpbWUiLCJtdXNpY3RpbWUiLCJwbGF5aW5ndGltZSIsImxvYWRlZCIsImNyZWF0ZWQiLCJ0aGlzIiwibG9hZE11c2ljIiwibWV0aG9kcyIsImdldEpTT04iLCJ1cmwiLCJwcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJoYW5kbGVyIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3BvbnNlIiwiRXJyb3IiLCJzdGF0dXNUZXh0IiwiY2xpZW50IiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVzcG9uc2VUeXBlIiwic2V0UmVxdWVzdEhlYWRlciIsInNlbmQiLCJjaGFuZ2VQbGF5IiwiJGVscyIsIm1wbGF5ZXIiLCJwbGF5IiwicGF1c2UiLCJpZCIsInRoZW4iLCJ0cmFja3MiLCJtdXNpY0xlbmd0aCIsImxlbmd0aCIsImFsYnVtIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJjb3ZlciIsImxyYyIsIjAiLCJtdXNpY19uYW1lIiwiYXJ0aXN0cyIsImluZGV4Iiwic2V0QXR0cmlidXRlIiwibXAzIiwidm9sdW1uIiwiZXJyb3IiLCJhbGVydCIsImNoYW5nZVZvaWNlIiwiZXZlbnQiLCJ2b2x1bWUiLCJ0YXJnZXQiLCJ2YWx1ZSIsIm5leHRNdXNpYyIsInJhbmRvbV9pbmRleCIsInJhbmRvbV9pZCIsIk1hdGgiLCJjZWlsIiwicmFuZG9tIiwiYXJ0aXN0c19uYW1lIiwiaSIsIm5hbWUiLCJwaWNVcmwiLCJtcDNfYWRkcmVzcyIsIm1wM1VybCIsImJhY2tNdXNpYyIsImdldE11c2ljIiwibV9zZWNvbmQiLCJ1bmRlZmluZWQiLCJtX21pbnV0ZSIsInRlbXBfbWludXRlIiwicGFyc2VJbnQiLCJkdXJhdGlvbiIsInRvU3RyaW5nIiwidGVtcF9zZWNvbmQiLCJwbGF5RXZlbnQiLCJjX3NlY29uZCIsImNfbWludXRlIiwiY3VycmVudFRpbWUiLCJwbGF5X3RpbWUiLCJmbG9vciIsImRpc3BsYXlfbHJjIiwiYnVmZmVyX3BlcmNlbnQiLCJidWZmZXJlZCIsImVuZCIsImN1cnJlbnRfcGVyY2VudCIsImJ1ZmZlciIsInRyYW5zZm9ybSIsInBsYXl0aW1lIiwibHJjcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImdldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsImFkZCIsImNsYXNzTmFtZSIsInJlbW92ZSIsInJlcGxhY2UiLCJSZWdFeHAiLCJzcGxpdCIsImpvaW4iXSwibWFwcGluZ3MiOiJBQUlBLFlBRUFBLEtBQUlDLE9BQU9DLE9BQVEsQ0FDbkIsSUFBSUMsSUFBSyxHQUFJSCxNQUNYSSxHQUFJLGFBQ0pDLE1BQ0VDLFVBQVcsR0FDWEMsV0FBWSxHQUNaQyxZQUFhLEdBQ2JDLFdBQ0FDLFdBQVksR0FDWkMsYUFBYyxHQUNkQyxhQUFjLEdBQ2RDLFdBQVcsRUFDWEMsWUFBWSxFQUNaQyxVQUFXLEdBQ1hDLFVBQVcsR0FDWEMsWUFBYSxHQUNiQyxZQUFhLEdBQ2JDLFFBQVMsUUFDVEMsVUFBVyxRQUNYQyxZQUFhLEVBQ2JDLFFBQVEsR0FFVkMsUUFBUyxXQUNQQyxLQUFLQyxhQUVQQyxTQUNFQyxRQUFTLFNBQWlCQyxHQUN4QixHQUFJQyxHQUFVLEdBQUlDLFNBQVEsU0FBVUMsRUFBU0MsR0FNN0IsUUFBU0MsS0FDRyxJQUFwQlQsS0FBS1UsYUFFWSxNQUFoQlYsS0FBS1csT0FDUkosRUFBUVAsS0FBS1ksVUFFYkosRUFBTyxHQUFJSyxPQUFNYixLQUFLYyxjQVgxQixHQUFJQyxHQUFTLEdBQUlDLGVBQ2pCRCxHQUFPRSxLQUFLLE1BQU9iLEdBQ25CVyxFQUFPRyxtQkFBcUJULEVBQzVCTSxFQUFPSSxhQUFlLE9BQ3RCSixFQUFPSyxpQkFBaUIsU0FBVSxvQkFDbENMLEVBQU9NLFFBVVQsT0FBT2hCLElBRVRpQixXQUFZLFdBQ2EsR0FBbkJ0QixLQUFLVixZQUNQVSxLQUFLVixZQUFhLEVBQ2xCVSxLQUFLdUIsS0FBS0MsUUFBUUMsU0FFbEJ6QixLQUFLVixZQUFhLEVBQ2xCVSxLQUFLdUIsS0FBS0MsUUFBUUUsVUFHdEJ6QixVQUFXLFNBQW1CMEIsR0FDNUIsR0FBSXZCLEdBQU11QixFQUFLLGtCQUFvQkEsRUFBSyxrQkFDeEMzQixNQUFLRyxRQUFRQyxHQUFLd0IsS0FBSyxTQUFVL0MsR0FDL0JGLEdBQUdPLFdBQWFMLEVBQUtnRCxPQUNyQmxELEdBQUdtRCxZQUFjbkQsR0FBR08sV0FBVzZDLE9BQy9CcEQsR0FBRzRDLEtBQUtTLE1BQU1DLE1BQU1DLGdCQUFrQixPQUFTckQsRUFBS3NELE1BQVEsSUFDNUMsTUFBWnRELEVBQUt1RCxJQUNQekQsR0FBR00sUUFBVUosRUFBS3VELElBRWxCekQsR0FBR00sU0FBWW9ELEVBQUssUUFFdEIxRCxHQUFHRyxVQUFZRCxFQUFLeUQsV0FDcEIzRCxHQUFHSSxXQUFhRixFQUFLRSxXQUNyQkosR0FBR0ssWUFBY0gsRUFBSzBELFFBQ3RCNUQsR0FBR1EsYUFBZU4sRUFBSzhDLEdBQ3ZCaEQsR0FBR1MsYUFBZVAsRUFBSzJELE1BQ3ZCN0QsR0FBR21CLFFBQVMsRUFDWm5CLEdBQUc0QyxLQUFLQyxRQUFRaUIsYUFBYSxNQUFPNUQsRUFBSzZELEtBQ3pDL0QsR0FBRzRDLEtBQUtDLFFBQVFtQixPQUFTLEdBQ3pCaEUsR0FBRzRDLEtBQUtDLFFBQVFDLFFBQ2YsU0FBVW1CLEdBQ1hDLE1BQU0sY0FHVkMsWUFBYSxTQUFxQkMsR0FDaEMvQyxLQUFLdUIsS0FBS0MsUUFBUXdCLE9BQVNELEVBQU1FLE9BQU9DLE1BQVEsR0FDdEIsR0FBdEJILEVBQU1FLE9BQU9DLE1BQ2ZsRCxLQUFLWCxXQUFZLEVBRWpCVyxLQUFLWCxXQUFZLEdBR3JCOEQsVUFBVyxXQUNULEdBQUlDLEdBQ0FDLENBQ0NyRCxNQUFLTixhQUFnQk0sS0FBS1AsYUFJN0IyRCxFQUFlcEQsS0FBS1AsWUFDcEI0RCxFQUFZckQsS0FBS04sY0FKakIwRCxFQUFlRSxLQUFLQyxLQUFLRCxLQUFLRSxTQUFXeEQsS0FBSzhCLGFBQzlDdUIsRUFBWXJELEtBQUtkLFdBQVdrRSxHQUFjekIsSUFLNUMzQixLQUFLUCxZQUFjLEdBQ25CTyxLQUFLTixZQUFjLEdBQ25CTSxLQUFLUixVQUFZUSxLQUFLYixhQUN0QmEsS0FBS1QsVUFBWVMsS0FBS1osYUFDdEJZLEtBQUtmLFdBQ0xlLEtBQUtHLFFBQVEsb0JBQXNCa0QsR0FBV3pCLEtBQUssU0FBVS9DLEdBQzNDLE1BQVpBLEVBQUt1RCxJQUNQekQsR0FBR00sUUFBVUosRUFBS3VELElBRWxCekQsR0FBR00sU0FBWW9ELEVBQUssU0FFckIsU0FBVU8sR0FDWEMsTUFBTSxZQUVSLElBQUlZLEdBQWUsRUFDbkIsS0FBSyxHQUFJQyxLQUFLMUQsTUFBS2QsV0FBV2tFLEdBQWNiLFFBQzFDa0IsR0FBZ0J6RCxLQUFLZCxXQUFXa0UsR0FBY2IsUUFBUW1CLEdBQUdDLElBRTNEM0QsTUFBS3VCLEtBQUtTLE1BQU1DLE1BQU1DLGdCQUFrQixPQUFTbEMsS0FBS2QsV0FBV2tFLEdBQWNwQixNQUFNNEIsT0FBUyxJQUM5RjVELEtBQUtiLGFBQWVhLEtBQUtkLFdBQVdrRSxHQUFjekIsR0FDbEQzQixLQUFLWixhQUFlZ0UsRUFDcEJwRCxLQUFLbEIsVUFBWWtCLEtBQUtkLFdBQVdrRSxHQUFjTyxLQUMvQzNELEtBQUtqQixXQUFhaUIsS0FBS2QsV0FBV2tFLEdBQWNwQixNQUFNMkIsS0FDdEQzRCxLQUFLaEIsWUFBY3lFLENBQ25CLElBQUlJLEdBQWM3RCxLQUFLZCxXQUFXa0UsR0FBY1UsTUFDaEQ5RCxNQUFLdUIsS0FBS0MsUUFBUWlCLGFBQWEsTUFBT29CLEdBQ3RDN0QsS0FBS3VCLEtBQUtDLFFBQVFtQixPQUFTLEdBQzNCM0MsS0FBS3VCLEtBQUtDLFFBQVFDLE9BQ2xCekIsS0FBS1YsWUFBYSxHQUVwQnlFLFVBQVcsV0FDVCxJQUFLL0QsS0FBS1IsWUFBY1EsS0FBS1QsVUFDM0IsT0FBTyxDQUVUUyxNQUFLUCxZQUFjTyxLQUFLWixhQUN4QlksS0FBS04sWUFBY00sS0FBS2IsYUFDeEJhLEtBQUtmLFdBQ0xlLEtBQUtHLFFBQVEsb0JBQXNCSCxLQUFLUixXQUFXb0MsS0FBSyxTQUFVL0MsR0FDaEQsTUFBWkEsRUFBS3VELElBQ1B6RCxHQUFHTSxRQUFVSixFQUFLdUQsSUFFbEJ6RCxHQUFHTSxTQUFZb0QsRUFBSyxTQUVyQixTQUFVTyxHQUNYQyxNQUFNLFlBRVIsSUFBSVksR0FBZSxFQUNuQixLQUFLLEdBQUlDLEtBQUsxRCxNQUFLZCxXQUFXYyxLQUFLVCxXQUFXZ0QsUUFDNUNrQixHQUFnQnpELEtBQUtkLFdBQVdjLEtBQUtULFdBQVdnRCxRQUFRbUIsR0FBR0MsSUFFN0QzRCxNQUFLdUIsS0FBS1MsTUFBTUMsTUFBTUMsZ0JBQWtCLE9BQVNsQyxLQUFLZCxXQUFXYyxLQUFLVCxXQUFXeUMsTUFBTTRCLE9BQVMsSUFDaEc1RCxLQUFLYixhQUFlYSxLQUFLZCxXQUFXYyxLQUFLVCxXQUFXb0MsR0FDcEQzQixLQUFLWixhQUFlWSxLQUFLVCxVQUN6QlMsS0FBS2xCLFVBQVlrQixLQUFLZCxXQUFXYyxLQUFLVCxXQUFXb0UsS0FDakQzRCxLQUFLakIsV0FBYWlCLEtBQUtkLFdBQVdjLEtBQUtULFdBQVd5QyxNQUFNMkIsS0FDeEQzRCxLQUFLaEIsWUFBY3lFLENBQ25CLElBQUlJLEdBQWM3RCxLQUFLZCxXQUFXYyxLQUFLVCxXQUFXdUUsTUFDbEQ5RCxNQUFLUixVQUFZLEdBQ2pCUSxLQUFLVCxVQUFZLEdBQ2pCUyxLQUFLdUIsS0FBS0MsUUFBUWlCLGFBQWEsTUFBT29CLEdBQ3RDN0QsS0FBS3VCLEtBQUtDLFFBQVFtQixPQUFTLEdBQzNCM0MsS0FBS3VCLEtBQUtDLFFBQVFDLE9BQ2xCekIsS0FBS1YsWUFBYSxHQUVwQjBFLFNBQVUsV0FDUixHQUFJQyxHQUFXQyxPQUNYQyxFQUFXRCxPQUNYRSxFQUFjQyxTQUFTckUsS0FBS3VCLEtBQUtDLFFBQVE4QyxTQUFXLEdBRXRESCxHQURFQyxFQUFZRyxXQUFXeEMsT0FBUyxFQUN2QixHQUFLcUMsRUFFTCxJQUFNQSxDQUVuQixJQUFJSSxHQUFjSCxTQUFTckUsS0FBS3VCLEtBQUtDLFFBQVE4QyxTQUFXLEdBRXRETCxHQURFTyxFQUFZRCxXQUFXeEMsT0FBUyxFQUN2QixHQUFLeUMsRUFFTCxJQUFNQSxFQUVuQnhFLEtBQUtKLFVBQVl1RSxFQUFXLElBQU1GLEdBRXBDUSxVQUFXLFdBQ1QsR0FBSUMsR0FBV1IsT0FDWFMsRUFBV1QsT0FDWEUsRUFBY0MsU0FBU3JFLEtBQUt1QixLQUFLQyxRQUFRb0QsWUFBYyxHQUV6REQsR0FERVAsRUFBWUcsV0FBV3hDLE9BQVMsRUFDdkIsR0FBS3FDLEVBRUwsSUFBTUEsQ0FFbkIsSUFBSUksR0FBY0gsU0FBU3JFLEtBQUt1QixLQUFLQyxRQUFRb0QsWUFBYyxHQUV6REYsR0FERUYsRUFBWUQsV0FBV3hDLE9BQVMsRUFDdkIsR0FBS3lDLEVBRUwsSUFBTUEsRUFFbkJ4RSxLQUFLTCxRQUFVZ0YsRUFBVyxJQUFNRCxDQUNoQyxJQUFJRyxHQUFZdkIsS0FBS3dCLE1BQU05RSxLQUFLdUIsS0FBS0MsUUFBUW9ELGFBQWFMLFVBQzFEdkUsTUFBSytFLFlBQVlGLEVBQ2pCLElBQUlHLEdBQWlCaEYsS0FBS3VCLEtBQUtDLFFBQVF5RCxTQUFTQyxJQUFJLEdBQUtsRixLQUFLdUIsS0FBS0MsUUFBUThDLFNBQ3ZFYSxFQUFrQm5GLEtBQUt1QixLQUFLQyxRQUFRb0QsWUFBYzVFLEtBQUt1QixLQUFLQyxRQUFROEMsUUFDeEUzRixJQUFHNEMsS0FBSzZELE9BQU9uRCxNQUFNb0QsVUFBWSxVQUFZTCxFQUFpQixJQUM5RHJHLEdBQUc0QyxLQUFLK0QsU0FBU3JELE1BQU1vRCxVQUFZLFVBQVlGLEVBQWtCLEtBRW5FSixZQUFhLFNBQXFCRixHQUVoQyxJQUFLLEdBRERVLEdBQU9DLFNBQVNDLHVCQUF1QixPQUNsQy9CLEVBQUksRUFBR0EsRUFBSTZCLEVBQUt4RCxPQUFRMkIsSUFDM0I2QixFQUFLN0IsR0FBR2dDLGFBQWEsVUFBWTFGLEtBQUt1QixLQUFLQyxRQUFRb0QsYUFBZTVFLEtBQUt1QixLQUFLQyxRQUFRb0QsWUFBY1csRUFBSzdCLEVBQUksR0FBR2dDLGFBQWEsU0FDekhILEVBQUs3QixHQUFHaUMsVUFDVkosRUFBSzdCLEdBQUdpQyxVQUFVQyxJQUFJLGVBRXRCTCxFQUFLN0IsR0FBR21DLFdBQWEsZUFHbkJOLEVBQUs3QixHQUFHaUMsVUFDVkosRUFBSzdCLEdBQUdpQyxVQUFVRyxPQUFPLGVBRXpCUCxFQUFLN0IsR0FBR21DLFVBQVlOLEVBQUs3QixHQUFHbUMsVUFBVUUsUUFBUSxHQUFJQyxRQUFPLFVBQVksY0FBY0MsTUFBTSxLQUFLQyxLQUFLLEtBQU8sVUFBVyxNQUFPIiwiZmlsZSI6InBsYXllci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuKiB5UGxheWVyXG4qIEF1dGhvciB5YW5nemoxOTkyXG4qL1xuXCJ1c2Ugc3RyaWN0XCI7XG5cblZ1ZS5jb25maWcuZGVidWcgPSB0cnVlO1xudmFyIHZtID0gbmV3IFZ1ZSh7XG4gIGVsOiAnI3ltLXBsYXllcicsXG4gIGRhdGE6IHtcbiAgICBzb25nX25hbWU6ICcnLFxuICAgIGFsYnVtX25hbWU6ICcnLFxuICAgIGFydGlzdF9uYW1lOiAnJyxcbiAgICBzaG93bHJjOiBbXSxcbiAgICBtdXNpY0FycmF5OiAnJyxcbiAgICBwbGF5aW5nTXVzaWM6ICcnLFxuICAgIHBsYXlpbmdJbmRleDogJycsXG4gICAgaGF2ZXZvaWNlOiB0cnVlLFxuICAgIHBsYXlTdGF0dXM6IHRydWUsXG4gICAgcHJldkluZGV4OiAnJyxcbiAgICBwcmV2TXVzaWM6ICcnLFxuICAgIGZvbGxvd0luZGV4OiAnJyxcbiAgICBmb2xsb3dNdXNpYzogJycsXG4gICAgY3VydGltZTogJzAwOjAwJyxcbiAgICBtdXNpY3RpbWU6ICcwMDowMCcsXG4gICAgcGxheWluZ3RpbWU6IDAsXG4gICAgbG9hZGVkOiBmYWxzZVxuICB9LFxuICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge1xuICAgIHRoaXMubG9hZE11c2ljKCk7XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBnZXRKU09OOiBmdW5jdGlvbiBnZXRKU09OKHVybCkge1xuICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciBjbGllbnQgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgY2xpZW50Lm9wZW4oXCJHRVRcIiwgdXJsKTtcbiAgICAgICAgY2xpZW50Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7XG4gICAgICAgIGNsaWVudC5yZXNwb25zZVR5cGUgPSBcImpzb25cIjtcbiAgICAgICAgY2xpZW50LnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgICBjbGllbnQuc2VuZCgpO2Z1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSAhPT0gNCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1pZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcih0aGlzLnN0YXR1c1RleHQpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH0sXG4gICAgY2hhbmdlUGxheTogZnVuY3Rpb24gY2hhbmdlUGxheSgpIHtcbiAgICAgIGlmICh0aGlzLnBsYXlTdGF0dXMgPT0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5wbGF5U3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIucGxheSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wbGF5U3RhdHVzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuJGVscy5tcGxheWVyLnBhdXNlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBsb2FkTXVzaWM6IGZ1bmN0aW9uIGxvYWRNdXNpYyhpZCkge1xuICAgICAgdmFyIHVybCA9IGlkID8gJ2dldFNvbmcucGhwP2lkPScgKyBpZCA6ICdnZXRTb25nLnBocD9pZD0wJztcbiAgICAgIHRoaXMuZ2V0SlNPTih1cmwpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdm0ubXVzaWNBcnJheSA9IGRhdGEudHJhY2tzO1xuICAgICAgICB2bS5tdXNpY0xlbmd0aCA9IHZtLm11c2ljQXJyYXkubGVuZ3RoO1xuICAgICAgICB2bS4kZWxzLmFsYnVtLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIGRhdGEuY292ZXIgKyAnKSc7XG4gICAgICAgIGlmIChkYXRhLmxyYyAhPSBcIm5vXCIpIHtcbiAgICAgICAgICB2bS5zaG93bHJjID0gZGF0YS5scmM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IHsgXCIwXCI6IFwi5pqC5peg5q2M6K+NXCIgfTtcbiAgICAgICAgfVxuICAgICAgICB2bS5zb25nX25hbWUgPSBkYXRhLm11c2ljX25hbWU7XG4gICAgICAgIHZtLmFsYnVtX25hbWUgPSBkYXRhLmFsYnVtX25hbWU7XG4gICAgICAgIHZtLmFydGlzdF9uYW1lID0gZGF0YS5hcnRpc3RzO1xuICAgICAgICB2bS5wbGF5aW5nTXVzaWMgPSBkYXRhLmlkO1xuICAgICAgICB2bS5wbGF5aW5nSW5kZXggPSBkYXRhLmluZGV4O1xuICAgICAgICB2bS5sb2FkZWQgPSB0cnVlO1xuICAgICAgICB2bS4kZWxzLm1wbGF5ZXIuc2V0QXR0cmlidXRlKFwic3JjXCIsIGRhdGEubXAzKTtcbiAgICAgICAgdm0uJGVscy5tcGxheWVyLnZvbHVtbiA9IDAuNTtcbiAgICAgICAgdm0uJGVscy5tcGxheWVyLnBsYXkoKTtcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBhbGVydCgn5pyN5Yqh5Zmo6YCa5L+h5byC5bi4Jyk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGNoYW5nZVZvaWNlOiBmdW5jdGlvbiBjaGFuZ2VWb2ljZShldmVudCkge1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIudm9sdW1lID0gZXZlbnQudGFyZ2V0LnZhbHVlIC8gMTA7XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LnZhbHVlID09IDApIHtcbiAgICAgICAgdGhpcy5oYXZldm9pY2UgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGF2ZXZvaWNlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIG5leHRNdXNpYzogZnVuY3Rpb24gbmV4dE11c2ljKCkge1xuICAgICAgdmFyIHJhbmRvbV9pbmRleDtcbiAgICAgIHZhciByYW5kb21faWQ7XG4gICAgICBpZiAoIXRoaXMuZm9sbG93TXVzaWMgfHwgIXRoaXMuZm9sbG93SW5kZXgpIHtcbiAgICAgICAgcmFuZG9tX2luZGV4ID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiB0aGlzLm11c2ljTGVuZ3RoKTtcbiAgICAgICAgcmFuZG9tX2lkID0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uaWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByYW5kb21faW5kZXggPSB0aGlzLmZvbGxvd0luZGV4O1xuICAgICAgICByYW5kb21faWQgPSB0aGlzLmZvbGxvd011c2ljO1xuICAgICAgfVxuICAgICAgdGhpcy5mb2xsb3dJbmRleCA9ICcnO1xuICAgICAgdGhpcy5mb2xsb3dNdXNpYyA9ICcnO1xuICAgICAgdGhpcy5wcmV2TXVzaWMgPSB0aGlzLnBsYXlpbmdNdXNpYztcbiAgICAgIHRoaXMucHJldkluZGV4ID0gdGhpcy5wbGF5aW5nSW5kZXg7XG4gICAgICB0aGlzLnNob3dscmMgPSBbXTtcbiAgICAgIHRoaXMuZ2V0SlNPTignZ2V0THlyaWNzLnBocD9pZD0nICsgcmFuZG9tX2lkKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGlmIChkYXRhLmxyYyAhPSBcIm5vXCIpIHtcbiAgICAgICAgICB2bS5zaG93bHJjID0gZGF0YS5scmM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IHsgXCIwXCI6IFwi5pqC5peg5q2M6K+NXCIgfTtcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGFsZXJ0KCfmnI3liqHlmajpgJrkv6HlvILluLgnKTtcbiAgICAgIH0pO1xuICAgICAgdmFyIGFydGlzdHNfbmFtZSA9ICcnO1xuICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLm11c2ljQXJyYXlbcmFuZG9tX2luZGV4XS5hcnRpc3RzKSB7XG4gICAgICAgIGFydGlzdHNfbmFtZSArPSB0aGlzLm11c2ljQXJyYXlbcmFuZG9tX2luZGV4XS5hcnRpc3RzW2ldLm5hbWU7XG4gICAgICB9XG4gICAgICB0aGlzLiRlbHMuYWxidW0uc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybCgnICsgdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uYWxidW0ucGljVXJsICsgJyknO1xuICAgICAgdGhpcy5wbGF5aW5nTXVzaWMgPSB0aGlzLm11c2ljQXJyYXlbcmFuZG9tX2luZGV4XS5pZDtcbiAgICAgIHRoaXMucGxheWluZ0luZGV4ID0gcmFuZG9tX2luZGV4O1xuICAgICAgdGhpcy5zb25nX25hbWUgPSB0aGlzLm11c2ljQXJyYXlbcmFuZG9tX2luZGV4XS5uYW1lO1xuICAgICAgdGhpcy5hbGJ1bV9uYW1lID0gdGhpcy5tdXNpY0FycmF5W3JhbmRvbV9pbmRleF0uYWxidW0ubmFtZTtcbiAgICAgIHRoaXMuYXJ0aXN0X25hbWUgPSBhcnRpc3RzX25hbWU7XG4gICAgICB2YXIgbXAzX2FkZHJlc3MgPSB0aGlzLm11c2ljQXJyYXlbcmFuZG9tX2luZGV4XS5tcDNVcmw7XG4gICAgICB0aGlzLiRlbHMubXBsYXllci5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbXAzX2FkZHJlc3MpO1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIudm9sdW1uID0gMC41O1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIucGxheSgpO1xuICAgICAgdGhpcy5wbGF5U3RhdHVzID0gdHJ1ZTtcbiAgICB9LFxuICAgIGJhY2tNdXNpYzogZnVuY3Rpb24gYmFja011c2ljKCkge1xuICAgICAgaWYgKCF0aGlzLnByZXZNdXNpYyB8fCAhdGhpcy5wcmV2SW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgdGhpcy5mb2xsb3dJbmRleCA9IHRoaXMucGxheWluZ0luZGV4O1xuICAgICAgdGhpcy5mb2xsb3dNdXNpYyA9IHRoaXMucGxheWluZ011c2ljO1xuICAgICAgdGhpcy5zaG93bHJjID0gW107XG4gICAgICB0aGlzLmdldEpTT04oJ2dldEx5cmljcy5waHA/aWQ9JyArIHRoaXMucHJldk11c2ljKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGlmIChkYXRhLmxyYyAhPSBcIm5vXCIpIHtcbiAgICAgICAgICB2bS5zaG93bHJjID0gZGF0YS5scmM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0uc2hvd2xyYyA9IHsgXCIwXCI6IFwi5pqC5peg5q2M6K+NXCIgfTtcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGFsZXJ0KCfmnI3liqHlmajpgJrkv6HlvILluLgnKTtcbiAgICAgIH0pO1xuICAgICAgdmFyIGFydGlzdHNfbmFtZSA9ICcnO1xuICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLmFydGlzdHMpIHtcbiAgICAgICAgYXJ0aXN0c19uYW1lICs9IHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0uYXJ0aXN0c1tpXS5uYW1lO1xuICAgICAgfVxuICAgICAgdGhpcy4kZWxzLmFsYnVtLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0uYWxidW0ucGljVXJsICsgJyknO1xuICAgICAgdGhpcy5wbGF5aW5nTXVzaWMgPSB0aGlzLm11c2ljQXJyYXlbdGhpcy5wcmV2SW5kZXhdLmlkO1xuICAgICAgdGhpcy5wbGF5aW5nSW5kZXggPSB0aGlzLnByZXZJbmRleDtcbiAgICAgIHRoaXMuc29uZ19uYW1lID0gdGhpcy5tdXNpY0FycmF5W3RoaXMucHJldkluZGV4XS5uYW1lO1xuICAgICAgdGhpcy5hbGJ1bV9uYW1lID0gdGhpcy5tdXNpY0FycmF5W3RoaXMucHJldkluZGV4XS5hbGJ1bS5uYW1lO1xuICAgICAgdGhpcy5hcnRpc3RfbmFtZSA9IGFydGlzdHNfbmFtZTtcbiAgICAgIHZhciBtcDNfYWRkcmVzcyA9IHRoaXMubXVzaWNBcnJheVt0aGlzLnByZXZJbmRleF0ubXAzVXJsO1xuICAgICAgdGhpcy5wcmV2TXVzaWMgPSAnJztcbiAgICAgIHRoaXMucHJldkluZGV4ID0gJyc7XG4gICAgICB0aGlzLiRlbHMubXBsYXllci5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbXAzX2FkZHJlc3MpO1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIudm9sdW1uID0gMC41O1xuICAgICAgdGhpcy4kZWxzLm1wbGF5ZXIucGxheSgpO1xuICAgICAgdGhpcy5wbGF5U3RhdHVzID0gdHJ1ZTtcbiAgICB9LFxuICAgIGdldE11c2ljOiBmdW5jdGlvbiBnZXRNdXNpYygpIHtcbiAgICAgIHZhciBtX3NlY29uZCA9IHVuZGVmaW5lZCxcbiAgICAgICAgICBtX21pbnV0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIHZhciB0ZW1wX21pbnV0ZSA9IHBhcnNlSW50KHRoaXMuJGVscy5tcGxheWVyLmR1cmF0aW9uIC8gNjApO1xuICAgICAgaWYgKHRlbXBfbWludXRlLnRvU3RyaW5nKCkubGVuZ3RoID4gMSkge1xuICAgICAgICBtX21pbnV0ZSA9ICcnICsgdGVtcF9taW51dGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtX21pbnV0ZSA9ICcwJyArIHRlbXBfbWludXRlO1xuICAgICAgfVxuICAgICAgdmFyIHRlbXBfc2Vjb25kID0gcGFyc2VJbnQodGhpcy4kZWxzLm1wbGF5ZXIuZHVyYXRpb24gJSA2MCk7XG4gICAgICBpZiAodGVtcF9zZWNvbmQudG9TdHJpbmcoKS5sZW5ndGggPiAxKSB7XG4gICAgICAgIG1fc2Vjb25kID0gJycgKyB0ZW1wX3NlY29uZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1fc2Vjb25kID0gJzAnICsgdGVtcF9zZWNvbmQ7XG4gICAgICB9XG4gICAgICB0aGlzLm11c2ljdGltZSA9IG1fbWludXRlICsgJzonICsgbV9zZWNvbmQ7XG4gICAgfSxcbiAgICBwbGF5RXZlbnQ6IGZ1bmN0aW9uIHBsYXlFdmVudCgpIHtcbiAgICAgIHZhciBjX3NlY29uZCA9IHVuZGVmaW5lZCxcbiAgICAgICAgICBjX21pbnV0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIHZhciB0ZW1wX21pbnV0ZSA9IHBhcnNlSW50KHRoaXMuJGVscy5tcGxheWVyLmN1cnJlbnRUaW1lIC8gNjApO1xuICAgICAgaWYgKHRlbXBfbWludXRlLnRvU3RyaW5nKCkubGVuZ3RoID4gMSkge1xuICAgICAgICBjX21pbnV0ZSA9ICcnICsgdGVtcF9taW51dGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjX21pbnV0ZSA9ICcwJyArIHRlbXBfbWludXRlO1xuICAgICAgfVxuICAgICAgdmFyIHRlbXBfc2Vjb25kID0gcGFyc2VJbnQodGhpcy4kZWxzLm1wbGF5ZXIuY3VycmVudFRpbWUgJSA2MCk7XG4gICAgICBpZiAodGVtcF9zZWNvbmQudG9TdHJpbmcoKS5sZW5ndGggPiAxKSB7XG4gICAgICAgIGNfc2Vjb25kID0gJycgKyB0ZW1wX3NlY29uZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNfc2Vjb25kID0gJzAnICsgdGVtcF9zZWNvbmQ7XG4gICAgICB9XG4gICAgICB0aGlzLmN1cnRpbWUgPSBjX21pbnV0ZSArICc6JyArIGNfc2Vjb25kO1xuICAgICAgdmFyIHBsYXlfdGltZSA9IE1hdGguZmxvb3IodGhpcy4kZWxzLm1wbGF5ZXIuY3VycmVudFRpbWUpLnRvU3RyaW5nKCk7XG4gICAgICB0aGlzLmRpc3BsYXlfbHJjKHBsYXlfdGltZSk7XG4gICAgICB2YXIgYnVmZmVyX3BlcmNlbnQgPSB0aGlzLiRlbHMubXBsYXllci5idWZmZXJlZC5lbmQoMCkgLyB0aGlzLiRlbHMubXBsYXllci5kdXJhdGlvbjtcbiAgICAgIHZhciBjdXJyZW50X3BlcmNlbnQgPSB0aGlzLiRlbHMubXBsYXllci5jdXJyZW50VGltZSAvIHRoaXMuJGVscy5tcGxheWVyLmR1cmF0aW9uO1xuICAgICAgdm0uJGVscy5idWZmZXIuc3R5bGUudHJhbnNmb3JtID0gXCJzY2FsZVgoXCIgKyBidWZmZXJfcGVyY2VudCArIFwiKVwiO1xuICAgICAgdm0uJGVscy5wbGF5dGltZS5zdHlsZS50cmFuc2Zvcm0gPSBcInNjYWxlWChcIiArIGN1cnJlbnRfcGVyY2VudCArIFwiKVwiO1xuICAgIH0sXG4gICAgZGlzcGxheV9scmM6IGZ1bmN0aW9uIGRpc3BsYXlfbHJjKHBsYXlfdGltZSkge1xuICAgICAgdmFyIGxyY3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdscmMnKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbHJjcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAobHJjc1tpXS5nZXRBdHRyaWJ1dGUoJ2R0aW1lJykgPD0gdGhpcy4kZWxzLm1wbGF5ZXIuY3VycmVudFRpbWUgJiYgdGhpcy4kZWxzLm1wbGF5ZXIuY3VycmVudFRpbWUgPCBscmNzW2kgKyAxXS5nZXRBdHRyaWJ1dGUoJ2R0aW1lJykpIHtcbiAgICAgICAgICBpZiAobHJjc1tpXS5jbGFzc0xpc3QpIHtcbiAgICAgICAgICAgIGxyY3NbaV0uY2xhc3NMaXN0LmFkZCgnbHJjLWN1cnJlbnQnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbHJjc1tpXS5jbGFzc05hbWUgKz0gJyAnICsgJ2xyYy1jdXJyZW50JztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGxyY3NbaV0uY2xhc3NMaXN0KSB7XG4gICAgICAgICAgICBscmNzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2xyYy1jdXJyZW50Jyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxyY3NbaV0uY2xhc3NOYW1lID0gbHJjc1tpXS5jbGFzc05hbWUucmVwbGFjZShuZXcgUmVnRXhwKCcoXnxcXFxcYiknICsgJ2xyYy1jdXJyZW50Jy5zcGxpdCgnICcpLmpvaW4oJ3wnKSArICcoXFxcXGJ8JCknLCAnZ2knKSwgJyAnKTsgLy9pZThcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
